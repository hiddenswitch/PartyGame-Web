
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

var iAd={};iAd.VERSION="1.6.1";
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Utils={};iAd.Utils.copyPropertiesFromSourceToTarget=function(b,c){for(var a in b){c[a]=b[a]}};iAd.Utils.objectIsFunction=function(a){return(typeof a=="function")};iAd.Utils.objectIsString=function(a){return(typeof a=="string"||a instanceof String)};iAd.Utils.objectIsArray=function(a){return(a instanceof Array)};iAd.Utils.objectIsPrimitive=function(a){return(a==null||typeof a=="number"||typeof a=="boolean"||this.objectIsString(a))};iAd.Utils.objectHasMethod=function(b,a){return(b!=null&&b[a]!==undefined&&this.objectIsFunction(b[a]))};iAd.Utils.objectIsInstanceOfClass=function(a,b){return(b!=null)&&(a instanceof b)};iAd.Utils.resolveObjectPathFrom=function(d,h,f){if(!h||h[0]=="."){return undefined}var c=h.split(".");var a,b;for(var e=0,g=c.length;d!=null&&e<g;e++){b=c[e];a=d[b];if(f&&a==null){a=d[b]={}}d=a}return d};iAd.Utils.resolveObjectPath=function(b,a){return iAd.Utils.resolveObjectPathFrom(window,b,a)};iAd.Utils.setupDisplayNames=function(b,a){var a=a||b.displayName||b.name;b.displayName=b.displayName||a;for(var c in b){if(b.__lookupGetter__(c)){continue}var d=b[c];if(iAd.Utils.objectIsFunction(d)){d.displayName=iAd.Utils.createDisplayName(a,c)}}for(var c in b.prototype){if(b.prototype.__lookupGetter__(c)){continue}var d=b.prototype[c];if(iAd.Utils.objectIsFunction(d)){d.displayName=iAd.Utils.createDisplayName(a,c,true)}}b.callOriginal=function(){var e=b.callOriginal.caller;if(e._originalMethod){return e._originalMethod.apply(this,arguments)}}};iAd.Utils.createDisplayName=function(c,a,b){return c+(b?".":"#")+a+"()"};iAd.Utils.setupDisplayNames(iAd.Utils,"iAd.Utils");
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

var iAP={};iAP.Context={};(function(){var b={};var a=window.navigator.platform;b.IS_IOS=["iPhone","iPod","iPad"].indexOf(a)!=-1;b.IS_IOS_SIMULATOR=navigator.platform=="iPhone Simulator"||navigator.platform=="iPad Simulator";b.IS_OSX=a.indexOf("Mac")!=-1;b.IS_WINDOWS=a.indexOf("Win")!=-1;b.IS_IAD=!!window.ad;b.IS_IAD_PRODUCER=!!window.editorProxy;b.IS_ITUNES_EXTRA=!!window.iTunes;b.IS_IBOOKS=!!window.widget;b.IS_SAFARI=!b.IS_IAD_PRODUCER&&!b.IS_IAD&&!b.IS_ITUNES_EXTRA&&!b.IS_IBOOKS;iAP.Context=b})();iAP.Context.projectIsOfType=function(a){return document.body.hasClassName("iap-"+a)};iAd.Utils.replaceMethod=function(b,a,d){try{if(b.hasOwnProperty("processed")){iAd.Class.processMethod(b,a);b=b.prototype}d._originalMethod=b[a];b[a]=d}catch(c){console.error("Could not replace method",a,"on",b)}};iAd.Utils.isRunningInAdContext=window.hasOwnProperty("ad");iAd.Utils.unique=(function(){var a={};function b(d){var c=a[d];if(!c){c=a[d]={count:0}}return c}return function(d,e){var f,c;f=e||"IAD_UTILS_SHARED_UNIQUE";c=b(f);c.count+=1;if(!d){return c.count}if(typeof d==="function"){return d(c.count)}return d+c.count}}());(function(){var a=window.webkitConvertPointFromPageToNode;window.webkitConvertPointFromPageToNode=function(d,f){var e=a.apply(window,arguments);if(iAd.Utils.pageZoomElement()==d||iAd.Utils.pageZoomElement().contains(d)){var c=iAd.Utils.pageZoom();if(c!=1){e.x/=c;e.y/=c}}return e};var b=window.webkitConvertPointFromNodeToPage;window.webkitConvertPointFromNodeToPage=function(d,e){if(iAd.Utils.pageZoomElement()==d||iAd.Utils.pageZoomElement().contains(d)){var c=iAd.Utils.pageZoom();if(c!=1){e.x*=c;e.y*=c}}return b.call(window,d,e)}})();iAd.Utils.pageZoomElement=function(){return document.body};iAd.Utils.pageZoom=function(){return parseFloat((window._getComputedStyle||window.getComputedStyle)(iAd.Utils.pageZoomElement()).zoom)||1};iAd.Utils.ITMS_URL_REGEX=/^https?(:\/\/(phobos|itunes)\.apple\.com\/)/;iAd.Utils.openURL=function(a){var c=document.createElement("a");if(iAP.Context.IS_ITUNES_EXTRA||iAP.Context.IS_SAFARI){c.target="_blank"}a=a.replace(iAd.Utils.ITMS_URL_REGEX,"itms$1");c.href=a;var b=document.createEvent("Event");b.initEvent("click",true,false);c.dispatchEvent(b);iAd.RootViewController.sharedRootViewController.beginIgnoringInteractionEvents();setTimeout(function(){iAd.RootViewController.sharedRootViewController.endIgnoringInteractionEvents()},0)};iAd.Utils.urlHasValidProtocol=function(a){return a&&a.match(/^[a-z0-9]+:/i)};iAd.Utils.archiveOriginalValue=function(b,a){if(!b._originalValues){b._originalValues={}}if(b._originalValues[a]!==undefined){return}b._originalValues[a]=b[a]};iAd.Utils.restoreOriginalValue=function(b,a){if(!b._originalValues||b._originalValues[a]===undefined){b[a]=b[a];return}b[a]=b._originalValues[a]};iAd.Utils.getOriginalValue=function(b,a){if(!b._originalValues||b._originalValues[a]===undefined){return b[a]}return b._originalValues[a]};iAd.Utils.updateOriginalValue=function(b,a){if(!b._originalValues||b._originalValues[a]===undefined){return}b._originalValues[a]=b[a]};iAd.Utils.humanRandomIndex=function(b){if(!b.length){return -1}b.humanRandomIndexPreviousIndices=b.humanRandomIndexPreviousIndices||[];b.humanRandomIndexI=b.humanRandomIndexI||0;var a;do{a=Math.floor(Math.random()*b.length)}while(b.length>1&&b.humanRandomIndexPreviousIndices.indexOf(a)!=-1);b.humanRandomIndexPreviousIndices[b.humanRandomIndexI]=a;b.humanRandomIndexI=(b.humanRandomIndexI+1)%Math.ceil(b.length/5);return a};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class=function(b){if(typeof b==="string"){b={name:b}}b=b||{};b.symbol=b.symbol===undefined?b.name:b.symbol;b.name=b.name||"AnonymousClass";if(!b.superclass){if("superclass" in b){throw new ReferenceError("An undefined superclass was provided for "+b.name)}else{if(iAd.Object){b.superclass=iAd.Object}}}var e=function(){if(!e.processed){iAd.Class.processAllClasses()}e.prototype.init.apply(this,arguments)};e.processed=false;iAd.Class.unprocessedClasses.push(e);e.displayName=e._name=b.name;iAd.Utils.copyPropertiesFromSourceToTarget(b,e);if(b.symbol&&typeof b.symbol==="string"){var d=b.symbol.split("."),c=d.pop(),a=d.length?iAd.Utils.resolveObjectPath(d.join("."),true):window;if(a){a[c]=e}}return e};iAd.Class.unprocessedClasses=[];iAd.Class.processAllClasses=function(){var c;for(var a=0,b=iAd.Class.unprocessedClasses.length;a<b;a++){c=iAd.Class.unprocessedClasses[a];if(!c.processed){iAd.Class.processClassAndHierarchy(c)}}iAd.Class.unprocessedClasses=[]};iAd.Class.processClassAndHierarchy=function(f){var e=[f];var b=f;while(b=b.superclass){e.push(b)}var a;for(var c=e.length-1;c>=0;c--){a=e[c];if(!a.processed){iAd.Class.processClass(a)}}var d;for(var c=e.length-1;c>=0;c--){d=e[c];if(iAd.Utils.objectHasMethod(d,"initialize")){d.initialize.apply(f)}}};iAd.Class.processClass=function(e){if(e.mixins){iAd.Class.mixin(e.prototype,e.mixins)}var b=e.synthesizedProperties||[];for(var a=0,c=b.length;a<c;a++){iAd.Class.synthesizeProperty(e.prototype,b[a])}for(var d in e.prototype){iAd.Class.processMethod(e,d)}for(d in e){if(e.hasOwnProperty(d)){iAd.Class.processClassMethod(e,d)}}if(e!==iAd.Object){e.prototype.__proto__=e.superclass.prototype}e.processed=true};iAd.Class.synthesizeProperty=function(c,b){var h=b.charAt(0).toUpperCase()+b.substr(1);var e="get"+h;var a="set"+h;var d="_"+b;if(!iAd.Utils.objectHasMethod(c,a)){c[a]=function(i){this[d]=i}}var g=function(i){this[a](i);this.notifyPropertyChange(b)};g.displayName="Setter for ."+b+" on "+c.constructor.displayName;if(!iAd.Utils.objectHasMethod(c,e)){c[e]=function(){return this[d]}}var f=function(){return this[e]()};f.displayName="Getter for ."+b+" on "+c.constructor.displayName;Object.defineProperty(c,b,{get:f,set:g})};iAd.Class.processMethod=function(c,a){var b=Object.getOwnPropertyDescriptor(c.prototype,a).value;if(iAd.Utils.objectIsFunction(b)){b._class=c;b._name=a;if(b.displayName==null){b.displayName=iAd.Utils.createDisplayName(c.displayName,a)}}};iAd.Class.processClassMethod=function(c,a){var b=Object.getOwnPropertyDescriptor(c,a).value;if(iAd.Utils.objectIsFunction(b)&&b.displayName==null){b.displayName=iAd.Utils.createDisplayName(c.displayName,a,true)}};iAd.Class.mixin=function(e,a){var b;for(var c=0,d=a.length;c<d;c++){b=a[c];for(var f in b){if(!e.hasOwnProperty(f)){e[f]=b[f]}}}};iAd.Class.synthesizeProperties=function(d,a){iAd.Class.processClassAndHierarchy(d);for(var b=0,c=a.length;b<c;b++){iAd.Class.synthesizeProperty(d.prototype,a[b])}};iAd.Class.processMethods=function(d,c){iAd.Class.processClassAndHierarchy(d);for(var a=0,b=c.length;a<b;a++){iAd.Class.processMethod(d,c[a])}};iAd.Utils.setupDisplayNames(iAd.Class,"iAd.Class");
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Object",archivedProperties:["delegate","dataSource"]});iAd.Object.PROPERTY_CHANGED="handlePropertyChange";iAd.Object.prototype.init=function(){this.observedProperties={}};iAd.Object.DELEGATE_REG_EXP=/delegate/i;iAd.Object.DATA_SOURCE_REG_EXP=/dataSource/i;iAd.Object.prototype.archiveProperty=function(b){var a=this[b];if(iAd.Object.DELEGATE_REG_EXP.test(b)||iAd.Object.DATA_SOURCE_REG_EXP.test(b)){if(iAd.Utils.objectIsInstanceOfClass(a,iAd.ViewController)){return a.id}return a?iAd.Archiver.referenceForObject(a):null}return a};iAd.Object.prototype.restoreProperty=function(b,a){if(iAd.Object.DELEGATE_REG_EXP.test(b)||iAd.Object.DATA_SOURCE_REG_EXP.test(b)){if(iAd.ViewController&&iAd.ViewController.instances[a]){a=iAd.ViewController.instances[a]}else{a=iAd.Archiver.objectForReference(a)}}this[b]=a};iAd.Object.prototype.callSuper=function(){var a=iAd.Object.prototype.callSuper.caller;if(iAd.Utils.objectHasMethod(a,"superclass")){a.superclass.apply(this,arguments)}else{var c=a._class.superclass.prototype;var b=a._name;if(iAd.Utils.objectHasMethod(c,b)){return c[b].apply(this,arguments)}}};iAd.Object.prototype.isPropertyObserved=function(a){return(this.observedProperties[a]!==undefined)};iAd.Object.prototype.addPropertyObserver=function(c,b,a){var d=this.observedProperties[c];if(!this.isPropertyObserved(c)){d=this.observedProperties[c]={targets:[],methodNames:[]}}else{if(d.targets.indexOf(b)>-1){return}}var a=a||iAd.Object.PROPERTY_CHANGED;if(iAd.Utils.objectHasMethod(b,a)){d.targets.push(b);d.methodNames.push(a)}};iAd.Object.prototype.removePropertyObserver=function(c,b){if(!this.isPropertyObserved(c)){return false}var e=this.observedProperties[c];var d=e.targets.indexOf(b);var a=d>-1;if(a){e.targets.splice(d,1);e.methodNames.splice(d,1);if(e.targets.length==0){delete this.observedProperties[c]}}return a};iAd.Object.prototype.notifyPropertyChange=function(b){if(!this.isPropertyObserved(b)){return}var f=this.observedProperties[b];var a=f.targets.slice();var e=f.methodNames.slice();for(var c=0,d=a.length;c<d;c++){a[c][e[c]](this,b)}};iAd.Object.prototype.callMethodNameAfterDelay=function(a,d){var e=this;var c=Array.prototype.slice.call(arguments,2);var b=function(){e[a].apply(e,c)};b.displayName=iAd.Utils.createDisplayName(this.constructor.displayName||this.constructor.name,a);return setTimeout(b,d*1000)};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Point",archivedProperties:["x","y"]});iAd.Point.prototype.init=function(a,b){this.callSuper();this.x=(a!=null&&!isNaN(a))?a:0;this.y=(b!=null&&!isNaN(b))?b:0};iAd.Point.fromEvent=function(a){var a=(a.touches&&a.touches.length>0)?a.touches[0]:a;return new iAd.Point(a.pageX,a.pageY)};iAd.Point.fromEventInElement=function(c,b){var c=(c.touches&&c.touches.length>0)?c.touches[0]:c;var a=window.webkitConvertPointFromPageToNode(b,new WebKitPoint(c.pageX,c.pageY));return new iAd.Point(a.x,a.y)};iAd.Point.prototype.toString=function(){return"iAd.Point["+this.x+","+this.y+"]"};iAd.Point.prototype.copy=function(){return new iAd.Point(this.x,this.y)};iAd.Point.prototype.equals=function(a){return(this.x==a.x&&this.y==a.y)};iAd.Class({name:"iAd.Size",archivedProperties:["width","height"]});iAd.Size.prototype.init=function(b,a){this.callSuper();this.width=(b!=null&&!isNaN(b))?b:0;this.height=(a!=null&&!isNaN(a))?a:0};iAd.Size.ZERO_SIZE=new iAd.Size(0,0);iAd.Size.prototype.toString=function(){return"iAd.Size["+this.width+","+this.height+"]"};iAd.Size.prototype.copy=function(){return new iAd.Size(this.width,this.height)};iAd.Size.prototype.equals=function(a){return(this.width==a.width&&this.height==a.height)};iAd.Class({name:"iAd.Rect",archivedProperties:["origin","size"]});iAd.Rect.prototype.init=function(b,d,c,a){this.callSuper();this.origin=new iAd.Point(b||0,d||0);this.size=new iAd.Size(c||0,a||0)};iAd.Rect.ZERO_RECT=new iAd.Rect(0,0,0,0);iAd.Rect.prototype.toString=function(){return"iAd.Rect["+[this.origin.x,this.origin.y,this.size.width,this.size.height].join(", ")+"]"};iAd.Rect.prototype.copy=function(){return new iAd.Rect(this.origin.x,this.origin.y,this.size.width,this.size.height)};iAd.Rect.prototype.equals=function(a){return(this.origin.equals(a.origin)&&this.size.equals(a.size))};iAd.Rect.prototype.inset=function(a){return new iAd.Rect(this.origin.x+a.left,this.origin.y+a.top,this.size.width-a.left-a.right,this.size.height-a.top-a.bottom)};iAd.Rect.prototype.minX=function(){return this.origin.x};iAd.Rect.prototype.minY=function(){return this.origin.y};iAd.Rect.prototype.midX=function(){return this.origin.x+(this.size.width/2)};iAd.Rect.prototype.midY=function(){return this.origin.y+(this.size.height/2)};iAd.Rect.prototype.maxX=function(){return this.origin.x+this.size.width};iAd.Rect.prototype.maxY=function(){return this.origin.y+this.size.height};iAd.Rect.prototype.intersectionWithRect=function(e){var f=new iAd.Rect();var b=Math.max(this.minX(),e.minX());var a=Math.min(this.maxX(),e.maxX());if(b>a){return iAd.Rect.ZERO_RECT}f.origin.x=b;f.size.width=a-b;var d=Math.max(this.minY(),e.minY());var c=Math.min(this.maxY(),e.maxY());if(d>c){return iAd.Rect.ZERO_RECT}f.origin.y=d;f.size.height=c-d;return f};iAd.Class({name:"iAd.EdgeInsets",archivedProperties:["top","right","bottom","left"]});iAd.EdgeInsets.prototype.init=function(d,b,a,c){this.top=d;this.right=b;this.bottom=a;this.left=c};iAd.EdgeInsets.prototype.equals=function(a){return(this.top==a.top&&this.right==a.right&&this.bottom==a.bottom&&this.left==a.left)};iAd.EdgeInsets.prototype.copy=function(){return new iAd.EdgeInsets(this.top,this.right,this.bottom,this.left)};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Path={};iAd.Path.HIDPI_SUFFIX="@2x";iAd.Path.escapeRegExp=function(b){var a=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");return b.replace(a,"\\$&")};iAd.Path.appendHiDPISuffix=function(a){var c="("+iAd.Path.escapeRegExp(iAd.Path.HIDPI_SUFFIX)+"|"+iAd.Path.escapeRegExp(encodeURIComponent(iAd.Path.HIDPI_SUFFIX))+")(\\.[^\\./]+)?$",b=new RegExp(c,"i");if(!b.test(a)){if(/~ipad/.test(a)){var d=a.lastIndexOf("~ipad");a=a.substr(0,d)+iAd.Path.HIDPI_SUFFIX+a.substr(d)}else{if(/\.[^\.\/]+/.test(a)){var d=a.lastIndexOf(".");a=a.substr(0,d)+iAd.Path.HIDPI_SUFFIX+a.substr(d)}else{a+=iAd.Path.HIDPI_SUFFIX}}}return a};iAd.Path.HREF_PROXY=null;iAd.Path.resolveAbsolutePath=function(b){if(!iAd.Path.HREF_PROXY){iAd.Path.HREF_PROXY=document.createElement("a")}var a=iAd.Path.HREF_PROXY;a.href=b;return a.href};iAd.Path.objectToQueryString=function(a,b){return iAd.Path.objectToQueryStringForKey(a,b,null)};iAd.Path.objectToQueryStringForKey=function(a,h,d){h=h||"&";d=d||"";if(iAd.Utils.objectIsPrimitive(a)){var c=a?encodeURIComponent(a):"";if(d&&c){return encodeURIComponent(d)+"="+c}return c}var f=[],g=d;if(iAd.Utils.objectIsArray(a)){if(g){g+="[]"}for(var b=0,e=a.length;b<e;b++){f.push(iAd.Path.objectToQueryStringForKey(a[b],h,g))}}else{if(typeof(a)=="object"){for(var d in a){f.push(iAd.Path.objectToQueryStringForKey(a[d],h,g?g+"["+d+"]":d))}}}return f.join(h)};Object.defineProperty(iAd.Path,"assetsPath",{get:function(){if(this._assetsPath){return this._assetsPath}var a=/\/?iAd(-\w+)?\.cssz?(\?.*)?$/;var c,d,f;for(var b=0,e=document.styleSheets.length;b<e;b++){c=document.styleSheets[b];if(c.href){d=c.href.split("/");f=d.pop();if(a.test(f)){d.push("assets/");this._assetsPath=d.join("/");return this._assetsPath}}}},set:function(a){this._assetsPath=a}});iAd.Utils.setupDisplayNames(iAd.Path,"iAd.Path");
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Path.assetsPath="plugins/com.apple.iAdProducer.iAdJS/assets/";iAd.Path.lastPathComponent=function(a){if(!a){return a}var b=a.split("/");return decodeURIComponent(b.slice(b.length-1).join())};iAd.Path.appendHiDPISuffixIfAvailable=function(a){return window.imageAssetInfo&&window.imageAssetInfo[a]?iAd.Path.appendHiDPISuffix(a):a};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Console={};iAd.Console.log=function(){if(window.console&&console.log){console.log.apply(console,arguments)}};iAd.Console._fallbackLog=function(b,a){a.unshift(b.toUpperCase()+":");iAd.Console.log.apply(iAd.Console,a)};iAd.Console._log=function(b,a){if(window.console&&console[b]){console[b].apply(console,a);return}iAd.Console._fallbackLog(b,Array.prototype.slice.call(a))};iAd.Console.warn=function(){iAd.Console._log("warn",arguments)};iAd.Console.error=function(){iAd.Console._log("error",arguments)};iAd.Console.debug=function(){iAd.Console._log("debug",arguments)};iAd.Console.assert=function(){if(window.console&&console.assert){console.assert.apply(console,arguments);return}if(!arguments[0]){iAd.Console._fallbackLog("assert",[arguments[1]||""])}};iAd.Console.info=function(){iAd.Console._log("info",arguments)};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.CSS={};iAd.CSS.t=function(b,a){return iAd.CSS.t3d(b,a,0)};iAd.CSS.t3d=function(b,a,c){iAd.CSS.sanitizeNumberArguments(arguments);return"translate3d("+b+"px, "+a+"px, "+c+"px)"};iAd.CSS.r3d=function(a,d,c,b){iAd.CSS.sanitizeNumberArguments(arguments);return"rotate3d("+a+", "+d+", "+c+", "+b+"rad)"};iAd.CSS.roundedPxValue=function(b){var a=window.devicePixelRatio;return((b*a)|0)/a};iAd.CSS.tm=function(b,a){iAd.CSS.sanitizeNumberArguments(arguments);return"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+b+", "+a+", 0, 1)"};iAd.CSS.matrixFromString=function(a){var b="";if(a.length>0&&a!="none"){b=a.replace(/([^(]*)\(([^)]*)\)/g,function(d,f,e){var c=e.replace(/(\-?[0-9.]+(?:e\-?[0-9]+)?)([^,]*)/g,function(h,i,g){i=parseFloat(i);return i.toFixed(6)+g});return f+"("+c+")"})}return new WebKitCSSMatrix(b)};iAd.CSS.concatenateTransforms=function(){var d=[];for(var b=0,c=arguments.length;b<c;b++){var a=arguments[b];if(a&&a!="none"){d.push(a)}}return d.join(" ")};iAd.CSS.isClassNameValid=function(a){return a!=null&&a!=""&&a===String(a).replace(/\s/g,"")};iAd.CSS.matrixEqualsToMatrix=function(c,a){for(var e=1;e<=4;e++){for(var b=1;b<=4;b++){var d="m"+e+b;if(c[d]!==a[d]){return false}}}return true};iAd.CSS.widthForTextAndFont=function(b,a){if(!this.textMeasuringCanvasContext){this.textMeasuringCanvasContext=document.createElement("canvas").getContext("2d")}if(a){this.textMeasuringCanvasContext.font=a}return this.textMeasuringCanvasContext.measureText(b).width};iAd.CSS.isStyleSheetLoaded=function(a){return(iAd.CSS.elementForStyleSheet(a)!=null)};iAd.CSS.elementForStyleSheet=function(a){var c,e=document.styleSheets;for(var b=0,d=e.length;b<d;b++){c=e[b];if(c.href==a){return c}}return null};iAd.CSS.flushPendingUpdates=function(){var a=document.body.offsetWidth};iAd.CSS.sanitizeNumberArguments=function(a){for(var b=0,c=a.length;b<c;b++){if(typeof a[b]=="number"){a[b]=a[b].toFixed(20)}}};iAd.Utils.setupDisplayNames(iAd.CSS,"iAd.CSS");
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.CSS.widthForTextAndFont=function(d,c){if(!this.textMeasuringCanvasContext){this.textMeasuringCanvasContext=document.createElement("canvas").getContext("2d")}var a=this.textMeasuringCanvasContext.font;if(c){this.textMeasuringCanvasContext.font=c}var b=0;d.split("\n").forEach(function(e){b=Math.max(b,this.textMeasuringCanvasContext.measureText(e).width)},this);this.textMeasuringCanvasContext.font=a;return b};iAd.CSS.setLayerBackgroundImageIfDifferent=function(b,c){var a=c.resolvedURL;if(b.style.backgroundImage&&b._iap_cachedBackgroundImage==a){return}b._iap_cachedBackgroundImage=a;b.style.backgroundImage="url("+a+")"};(function(){if(iAP.Context.IS_ITUNES_EXTRA){var b=iAd.CSS.concatenateTransforms;var a=/(matrix3d|translate3d|translateZ|rotate3d|rotateZ|scale3d|scaleZ)/i;iAd.CSS.concatenateTransforms=function(){var e=b.apply(this,arguments),d=new WebKitCSSMatrix(e),c="";if(e.match(a)){var f=[d.m11,d.m12,d.m13,d.m14,d.m21,d.m22,d.m23,d.m24,d.m31,d.m32,d.m33,d.m34,d.m41,d.m42,d.m43,d.m44];c="matrix3d("+f.join(", ")+")"}else{c=d.toString()}return c}}})();
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Element={};iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX="data-";iAd.Element.ATTRIBUTE_PREFIX="ad-";iAd.Element.elementFromString=function(d){var a=document.createRange();a.selectNode(document.body);var b=a.createContextualFragment(d);var c=b.firstChild;while(c.nodeType!=Node.ELEMENT_NODE&&c.nextSibling){c=c.nextSibling}return c};iAd.Element.hasCustomAttribute=function(b,a){return b.hasAttribute(iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX+a)||b.hasAttribute(a)};iAd.Element.getCustomAttribute=function(c,a){var b=c.getAttribute(iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX+a);return iAd.Utils.objectIsString(b)?b:c.getAttribute(a)};iAd.Element.SUPPORTS_CLASS_LIST=("classList" in document.documentElement);Element.prototype.hasClassName=iAd.Element.SUPPORTS_CLASS_LIST?function(a){return iAd.CSS.isClassNameValid(a)&&this.classList.contains(a)}:function(a){return new RegExp("(?:^|\\s+)"+a+"(?:\\s+|$)").test(this.className)};Element.prototype.addClassName=iAd.Element.SUPPORTS_CLASS_LIST?function(a){if(!iAd.CSS.isClassNameValid(a)||this.classList.contains(a)){return false}this.classList.add(a);return true}:function(a){if(!this.hasClassName(a)){this.className=[this.className,a].join(" ");return true}else{return false}};Element.prototype.removeClassName=iAd.Element.SUPPORTS_CLASS_LIST?function(a){if(iAd.CSS.isClassNameValid(a)&&this.classList.contains(a)){this.classList.remove(a);return true}return false}:function(b){if(this.hasClassName(b)){var a=this.className;this.className=a.replace(new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)","g")," ");return true}return false};Element.prototype.toggleClassName=iAd.Element.SUPPORTS_CLASS_LIST?function(a,b){if(iAd.CSS.isClassNameValid(a)){if(b==null){b=!this.classList.contains(a)}this.classList[b?"add":"remove"](a)}}:function(a,b){if(b==null){b=!this.hasClassName(a)}this[b?"addClassName":"removeClassName"](a)};iAd.Utils.setupDisplayNames(Element,"Element");
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Element.getCustomAttribute=function(b,a){if(iAd.Device.HAS_4_INCH_DISPLAY){var c=b.getAttribute(a+"-for-ad-normal-4-inch");return iAd.Utils.objectIsString(c)?c:b.getAttribute(a)}else{return b.getAttribute(a)}};iAd.Element.getChildMatchingSelector=function(d,a){var c=d.children;for(var b=0,e=c.length;b<e;b++){if(c[b].webkitMatchesSelector(a)){return c[b]}}return null};iAd.Element.getChildrenMatchingSelector=function(d,a){var c=d.children;var f=[];for(var b=0,e=c.length;b<e;b++){if(c[b].webkitMatchesSelector(a)){f.push(c[b])}}return f};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Device={};iAd.Device.iOS_VERSION=navigator.userAgent.match(/OS ([0-9_]+)/);iAd.Device.iOS_VERSION=iAd.Device.iOS_VERSION?iAd.Device.iOS_VERSION[1].replace(/_/g,"."):null;iAd.Device.IS_IPAD=(navigator.platform.indexOf("iPad")>-1);iAd.Device.HAS_HIDPI_DISPLAY=(window.devicePixelRatio>=2);iAd.Device.iOSVersionLessThan=function(a){if(iAd.Device.iOS_VERSION==null){iAd.Console.warn("iAd.Device.iOS_VERSION is null.");return false}return iAd.Device.compareiOSVersions(iAd.Device.iOS_VERSION,a)==-1};iAd.Device.compareiOSVersions=function(e,d){var h=e.split(".");var g=d.split(".");for(var c=0,f=Math.max(h.length,g.length);c<f;c++){var b=parseInt(h[c]||"0",10),a=parseInt(g[c]||"0",10);if(a>b){return -1}else{if(b>a){return 1}}}return 0};iAd.Device.ORIENTATION_PORTRAIT_CSS="ad-device-portrait";iAd.Device.ORIENTATION_LANDSCAPE_CSS="ad-device-landscape";iAd.Device.ORIENTATION_PORTRAIT=0;iAd.Device.ORIENTATION_PORTRAIT_UPSIDE_DOWN=180;iAd.Device.ORIENTATION_LANDSCAPE_LEFT=90;iAd.Device.ORIENTATION_LANDSCAPE_RIGHT=-90;iAd.Device.init=function(){if(iAd.Device.iOS_VERSION){window.addEventListener("orientationchange",iAd.Device.interfaceOrientationDidChange,true)}iAd.Device.setInterfaceOrientation(window.orientation||iAd.Device.ORIENTATION_PORTRAIT);iAd.Device.HAS_4_INCH_DISPLAY=window.innerHeight==568||window.innerWidth==568};iAd.Device.interfaceOrientationDidChange=function(a){iAd.Device.setInterfaceOrientation(window.orientation)};iAd.Device.setInterfaceOrientation=function(c){var d=this.interfaceOrientation;this.interfaceOrientation=c;var b=(Math.abs(c)==90);var a=document.body;var e=a.addClassName(b?iAd.Device.ORIENTATION_LANDSCAPE_CSS:iAd.Device.ORIENTATION_PORTRAIT_CSS);if(e){a.removeClassName(b?iAd.Device.ORIENTATION_PORTRAIT_CSS:iAd.Device.ORIENTATION_LANDSCAPE_CSS)}if(d!=null&&iAd.ViewController){iAd.ViewController.orientationDidChange(d)}};window.addEventListener("DOMContentLoaded",iAd.Device.init,true);iAd.Utils.setupDisplayNames(iAd.Device,"iAd.Device");
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Image",synthesizedProperties:["width","height","loaded"],archivedProperties:["url","hasHiDPIVersion"]});iAd.Image.prototype.init=function(b,a){this.callSuper();this.url=b;this.resolvedURL=iAd.Image.resolveURL(b,a);this.hasHiDPIVersion=a;this._loaded=false;this.scaleFactor=(a&&iAd.Device.HAS_HIDPI_DISPLAY)?0.5:1;this.element=new Image();this.load();iAd.Image.imageWasCreated(this)};iAd.Image.prototype.getWidth=function(){return this.element.width*this.scaleFactor};iAd.Image.prototype.getHeight=function(){return this.element.height*this.scaleFactor};iAd.Image.prototype.handleEvent=function(a){if(a.type==="load"&&(a.target===this.element)){this.loaded=true;this.element.removeEventListener("load",this,false);this.runCompletion(false)}};iAd.Image.prototype.load=function(){this.element.src=this.resolvedURL;if(this.element.complete){this.loaded=true}else{this.element.addEventListener("load",this,false)}};iAd.Image.prototype.whenLoaded=function(b,a){this.whenLoadedArguments={completion:b,methodName:a};if(this._loaded){this.runCompletion(true)}};iAd.Image.prototype.runCompletion=function(a){var b=this.whenLoadedArguments;if(!b){return}if(iAd.Utils.objectIsFunction(b.completion)){b.completion(this,a)}else{if(iAd.Utils.objectHasMethod(b.completion,b.methodName)){b.completion[b.methodName](this,a)}}delete this.whenLoadedArguments};iAd.Image.imageForURL=function(b,a){if(!b){return null}var c=iAd.Image.resolveURL(b,a);if(this.instances&&this.instances[c]){return this.instances[c]}return new iAd.Image(b,a)};iAd.Image.restoreFromArchive=function(a){return this.imageForURL(a.url,a.hasHiDPIVersion)};iAd.Image.resolveURL=function(b,a){return(a&&iAd.Device.HAS_HIDPI_DISPLAY)?iAd.Path.appendHiDPISuffix(b):b};iAd.Image.imageWasCreated=function(a){if(!this.instances){this.instances={};window.setTimeout(iAd.Image.runLoopDidStart,0)}this.instances[a.resolvedURL]=a};iAd.Image.runLoopDidStart=function(){delete iAd.Image.instances};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Image.isEqual=function(d,c){return d&&c&&d.resolvedURL==c.resolvedURL&&d.hasHiDPIVersion==c.hasHiDPIVersion};iAd.Image.imageForURL=function(b,a){if(!b){return null}if(arguments.length<2){a=window.imageAssetInfo&&window.imageAssetInfo[b]}var c=iAd.Image.resolveURL(b,a);if(this.instances&&this.instances[c]){return this.instances[c]}return new iAd.Image(b,a)};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Array={};iAd.Array.removeObjectFromArray=function(b,c){var a=c.indexOf(b);if(a==-1){return false}c.splice(a,1);return true};iAd.Utils.setupDisplayNames(iAd.Array,"iAd.Array");
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.String={};iAd.String.dashedStringToCamelCase=function(a){var b=a.split("-");return b.shift()+b.map(iAd.String.capitalizeString).join("")};iAd.String.capitalizeString=function(a){return a.charAt(0).toUpperCase()+a.substr(1)};iAd.String.camelCaseStringToDashed=function(a){return a.replace(/([A-Z])/g,function(b){return"-"+b.toLowerCase()})};iAd.String.REPLACEMENT_SENTINEL="%@";iAd.String.REPLACEMENT_SENTINEL_LENGTH=iAd.String.REPLACEMENT_SENTINEL.length;iAd.String.format=function(){var g=arguments.length;if(!g){return""}var c=arguments[0];var a="";var f=0;var e=0;var d;for(d=1;d<g&&(e=c.indexOf(iAd.String.REPLACEMENT_SENTINEL,f))>=0;++d){a+=c.slice(f,e);a+=arguments[d];f=e+iAd.String.REPLACEMENT_SENTINEL_LENGTH}var b=c.slice(f);a+=b;if(d<g){iAd.Console.warn("String.format - More arguments than specifiers")}if(b.indexOf(iAd.String.REPLACEMENT_SENTINEL)!==-1){iAd.Console.warn("String.format - More specifiers than arguments")}return a};iAd.Utils.setupDisplayNames(iAd.String,"iAd.String");
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Event={};iAd.Event.notificationEvents={};iAd.Event.registerForNotificationEvent=function(a){iAd.Event.notificationEvents[a]=true};iAd.Event.SUPPORTS_TOUCHES=("createTouch" in document);iAd.Event.START_EVENT=iAd.Event.SUPPORTS_TOUCHES?"touchstart":"mousedown";iAd.Event.MOVE_EVENT=iAd.Event.SUPPORTS_TOUCHES?"touchmove":"mousemove";iAd.Event.END_EVENT=iAd.Event.SUPPORTS_TOUCHES?"touchend":"mouseup";iAd.Event.CANCEL_EVENT="touchcancel";iAd.Event.createUIEvent=function(a,b){return iAd.Event.SUPPORTS_TOUCHES?this.createEventWithTouch(a,b):this.createEventWithMouse(a,b)};iAd.Event.createEventWithTouch=function(b,a){var c=document.createEvent("TouchEvent");c.initTouchEvent(b,a.bubbles,a.cancelable,window,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.touches,a.targetTouches,a.changedTouches,a.scale,a.rotation);return c};iAd.Event.createEventWithMouse=function(a,c){var b=document.createEvent("MouseEvent");b.initMouseEvent(a,c.bubbles,c.cancelable,document.defaultView,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.metaKey,c.button,c.relatedTarget);return b};iAd.Event.preventDefault=function(a){a.preventDefault()};iAd.Event.eventHandlerForString=function(a){var b=new Function(a);return function(c){b.call(null,c)}};iAd.Event.KEYBOARD_BACKSPACE=8;iAd.Event.KEYBOARD_LEFT=37;iAd.Event.KEYBOARD_RIGHT=39;iAd.Event.KEYBOARD_UP=38;iAd.Event.KEYBOARD_DOWN=40;iAd.Event.KEYBOARD_RETURN=13;iAd.Utils.setupDisplayNames(iAd.Event,"iAd.Event");
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.EventTarget={};iAd.EventTarget.addEventListener=function(b,c,a){if(!this.eventTarget){iAd.Console.warn("iAd.EventTarget.addEventListener: cannot add event listener since no eventTarget was specified by the mixing object.");return}iAd.Event.registerForNotificationEvent(b);this.eventTarget.addEventListener(b,c,a)};iAd.EventTarget.removeEventListener=function(b,c,a){if(!this.eventTarget){iAd.Console.warn("iAd.EventTarget.removeEventListener: cannot remove event listener since no eventTarget was specified by the mixing object.");return}this.eventTarget.removeEventListener(b,c,a)};iAd.EventTarget.dispatchEvent=function(a){if(!this.eventTarget){iAd.Console.warn("iAd.EventTarget.dispatchEvent: cannot dispatch event since no eventTarget was specified by the mixing object.");return}this.eventTarget.dispatchEvent(a)};iAd.EventTarget.dispatchNotification=function(b,a,c){this.notifyDelegate(b,a,c);this.createAndDispatchEvent(b,c)};iAd.EventTarget.notifyDelegate=function(c,b,d){if(iAd.Utils.objectHasMethod(b,c)){var a=[this];if(d){a=a.concat(d.map(function(e){return e[1]}))}b[c].apply(b,a)}};iAd.EventTarget.createEvent=function(b,e){var d=document.createEvent("Event");d.initEvent(b,true,false);if(!d.ad){d.ad={}}d.ad.sender=this;if(e){for(var a=0,c=e.length;a<c;a++){d.ad[e[a][0]]=e[a][1]}}return d};iAd.EventTarget.createAndDispatchEvent=function(a,b){if(iAd.Event.notificationEvents[a]){this.dispatchEvent(this.createEvent(a,b))}};iAd.Utils.setupDisplayNames(iAd.EventTarget,"iAd.EventTarget");
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

(function eventTargetAnalytics(){var a=iAd.EventTarget.createAndDispatchEvent;iAd.EventTarget.createAndDispatchEvent=function(c,d){a.apply(this,arguments);if(!iAd.Event.notificationEvents[c]){iAd.Analytics.logEvent(c,this)}};var b=iAd.EventTarget.dispatchEvent;iAd.EventTarget.dispatchEvent=function(c){b.apply(this,arguments);iAd.Analytics.logEvent(c.type,this)}}());
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Transition",mixins:[iAd.EventTarget]});iAd.Transition.DID_COMPLETE_DELEGATE="transitionDidComplete";iAd.Transition.DEFAULTS={duration:0.5,delay:0,removesTargetUponCompletion:false,revertsToOriginalValues:false};iAd.Transition.STYLES=["-webkit-transition-property","-webkit-transition-duration","-webkit-transition-timing-function","-webkit-transition-delay","-webkit-transition"];iAd.Transition.NORMALIZE_ZERO_REG_EXP=/([^\d+-]|^)[+-]?0[a-z%]*/g;iAd.Transition.HARDWARE_LAYER_BACKING_PROPERTIES=["position"];iAd.Transition.prototype.init=function(a,b){this.target=null;this.properties=null;this.base=null;this.duration=null;this.delay=null;this.from=null;this.to=null;this.timingFunction=null;this.delegate=null;this.removesTargetUponCompletion=null;this.revertsToOriginalValues=null;this.defaultsApplied=false;this.archivedStyles=null;this.archivedValues=[];this.archivedBaseValues=[];this.definition=a;this.reversed=!!b};iAd.Transition.prototype.applyDefaults=function(){if(this.defaultsApplied){return}for(var a in iAd.Transition.DEFAULTS){if(this[a]==null){this[a]=iAd.Transition.DEFAULTS[a]}}this.defaultsApplied=true};iAd.Transition.prototype.archiveTransitionStyles=function(){if(this.archivedStyles!=null){return}var b=iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)?this.target.layer:this.target;this.archivedStyles=[];for(var a=0,c=iAd.Transition.STYLES.length;a<c;a++){this.archivedStyles.push(b.style.getPropertyValue(iAd.Transition.STYLES[a]))}};iAd.Transition.prototype.restoreTransitionStyles=function(){for(var a=0,b=iAd.Transition.STYLES.length;a<b;a++){this.element.style.setProperty(iAd.Transition.STYLES[a],this.archivedStyles[a],"")}this.archivedStyles=null};iAd.Transition.prototype.archiveBaseValues=function(){if(!this.revertsToOriginalValues){return}if(iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)){for(var a=0,b=this.properties.length;a<b;a++){this.archivedValues[a]=this.target[this.properties[a]]}if(this.base){for(var a=0,b=this.base.length;a<b;a+=2){this.archivedBaseValues[a]=this.target[this.base[a]]}}}else{for(var a=0,b=this.properties.length;a<b;a++){this.archivedValues[a]=this.target.style.getPropertyValue(this.properties[a])}if(this.base){for(var a=0,b=this.base.length;a<b;a+=2){this.archivedBaseValues[a]=this.target.style.getPropertyValue(this.base[a])}}}};iAd.Transition.prototype.restoreBaseValues=function(){if(iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)){for(var a=0,b=this.properties.length;a<b;a++){this.target[this.properties[a]]=this.archivedValues[a]}if(this.base){for(var a=0,b=this.base.length;a<b;a+=2){this.target[this.base[a]]=this.archivedBaseValues[a]}}}else{for(var a=0,b=this.properties.length;a<b;a++){this.target.style.setProperty(this.properties[a],this.archivedValues[a],null)}if(this.base){for(var a=0,b=this.base.length;a<b;a+=2){this.target.style.setProperty(this.base[a],this.archivedBaseValues[a],null)}}}};iAd.Transition.prototype.start=function(){if(iAd.Transaction.openTransactions>0){iAd.Transaction.addTransition(this)}else{this.applyFromState();iAd.CSS.flushPendingUpdates();this.callMethodNameAfterDelay("applyToState",0)}return this};iAd.Transition.prototype.applyFromState=function(){this.processDefinition();this.applyDefaults();this.archiveTransitionStyles();this.archiveBaseValues();this.enforceHardwareLayerBacking();if(this.from==null){return}if(iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)){this.target.layer.style.webkitTransitionDuration=0;if(this.base){for(var a=0,b=this.base.length;a<b;a+=2){this.target[this.base[a]]=this.base[a+1]}}for(var a=0,b=this.properties.length;a<b;a++){this.target[this.properties[a]]=this.from[a]}}else{this.target.style.webkitTransitionDuration=0;if(this.base){for(var a=0,b=this.base.length;a<b;a+=2){this.target.style.setProperty(this.base[a],this.base[a+1],null)}}for(var a=0,b=this.properties.length;a<b;a++){this.target.style.setProperty(this.properties[a],this.from[a],null)}}};iAd.Transition.prototype.processDefinition=function(){if(!this.definition){return}var a=this.definition;if(iAd.Utils.objectIsFunction(a)){if(this.target!=null&&iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)){a=a(this.target)}else{return}}iAd.Utils.copyPropertiesFromSourceToTarget(a,this);if(this.reversed){var b=this.from;this.from=this.to;this.to=b}};iAd.Transition.prototype.enforceHardwareLayerBacking=function(){if(iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)){for(var a=0,b=this.properties.length;a<b;a++){if(iAd.Transition.HARDWARE_LAYER_BACKING_PROPERTIES.indexOf(this.properties[a])!=-1){this.target.wantsHardwareLayerBacking=true;return}}}};iAd.Transition.prototype.applyToState=function(){var e=iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View);this.cssProperties=[];var h=[];for(var b=0,d=this.properties.length;b<d;b++){var f=(e)?this.target.cssPropertyNameForJSProperty(this.properties[b]):this.properties[b];if(this.cssProperties.indexOf(f)>-1){continue}var g=(iAd.Utils.objectIsArray(this.duration))?this.duration[b]:this.duration;var c=(iAd.Utils.objectIsArray(this.timingFunction))?this.timingFunction[b]:this.timingFunction;var a=(iAd.Utils.objectIsArray(this.delay))?this.delay[b]:this.delay;h.push([f,g+"s",c,a+"s"].join(" "));if(!this.propertyStatesAreEqualForIndex(b)){this.cssProperties.push(f)}}this.element=e?this.target.layer:this.target;this.eventTarget=this.element;if(g!==0){this.element.addEventListener("webkitTransitionEnd",this,false)}this.completedTransitions=0;this.element.style.webkitTransition=h.join(", ");if(e){for(var b=0,d=this.properties.length;b<d;b++){this.target[this.properties[b]]=this.to[b]}}else{for(var b=0,d=this.properties.length;b<d;b++){this.target.style.setProperty(this.properties[b],this.to[b],"")}}if(!this.cssProperties.length){this.callMethodNameAfterDelay("handleTransitionComplete",0)}};iAd.Transition.prototype.propertyStatesAreEqualForIndex=function(a){var c=this.from==null?this.target[this.properties[a]]:this.from[a];var b=this.to[a];if((c instanceof iAd.Point&&b instanceof iAd.Point)||(c instanceof iAd.Size&&b instanceof iAd.Size)){return c.equals(b)}else{if(iAd.Utils.objectIsString(c)&&iAd.Utils.objectIsString(b)){c=c.replace(iAd.Transition.NORMALIZE_ZERO_REG_EXP,"$10");b=b.replace(iAd.Transition.NORMALIZE_ZERO_REG_EXP,"$10")}return c===b}};iAd.Transition.prototype.handleEvent=function(a){if(a.target!==this.element){return}this.completedTransitions++;if(this.completedTransitions!=this.cssProperties.length){return}this.handleTransitionComplete()};iAd.Transition.prototype.handleTransitionComplete=function(){this.dispatchNotification(iAd.Transition.DID_COMPLETE_DELEGATE,this.delegate);this.element.removeEventListener("webkitTransitionEnd",this,false);if(this.removesTargetUponCompletion){var a=this.target;if(iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)){a.removeFromSuperview()}else{a.parentNode.removeChild(a)}}else{this.restoreTransitionStyles()}if(this.revertsToOriginalValues){this.restoreBaseValues()}};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.View",superclass:iAd.Object,mixins:[iAd.EventTarget],synthesizedProperties:["id","position","size","frame","transform","anchorPoint","anchorPointZ","doubleSided","zIndex","opacity","clipsToBounds","hidden","wantsHardwareLayerBacking","transitionsEnabled","transitionsDuration","hostingLayer","userInteractionEnabled","declarativeLayerWasInitialized","eventTarget","layerIsInDocument","touchLayer","tracking","navigable","focused"],archivedProperties:["id","position","size","autoresizingMask","transform","anchorPoint","anchorPointZ","doubleSided","zIndex","opacity","clipsToBounds","hidden","wantsHardwareLayerBacking","transitionsEnabled","transitionsDuration","subviews","userInteractionEnabled","navigable","focused"],cssClassName:"ad-view",collectionAccessor:"views"});iAd.View.prototype.init=function(a){this.callSuper();if(iAd.Utils.objectIsString(a)){a=document.querySelector(a)}this.layer=a;this.superview=null;this.subviews=[];this.tracksAllTouchesOnceTouchesBegan=true;this.autoresizesSubviews=true;this.autoresizingMask=iAd.View.AUTORESIZING_NONE;this._layerIsInDocument=false;this._position=new iAd.Point();this._size=new iAd.Size();this._anchorPoint=new iAd.Point(0.5,0.5);this._anchorPointZ=0;this._doubleSided=true;this._zIndex=0;this._opacity=1;this._transform="none";this._clipsToBounds=false;this._hidden=false;this._wantsHardwareLayerBacking=false;this._transitionsEnabled=false;this._transitionsDuration=0.5;this._hostingLayer=null;this._userInteractionEnabled=false;this._touchLayer=null;this._navigable=false;this._focused=false;this._tracking=false;this.touchInside=false;this.mouseInside=false;this.gestureRecognizers=[];this.usesDeclarativeBacking=(a instanceof Element);this._declarativeLayerWasInitialized=false;if(this.usesDeclarativeBacking){if(document.body.contains(this.layer)){this._layerIsInDocument=true;this.initWithDeclarativeBacking();this.layerWasInsertedIntoDocument()}}else{this.createLayer();this.setupCSSClasses();this.layerWasCreated()}this.layer._view=this};iAd.View.MANAGED_BY_VIEW_CONTROLLER_ATTR="ad-managed-by-view-controller";iAd.View.AUTORESIZING_NONE=0;iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN=1<<0;iAd.View.AUTORESIZING_FLEXIBLE_WIDTH=1<<1;iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN=1<<2;iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN=1<<3;iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT=1<<4;iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN=1<<5;iAd.View.PROPERTY_MAPPING={opacity:"opacity",transform:"-webkit-transform",position:"-webkit-transform",anchorPoint:"-webkit-transform-origin",doubleSided:"-webkit-backface-visibility",zIndex:"z-index"};iAd.View.EVENT_ATTRIBUTE_PREFIX=iAd.Element.ATTRIBUTE_PREFIX+"on";iAd.View.LAYER_STYLE_DID_CHANGE_EVENT="viewLayerStyleDidChange";iAd.View.INSIDE_PADDING=(iAd.Device.IS_IPAD?25:70);iAd.View.TOUCH_DOWN_EVENT="viewTouchDown";iAd.View.TOUCH_DRAG_INSIDE_EVENT="viewTouchDragInside";iAd.View.TOUCH_DRAG_OUTSIDE_EVENT="viewTouchDragOutside";iAd.View.TOUCH_DRAG_ENTER_EVENT="viewTouchDragEnter";iAd.View.TOUCH_DRAG_EXIT_EVENT="viewTouchDragExit";iAd.View.TOUCH_UP_INSIDE_EVENT="viewTouchUpInside";iAd.View.TOUCH_UP_OUTSIDE_EVENT="viewTouchUpOutside";iAd.View.TOUCH_CANCEL_EVENT="viewTouchCancel";iAd.View.TOUCH_STATE_CHANGE_EVENT="viewTouchStateChange";iAd.View.FOCUS_IN_EVENT="viewFocusIn";iAd.View.FOCUS_OUT_EVENT="viewFocusOut";iAd.View.ACTIVATE_EVENT="viewActivate";iAd.View.synthesizedEvents=[iAd.View.TOUCH_DOWN_EVENT,iAd.View.TOUCH_DRAG_INSIDE_EVENT,iAd.View.TOUCH_DRAG_OUTSIDE_EVENT,iAd.View.TOUCH_DRAG_ENTER_EVENT,iAd.View.TOUCH_DRAG_EXIT_EVENT,iAd.View.TOUCH_UP_INSIDE_EVENT,iAd.View.TOUCH_UP_OUTSIDE_EVENT,iAd.View.TOUCH_CANCEL_EVENT,iAd.View.TOUCH_STATE_CHANGE_EVENT];iAd.View.dispatchesStyleChangeEvents=false;iAd.View.FOCUSED_CSS_CLASS="ad-focused";iAd.View.prototype.createLayer=function(){this.layer=document.createElement("div")};iAd.View.prototype.initWithDeclarativeBacking=function(){this.setupLayer();this.layerWasCreated();this.setupCSSClasses();this.readPropertiesFromLayerComputedStyle(window.getComputedStyle(this.layer));this.readPropertiesFromLayerAttributes(this.getCustomLayerAttributes());this.declarativeLayerWasInitialized=true};iAd.View.prototype.setupLayer=function(){this.lookupViewLayersInLayer(this.hostingLayer);if(this.layer.hasClassName(iAd.SpatialNavigationManager.NAVIGABLE_CSS_CLASS)){this.navigable=true}};iAd.View.prototype.lookupViewLayersInLayer=function(c){var d=c.firstElementChild;while(d){if(!d.hasOwnProperty("_view")){var b=iAd.View.viewClassForLayer(d);if(b){var a=new b(d);a._indexInSuperviewSubviews=this.subviews.push(a)-1;a.willMoveToSuperview(this);a.superview=this;a.didMoveToSuperview()}else{this.lookupViewLayersInLayer(d)}}d=d.nextElementSibling}};iAd.View.prototype.setupCSSClasses=function(){var a=this.constructor,b;while(a.superclass){b=a.cssClassName;if(b){this.layer.addClassName(b)}if(a===iAd.View){break}a=a.superclass}};iAd.View.prototype.readPropertiesFromLayerComputedStyle=function(b){this._size.width=parseInt(b.width,10)||0;this._size.height=parseInt(b.height,10)||0;this._position.x=parseInt(b.left,10)||0;this._position.y=parseInt(b.top,10)||0;this._zIndex=parseInt(b.zIndex,10)||0;this._clipsToBounds=(b.overflow=="hidden");this._doubleSided=(b.webkitBackfaceVisibility=="visible");this._transform=b.webkitTransform;this._hidden=(b.visibility=="hidden");this._opacity=parseFloat(b.opacity);var a=iAd.CSS.matrixFromString(this._transform);var c=new WebKitCSSMatrix();if(!iAd.CSS.matrixEqualsToMatrix(a,c)){this._position.x+=a.m41;this._position.y+=a.m42;a=a.translate(a.m41*-1,a.m42*-1,0);this._transform=a.toString()}if(this._transform!="none"){this._wantsHardwareLayerBacking=true}};iAd.View.prototype.readPropertiesFromLayerAttributes=function(b){if(iAd.ViewController!=null&&b.hasOwnProperty(iAd.View.MANAGED_BY_VIEW_CONTROLLER_ATTR)){this.createManagingViewController()}var c,e,d;var a=this.constructor.synthesizedEventMap;for(c in b){d=b[c];e=a[c.toLowerCase()];if(e){this.addEventListener(e,iAd.Event.eventHandlerForString(d),false)}else{this.setValueForAttribute(d,c)}}};iAd.View.prototype.createManagingViewController=function(){new iAd.ViewController({id:this.layer.hasAttribute("id")?this.layer.getAttribute("id"):"",properties:{view:this}})};iAd.View.prototype.setValueForAttribute=function(c,b){var a=this.propertyNameForAttribute(b);switch(typeof(this[a])){case"string":this[a]=c;break;case"number":this[a]=parseFloat(c);break;case"boolean":this[a]=!(c=="false");break;default:this[a]=c}};iAd.View.prototype.propertyNameForAttribute=function(a){return iAd.String.dashedStringToCamelCase(a.substr(iAd.Element.ATTRIBUTE_PREFIX.length))};iAd.View.prototype.attributeNameForProperty=function(a){return iAd.Element.ATTRIBUTE_PREFIX+iAd.String.camelCaseStringToDashed(a)};iAd.View.prototype.getCustomLayerAttributes=function(){var a={};var d=iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX+iAd.Element.ATTRIBUTE_PREFIX;var g=this.layer.attributes;var f,b;for(var c=0,e=g.length;c<e;c++){f=g.item(c);b=f.name;if(b.indexOf(d)==0){a[b.substr(iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX.length)]=f.value}else{if(b.indexOf(iAd.Element.ATTRIBUTE_PREFIX)==0){a[b]=f.value}}}this.customLayerAttributes=a;return a};iAd.View.prototype.layerHasCustomAttribute=function(a){if(this.customLayerAttributes){return this.customLayerAttributes.hasOwnProperty(a)}return iAd.Element.hasCustomAttribute(this.layer,a)};iAd.View.prototype.getLayerCustomAttributeValue=function(a){if(this.customLayerAttributes){return this.customLayerAttributes[a]||null}else{return iAd.Element.getCustomAttribute(this.layer,a)}};iAd.View.prototype.setLayerStyle=function(a){for(var b in a){this.layer.style.setProperty(b,a[b])}if(iAd.View.dispatchesStyleChangeEvents){this.createAndDispatchEvent(iAd.View.LAYER_STYLE_DID_CHANGE_EVENT,[["changedProperties",a]])}};iAd.View.prototype.toString=function(){return[this.constructor.displayName,"[",this._size.width,"x",this._size.height,"@",this._position.x,",",this._position.y,"]"].join("")};iAd.View.prototype.getId=function(){return this.layer.id};iAd.View.prototype.setId=function(a){this.layer.id=a};iAd.View.prototype.setPosition=function(a){if(!a||this._position.equals(a)){return}this._position=a;this.updatePositionAndTransform()};iAd.View.prototype.setSize=function(a){if(!a||this._size.equals(a)){return}var b=this._size.copy();this._size=a;this.setLayerStyle({width:a.width+"px",height:a.height+"px"});if(this.autoresizesSubviews){this.resizeSubviewsWithOldSize(b)}};iAd.View.prototype.getFrame=function(){return new iAd.Rect(this.position.x,this.position.y,this.size.width,this.size.height)};iAd.View.prototype.setFrame=function(a){this.position=a.origin;this.size=a.size};iAd.View.prototype.setTransform=function(a){this._transform=a;this.updatePositionAndTransform()};iAd.View.prototype.setAnchorPoint=function(a){if(!a){return}this._anchorPoint=a;this.updateLayerTransformOrigin()};iAd.View.prototype.setAnchorPointZ=function(a){this._anchorPointZ=a;this.updateLayerTransformOrigin()};iAd.View.prototype.updateLayerTransformOrigin=function(){this.setLayerStyle({"-webkit-transform-origin":Math.round(this._anchorPoint.x*100)+"% "+Math.round(this._anchorPoint.y*100)+"% "+this._anchorPointZ+"px"})};iAd.View.prototype.setDoubleSided=function(a){this._doubleSided=a;this.setLayerStyle({"-webkit-backface-visibility":a?"visible":"hidden"})};iAd.View.prototype.setZIndex=function(a){this._zIndex=a;this.setLayerStyle({"z-index":a})};iAd.View.prototype.setHidden=function(a){this._hidden=a;this.setLayerStyle({visibility:(a?"hidden":"visible")})};iAd.View.prototype.updatePositionAndTransform=function(){if(this._wantsHardwareLayerBacking||this._transitionsEnabled){this.setLayerStyle({left:"0",top:"0","-webkit-transform":iAd.CSS.concatenateTransforms(iAd.CSS.tm(iAd.CSS.roundedPxValue(this._position.x),iAd.CSS.roundedPxValue(this._position.y)),this._transform)})}else{this.setLayerStyle({left:this._position.x+"px",top:this._position.y+"px","-webkit-transform":this._transform})}};iAd.View.prototype.setOpacity=function(a){this._opacity=a;this.setLayerStyle({opacity:a})};iAd.View.prototype.setTransitionsEnabled=function(a){this.setLayerStyle({"-webkit-transition-duration":a?this._transitionsDuration+"s":"0s"});this._transitionsEnabled=a;this.updatePositionAndTransform()};iAd.View.prototype.setWantsHardwareLayerBacking=function(a){if(this._wantsHardwareLayerBacking==a){return}this._wantsHardwareLayerBacking=a;this.updatePositionAndTransform()};iAd.View.prototype.setTransitionsDuration=function(a){this.setLayerStyle({"-webkit-transition-duration":a+"s"});this._transitionsDuration=a};iAd.View.prototype.setClipsToBounds=function(a){this._clipsToBounds=a;this.setLayerStyle({overflow:a?"hidden":"visible"})};iAd.View.prototype.getTouchLayer=function(){return this._touchLayer||this.layer};iAd.View.prototype.getHostingLayer=function(){return(this._hostingLayer!=null)?this._hostingLayer:this.layer};iAd.View.prototype.addSubview=function(a){return this.insertSubviewAtIndex(a,this.subviews.length)};iAd.View.prototype.removeFromSuperview=function(){if(this.superview==null){return}this.willMoveToSuperview(null);this.superview.removeSubview(this);this.layer.parentNode.removeChild(this.layer);this.superview=null;this.didMoveToSuperview();this.dispatchNotificationOfLayerRemovalFromDocument()};iAd.View.prototype.removeSubview=function(e){if(e.superview!=this){return}this.willRemoveSubview(e);var d=this.subviews;var a=e._indexInSuperviewSubviews;d.splice(a,1);for(var b=a,c=d.length;b<c;b++){d[b]._indexInSuperviewSubviews=b}};iAd.View.prototype.insertSubviewAtIndex=function(h,g){var k=this.subviews;if(g>k.length){return}var b=h.superview;var a;if(b==this){a=h._indexInSuperviewSubviews;if(g===a){return}k.splice(a,1);if(g>a){g--}}else{if(b){b.removeSubview(h)}h.willMoveToSuperview(this)}k.splice(g,0,h);h._indexInSuperviewSubviews=g;var j=(a!=null&&a<g)?a:g+1;for(var d=j,f=k.length;d<f;d++){k[d]._indexInSuperviewSubviews=d}var c=k[g+1];if(c){var e=c.layer;while(e.hasClassName("iap-wrapped")){e=e.parentNode}this.hostingLayer.insertBefore(h.layer,e)}else{this.hostingLayer.appendChild(h.layer)}if(b!=this){h.superview=this;h.didMoveToSuperview()}this.didAddSubview(h);if(this._layerIsInDocument&&!h._layerIsInDocument){h.dispatchNotificationOfLayerInsertionIntoDocument()}return h};iAd.View.prototype.insertSubviewAfterSubview=function(b,a){if(a.superview!==this){return}var c=a._indexInSuperviewSubviews+1;if(c<this.subviews.length){this.insertSubviewAtIndex(b,c)}else{this.addSubview(b)}return b};iAd.View.prototype.insertSubviewBeforeSubview=function(b,a){if(a.superview!==this){return}return this.insertSubviewAtIndex(b,a._indexInSuperviewSubviews)};iAd.View.prototype.exchangeSubviewsAtIndices=function(b,a){if(b>=this.subviews.length||a>=this.subviews.length){return}var d=this.subviews[b];var g=this.subviews[a];this.subviews[b]=g;this.subviews[a]=d;d._indexInSuperviewSubviews=a;g._indexInSuperviewSubviews=b;var h=d.layer;var f=g.layer;var i=this.hostingLayer;var e=h.nextSibling;var c=f.nextSibling;if(e!=null){i.insertBefore(f,e)}else{i.appendChild(f)}if(c!=null){i.insertBefore(h,c)}else{i.appendChild(h)}};iAd.View.prototype.isDescendantOfView=function(b){var c=false;var a=this;while(a.superview!=null){if(a.superview===b){c=true;break}a=a.superview}return c};iAd.View.prototype.layerWasCreated=function(){};iAd.View.prototype.willMoveToSuperview=function(a){};iAd.View.prototype.didMoveToSuperview=function(){};iAd.View.prototype.didAddSubview=function(a){};iAd.View.prototype.willRemoveSubview=function(a){};iAd.View.prototype.layerWasInsertedIntoDocument=function(){if(this.usesDeclarativeBacking){if(!this.declarativeLayerWasInitialized){this.initWithDeclarativeBacking()}else{var a=window.getComputedStyle(this.layer);if(isNaN(this._size.width)){this._size.width=parseInt(a.width,10);this._size.height=parseInt(a.height,10)}if(isNaN(this._position.x)){this._position.x=parseInt(a.left,10);this._position.y=parseInt(a.top,10)}}}this.layerIsInDocument=true};iAd.View.prototype.layerWasRemovedFromDocument=function(){this.layerIsInDocument=false};iAd.View.prototype.dispatchNotificationOfLayerInsertionIntoDocument=function(){var c=this.subviews;for(var a=0,b=c.length;a<b;a++){c[a].dispatchNotificationOfLayerInsertionIntoDocument()}this.layerWasInsertedIntoDocument()};iAd.View.prototype.dispatchNotificationOfLayerRemovalFromDocument=function(){var c=this.subviews;for(var a=0,b=c.length;a<b;a++){c[a].dispatchNotificationOfLayerRemovalFromDocument()}this.layerWasRemovedFromDocument()};iAd.View.prototype.setUserInteractionEnabled=function(a){if(this._userInteractionEnabled==a){return}var c=Element.prototype[a?"addEventListener":"removeEventListener"];c.call(this.touchLayer,iAd.Event.START_EVENT,this,false);if(!iAd.Event.SUPPORTS_TOUCHES){var b=this.layer;c.call(b,"mouseover",this,false);c.call(b,"mouseout",this,false)}this._userInteractionEnabled=a};iAd.View.prototype.handleEvent=function(a){switch(a.type){case iAd.Event.START_EVENT:this.touchesBegan(a);break;case iAd.Event.MOVE_EVENT:this.touchesMoved(a);break;case iAd.Event.END_EVENT:this.touchesEnded(a);break;case iAd.Event.CANCEL_EVENT:this.touchesCancelled(a);break;case"mouseover":this.handleMouseover(a);break;case"mouseout":this.handleMouseout(a);break;case iAd.SpatialNavigationManager.ACTIVATE_EVENT:this.handleSNMActivate(a);break;case iAd.SpatialNavigationManager.FOCUS_IN_EVENT:this.handleSNMFocusIn(a);break;case iAd.SpatialNavigationManager.FOCUS_OUT_EVENT:this.handleSNMFocusOut(a);break}};iAd.View.prototype.handleSNMActivate=function(a){this.createAndDispatchEvent(iAd.View.ACTIVATE_EVENT,[["originalEvent",a]])};iAd.View.prototype.handleSNMFocusIn=function(a){this.focused=true};iAd.View.prototype.handleSNMFocusOut=function(a){if(this.mouseInside){this.layer.addClassName(iAd.View.FOCUSED_CSS_CLASS);return}this.focused=false};iAd.View.prototype.touchesBegan=function(a){if(this.tracksAllTouchesOnceTouchesBegan){window.addEventListener(iAd.Event.MOVE_EVENT,this,true);window.addEventListener(iAd.Event.END_EVENT,this,true);window.addEventListener(iAd.Event.CANCEL_EVENT,this,true)}a.preventDefault();this.tracking=true;this.touchInside=true;this.dispatchEvent(this.createUIEvent(iAd.View.TOUCH_DOWN_EVENT,a));this.createAndDispatchEvent(iAd.View.TOUCH_STATE_CHANGE_EVENT);this.lastProcessedEvent=a};iAd.View.prototype.touchesMoved=function(b){if(this.shouldPreventEventDefault(b)){b.preventDefault()}var a=this.pointInsidePaddedBounds(iAd.Point.fromEventInElement(b,this.layer));var c=a?iAd.View.TOUCH_DRAG_INSIDE_EVENT:iAd.View.TOUCH_DRAG_OUTSIDE_EVENT;if(a!=this.touchInside){this.touchInside=a;c=a?iAd.View.TOUCH_DRAG_ENTER_EVENT:iAd.View.TOUCH_DRAG_EXIT_EVENT;this.createAndDispatchEvent(iAd.View.TOUCH_STATE_CHANGE_EVENT)}this.dispatchEvent(this.createUIEvent(c,b));this.lastProcessedEvent=b};iAd.View.prototype.shouldPreventEventDefault=function(a){return true};iAd.View.prototype.touchesEnded=function(b){window.removeEventListener(iAd.Event.MOVE_EVENT,this,true);window.removeEventListener(iAd.Event.END_EVENT,this,true);window.removeEventListener(iAd.Event.CANCEL_EVENT,this,true);this.tracking=false;var a=this.touchInside?iAd.View.TOUCH_UP_INSIDE_EVENT:iAd.View.TOUCH_UP_OUTSIDE_EVENT;this.dispatchEvent(this.createUIEvent(a,this.lastProcessedEvent));if(this.touchInside){this.createAndDispatchEvent(iAd.View.ACTIVATE_EVENT,[["originalEvent",b]])}this.touchInside=false;this.createAndDispatchEvent(iAd.View.TOUCH_STATE_CHANGE_EVENT)};iAd.View.prototype.touchesCancelled=function(a){window.removeEventListener(iAd.Event.MOVE_EVENT,this,true);window.removeEventListener(iAd.Event.END_EVENT,this,true);window.removeEventListener(iAd.Event.CANCEL_EVENT,this,true);this.tracking=false;this.touchInside=false;this.dispatchEvent(this.createUIEvent(iAd.View.TOUCH_CANCEL_EVENT,a))};iAd.View.prototype.handleMouseover=function(a){if(a.target===a.currentTarget){this.mouseEntered(a)}};iAd.View.prototype.handleMouseout=function(a){if(a.target===a.currentTarget&&!this.pointInside(iAd.Point.fromEventInElement(a,this.layer))){this.mouseExited(a)}};iAd.View.prototype.mouseEntered=function(a){this.mouseInside=true;this.focused=true};iAd.View.prototype.mouseExited=function(a){this.mouseInside=false;if(iAd.SpatialNavigationManager.sharedManager.focusedElement===this.layer){return}this.focused=false};iAd.View.prototype.createUIEvent=function(b,c){var a=iAd.Event.createUIEvent(b,c);if(!a.ad){a.ad={}}a.ad.sender=this;return a};iAd.View.prototype.pointInsidePaddedBounds=function(a){var b=iAd.View.INSIDE_PADDING;return(a.x>=-b&&a.x<this.size.width+b&&a.y>=-b&&a.y<this.size.height+b)};iAd.View.prototype.pointInside=function(a){return(a.x>=0&&a.x<this.size.width&&a.y>=0&&a.y<this.size.height)};iAd.View.prototype.resizeSubviewsWithOldSize=function(c){for(var a=0,b=this.subviews.length;a<b;a++){this.subviews[a].resizeWithOldSuperviewSize(c)}};iAd.View.prototype.resizeWithOldSuperviewSize=function(f){var a=this._position.copy();var e=this._size.copy();var c=this.autoresizingMask;if(f.width!=0||e.width==0){var d=(c&iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN)+(c&iAd.View.AUTORESIZING_FLEXIBLE_WIDTH)+(c&iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN);var h;switch(d){case iAd.View.AUTORESIZING_NONE:break;case iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN:a.x+=this.superview._size.width-f.width;break;case iAd.View.AUTORESIZING_FLEXIBLE_WIDTH:e.width=this.superview._size.width-(f.width-this._size.width);break;case iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_WIDTH:h=(f.width-this._size.width-this._position.x);a.x=(this._position.x/(f.width-h))*(this.superview._size.width-h);e.width=this.superview._size.width-a.x-h;break;case iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN:break;case iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN:h=(f.width-this._size.width-this._position.x);a.x+=(this.superview._size.width-f.width)*(this.position.x/(this.position.x+h));break;case iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_WIDTH:h=(f.width-this._size.width-this._position.x);scaled_right_margin=(h/(f.width-this._position.x))*(this.superview._size.width-this._position.x);e.width=this.superview._size.width-a.x-scaled_right_margin;break;case iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN:a.x=(this._position.x/f.width)*this.superview._size.width;e.width=(this._size.width/f.width)*this.superview._size.width;break}}if(f.height!=0||e.height==0){var b=(c&iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN)+(c&iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT)+(c&iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN);var g;switch(b){case iAd.View.AUTORESIZING_NONE:break;case iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN:a.y+=this.superview._size.height-f.height;break;case iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT:e.height=this.superview._size.height-(f.height-this._size.height);break;case iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT:g=(f.height-this._size.height-this._position.y);a.y=(this._position.y/(f.height-g))*(this.superview._size.height-g);e.height=this.superview._size.height-a.y-g;break;case iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN:break;case iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN:g=(f.height-this._size.height-this._position.y);a.y+=(this.superview._size.height-f.height)*(this.position.y/(this.position.y+g));break;case iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT:g=(f.height-this._size.height-this._position.y);scaled_bottom_margin=(g/(f.height-this._position.y))*(this.superview._size.height-this._position.y);e.height=this.superview._size.height-a.y-scaled_bottom_margin;break;case iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT|iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN:a.y=(this._position.y/f.height)*this.superview._size.height;e.height=(this._size.height/f.height)*this.superview._size.height;break}}this.position=a;this.size=e};iAd.View.prototype.cssPropertyNameForJSProperty=function(a){return iAd.View.PROPERTY_MAPPING[a]};iAd.View.prototype.applyTransition=function(a,c){if(a==null){return null}var b=new iAd.Transition(a,c);b.target=this;b.start();return b};iAd.View.prototype.descendantViewsOfClass=function(a){return iAd.View.viewsForClassAndNode(a,this.layer)};iAd.View.prototype.getEventTarget=function(){return this.layer};iAd.View.prototype.addGestureRecognizer=function(a){if(this.gestureRecognizers.indexOf(a)!=-1){return}if(a.view!=null&&a.view!==this){a.view.removeGestureRecognizer(a)}this.gestureRecognizers.push(a);a.view=this};iAd.View.prototype.removeGestureRecognizer=function(a){if(iAd.Array.removeObjectFromArray(a,this.gestureRecognizers)){a.view=null}};iAd.View.prototype.convertRectToView=function(d,a){var c=this.convertPointToView(d.origin,a);var b=this.convertPointToView(new iAd.Point(d.maxX(),d.maxY()),a);return new iAd.Rect(c.x,c.y,b.x-c.x,b.y-c.y)};iAd.View.prototype.convertRectFromView=function(b,a){return a.convertRectToView(b,this)};iAd.View.prototype.convertPointToView=function(b,a){var c=window.webkitConvertPointFromNodeToPage(this.layer,new WebKitPoint(b.x,b.y));var d=window.webkitConvertPointFromPageToNode(a.layer,c);return new iAd.Point(d.x,d.y)};iAd.View.prototype.convertPointFromView=function(a,b){return b.convertPointToView(a,this)};iAd.View.prototype.restoreProperty=function(d,c){switch(d){case"subviews":for(var a=0,b=c.length;a<b;a++){this.addSubview(c[a])}break;default:this.callSuper(d,c)}};iAd.View.prototype.setNavigable=function(b){if(this._navigable==b){return}this._navigable=b;var a=(b?"add":"remove");var c=this.layer;c.toggleClassName(iAd.SpatialNavigationManager.NAVIGABLE_CSS_CLASS,b);if(this.layerIsInDocument){iAd.SpatialNavigationManager.sharedManager[a+"NavigableElement"](c)}var d=a+"EventListener";c[d].call(c,iAd.SpatialNavigationManager.ACTIVATE_EVENT,this,false);c[d].call(c,iAd.SpatialNavigationManager.FOCUS_IN_EVENT,this,false);c[d].call(c,iAd.SpatialNavigationManager.FOCUS_OUT_EVENT,this,false)};iAd.View.prototype.setFocused=function(c){if(c==this._focused){return}this._focused=c;var b=this.layer;b.toggleClassName(iAd.View.FOCUSED_CSS_CLASS,c);if(!c){var a=iAd.SpatialNavigationManager.sharedManager;if(a.focusedElement===b){a.focusElement(null)}}this.createAndDispatchEvent(c?iAd.View.FOCUS_IN_EVENT:iAd.View.FOCUS_OUT_EVENT)};iAd.View.getViewById=function(b){var a=document.getElementById(b);return(a&&a._view!=undefined)?a._view:null};iAd.View.registeredHTMLViewLoadingClasses={};iAd.View.registerClassForHTMLViewLoading=function(a){iAd.View.registeredHTMLViewLoadingClasses[a.cssClassName]=a};iAd.View.viewClassForLayer=function(d){var f=this.registeredHTMLViewLoadingClasses;var c=d.className.trim().split(/\s+/);for(var b=0,e=c.length;b<e;b++){var a=f.hasOwnProperty(c[b])?f[c[b]]:null;if(a){return a}}return null};iAd.View.viewForLayer=function(b){var a=iAd.View.viewClassForLayer(b)||iAd.View;return new a(b)};iAd.View.viewsForClassAndNode=function(f,a){var e=[];if(!f.hasOwnProperty("cssClassName")){return e}var d=a.querySelectorAll("."+f.cssClassName);for(var b=0,c=d.length;b<c;b++){e.push(d[b]._view)}return e};iAd.View.nearestViewForElement=function(a){while(a._view==undefined&&a.parentNode){a=a.parentNode}return(a._view==undefined)?null:a._view};iAd.Utils.setupDisplayNames(Node,"Node");iAd.View.initialize=function(){var g=this;if(this.hasOwnProperty("cssClassName")){Object.defineProperty(this,"views",{get:function(){return iAd.View.viewsForClassAndNode(g,document)}});iAd.View.registerClassForHTMLViewLoading(this);if(g.hasOwnProperty("collectionAccessor")){if(Object.getOwnPropertyDescriptor(iAd.View.prototype,this.collectionAccessor)){iAd.Console.warn("The class "+this._name+' has a .collectionAccessor "'+this.collectionAccessor+'" in conflict with another iAd.View subclass, this collection accessor will be ignored.')}else{Object.defineProperty(iAd.View.prototype,this.collectionAccessor,{get:function(){return this.descendantViewsOfClass(g)}})}}}if(!this.hasOwnProperty("synthesizedEventMap")){this.synthesizedEventMap={}}var e=this;while(e){if(e.hasOwnProperty("synthesizedEvents")){var d=e.synthesizedEvents;for(var b=0,c=d.length;b<c;b++){var f=d[b],a=iAd.View.EVENT_ATTRIBUTE_PREFIX+f.toLowerCase();this.synthesizedEventMap[a]=f}}e=e.superclass}};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

window.addEventListener("DOMContentLoaded",function(){iAd.View.INSIDE_PADDING=(!iAP.Context.IS_IOS&&iAP.Context.projectIsOfType("iTunesProject"))?0:iAd.View.INSIDE_PADDING});iAd.View.prototype.handleMouseover=function(a){if(!this.mouseInside&&this.layer.webkitMatchesSelector(":hover")){this.mouseEntered(a)}};iAd.View.prototype.handleMouseout=function(a){if(this.mouseInside&&!this.layer.webkitMatchesSelector(":hover")){this.mouseExited(a)}};iAd.View.prototype.setHidden=function(a){this._hidden=a;this.setLayerStyle({visibility:(a?"hidden":"inherit")})};iAd.Class.synthesizeProperty(iAd.View.prototype,"renderedFrame");iAd.View.archivedProperties.push("renderedFrame");iAd.View.prototype.forceRedraw=function(){var a=this.layer.style.display;this.layer.style.display="none";this.layer.offsetHeight;this.layer.style.display=a};iAd.View.prototype.getRenderedFrame=function(){var a=document.defaultView.getComputedStyle(this.layer);var b=iAd.CSS.matrixFromString(a.webkitTransform);var c=new iAd.Rect(parseInt(a.left,10)+b.m41,parseInt(a.top,10)+b.m42,parseInt(a.width,10),parseInt(a.height,10));return c};iAd.View.prototype.viewDidAppear=function(){var c=this.subviews;for(var a=0,b=c.length;a<b;a++){c[a].viewDidAppear()}};(function(){iAd.Class.processMethod(iAd.View,"setTransitionsEnabled");iAd.Class.processMethod(iAd.View,"setWantsHardwareLayerBacking");iAd.Class.processMethod(iAd.View,"updateLayerTransformOrigin");var a=iAd.View.prototype.setTransitionsEnabled;var c=iAd.View.prototype.setWantsHardwareLayerBacking;var b=iAd.View.prototype.updateLayerTransformOrigin;iAd.View.prototype.setTransitionsEnabled=function(d){var e=(this._transitionsEnabled!=d);a.call(this,d);if(e){this.forceRedraw()}};iAd.View.prototype.setWantsHardwareLayerBacking=function(e){var d=(this._wantsHardwareLayerBacking!=e);c.call(this,e);if(d){this.forceRedraw()}};iAd.View.prototype.updateLayerTransformOrigin=function(){var e=this.layer.style.webkitTransformStyle;var d=this;this.layer.style.webkitTransformStyle="flat";b.call(this);setTimeout(function(){d.layer.style.webkitTransformStyle=e},0)}})();(function(){iAd.Class.processMethod(iAd.View,"getCustomLayerAttributes");var a=iAd.View.prototype.getCustomLayerAttributes;iAd.View.prototype.getCustomLayerAttributes=function(){var c=a.apply(this,arguments);if(iAd.Device.HAS_4_INCH_DISPLAY){var b=[];var k="-for-ad-normal-4-inch";for(var e in c){if(e.indexOf(k)>-1){b.push(e)}}for(var d=0,f=b.length;d<f;d++){var j=b[d];var g=j.slice(0,k.length*-1);var h=c[j];c[g]=h;delete c[j]}}return c}})();iAd.View.prototype.renderedQuad=function(){var b=iAd.RootView.sharedRoot.layer,g=this.layer.offsetWidth,a=this.layer.offsetHeight,f=webkitConvertPointFromPageToNode(b,webkitConvertPointFromNodeToPage(this.layer,new WebKitPoint(0,0))),e=webkitConvertPointFromPageToNode(b,webkitConvertPointFromNodeToPage(this.layer,new WebKitPoint(g,0))),c=webkitConvertPointFromPageToNode(b,webkitConvertPointFromNodeToPage(this.layer,new WebKitPoint(0,a))),d=webkitConvertPointFromPageToNode(b,webkitConvertPointFromNodeToPage(this.layer,new WebKitPoint(g,a)));return[f,e,d,c]};iAd.View.prototype.renderedContentQuad=function(){return this.renderedQuad()};iAd.Class.synthesizeProperty(iAd.View.prototype,"renderedFrameOnPage");iAd.View.archivedProperties.push("renderedFrameOnPage");iAd.View.prototype.getRenderedFrameOnPage=function(){var c=this.renderedQuad();var d=c.map(function(h){return h.x});var g=c.map(function(h){return h.y});var b=Math.min.apply(Math,d);var a=Math.min.apply(Math,g);var f=Math.max.apply(Math,d);var e=Math.max.apply(Math,g);return new iAd.Rect(b,a,f-b,e-a)};iAd.View.viewClassForLayer=function(d){var f=this.registeredHTMLViewLoadingClasses;var c=d.className?d.className.trim().split(/\s+/):[];for(var b=0,e=c.length;b<e;b++){var a=f.hasOwnProperty(c[b])?f[c[b]]:null;if(a){return a}}return null};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ImageView",superclass:iAd.View,synthesizedProperties:["autoSized","image","highlightedImage","highlighted"],archivedProperties:["autoSized","image","highlightedImage","highlighted"],cssClassName:"ad-image-view",collectionAccessor:"imageViews"});iAd.ImageView.prototype.init=function(a){this._autoSized=true;this._highlighted=false;this._image=null;this._highlightedImage=null;this.callSuper(a);this.addEventListener(iAd.View.TOUCH_DOWN_EVENT,this,false);this.addEventListener(iAd.View.TOUCH_DRAG_ENTER_EVENT,this,false);this.addEventListener(iAd.View.TOUCH_DRAG_EXIT_EVENT,this,false);this.addEventListener(iAd.View.ACTIVATE_EVENT,this,false);this.addEventListener(iAd.View.TOUCH_CANCEL_EVENT,this,false)};iAd.ImageView.prototype.layerWasCreated=function(){this._img=this.layer.appendChild(document.createElement("img"))};iAd.ImageView.prototype.setValueForAttribute=function(b,a){switch(a){case"ad-image":this.image=iAd.Image.imageForURL(b,this.layerHasCustomAttribute("ad-has-hidpi-version"));break;case"ad-highlighted-image":this.highlightedImage=iAd.Image.imageForURL(b,this.layerHasCustomAttribute("ad-has-hidpi-version"));break;default:this.callSuper(b,a)}};iAd.ImageView.prototype.setImage=function(a){this._image=a;this.syncImageToCurrentState()};iAd.ImageView.prototype.setHighlightedImage=function(a){this.userInteractionEnabled=(a!=null);this._highlightedImage=a;this.syncImageToCurrentState()};iAd.ImageView.prototype.setHighlighted=function(a){if(a==this._highlighted){return}this._highlighted=a;this.syncImageToCurrentState()};iAd.ImageView.prototype.setAutoSized=function(a){if(this._autoSized==a){return}this._autoSized=a;this.syncImageToCurrentState()};iAd.ImageView.prototype.syncImageToCurrentState=function(){var a=(this.highlighted&&this.highlightedImage)?this.highlightedImage:this.image;if(!a){this._img.src="";this._img.style.removeProperty("visibility");return}if(!a.loaded){a.addPropertyObserver("loaded",this,"syncImageToCurrentState");return}this._img.style.visibility="visible";this._img.src=a.element.src;if(this._autoSized){this.size=new iAd.Size(a.width,a.height)}if(iAd.ImageEffects&&this._effect){this._effect.inputImage=this._img;this._effect.render()}};iAd.ImageView.prototype.handleEvent=function(a){this.callSuper(a);switch(a.type){case iAd.View.TOUCH_DOWN_EVENT:case iAd.View.TOUCH_DRAG_ENTER_EVENT:this.highlighted=true;break;case iAd.View.TOUCH_DRAG_EXIT_EVENT:case iAd.View.ACTIVATE_EVENT:case iAd.View.TOUCH_CANCEL_EVENT:this.highlighted=false;break}};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Utils.replaceMethod(iAd.ImageView,"init",function(){this._usesBackgroundImage=false;this.callOriginal.apply(this,arguments)});iAd.ImageView.prototype.setHidden=function(a){this.callSuper(a);this.syncImageToCurrentState()};iAd.ImageView.prototype.layerWasInsertedIntoDocument=function(){this.callSuper();if(this.usesBackgroundImage||iAd.ImageView.usesBackgroundImage){return}this.callMethodNameAfterDelay("syncImageToCurrentState",0)};(function(){iAd.ImageView.prototype.setUsesBackgroundImage=function(b){if(this._usesBackgroundImage==b){return}this._usesBackgroundImage=b;this.syncImageToCurrentState()};iAd.ImageView.prototype.setImagePosition=function(b){if(this._imagePosition==b){return}this._imagePosition=b;this.syncImageToCurrentState()};iAd.ImageView.prototype.setImageSize=function(b){if(this._imageSize==b){return}this._imageSize=b;this.syncImageToCurrentState()};iAd.ImageView.prototype.setImageRepeat=function(b){if(this._imageRepeat==b){return}this._imageRepeat=b;this.syncImageToCurrentState()};iAd.ImageView.prototype.setSize=function(b){if(this._size.equals(b)){return}this.callSuper(b);if(!this._usingFallback){this.syncImageToCurrentState()}};iAd.ImageView.prototype.clearBackgroundProperties=function(){this.layer.style.backgroundImage="";this.layer.style.backgroundPosition="";this.layer.style.backgroundRepeat="";this.layer.style.backgroundSize="";this._backgroundImageSrc=null};iAd.Class.processMethod(iAd.ImageView,"syncImageToCurrentState");var a=iAd.ImageView.prototype.syncImageToCurrentState;iAd.ImageView.prototype.syncImageToCurrentState=function(){a.apply(this,arguments);var n=(this.highlighted&&this.highlightedImage)?this.highlightedImage:this.image;if(!n){this.clearBackgroundProperties();this.layer.addClassName("ad-placeholder-background");return}else{if(n.loaded){this._img.style.visibility="inherit"}}this.layer.removeClassName("ad-placeholder-background");if(!this._imagePosition||!this._imageSize){return}if(!this._imageRepeat){this._imageRepeat="no-repeat"}if(this.needsToFallback()){this._img.style.display="none";this.layer.style.backgroundImage="url("+n.element.src+")";this._backgroundImageSrc=n.element.src;this.layer.style.backgroundSize=this._imageSize;this.layer.style.backgroundPosition=this._imagePosition;this.layer.style.backgroundRepeat=this._imageRepeat;this._usingFallback=true}else{if(this._img.style.display=="none"){this._img.style.display="block";this.clearBackgroundProperties()}var i=this._imageSize,g=this._img;if(i=="contain"||i=="cover"){var c=window.getComputedStyle(this.layer),k=this.widthFromComputedStyle(c),o=this.heightFromComputedStyle(c),p=n.width,b=n.height,d=k/p,j=o/b,f=(i=="contain"?Math.min(d,j):Math.max(d,j)),e=Math.max(1,p*f),l=Math.max(1,b*f);g.style.width=e+"px";g.style.height=l+"px"}else{var h=i.split(" ");if(h.length>=1){g.style.width=h[0];g.style.height=h[1]||h[0]}}var m=this._imagePosition.split(" ");if(m[0]=="left"||m[0]=="center"||m[0]=="right"||m[1]=="top"||m[1]=="center"||m[1]=="bottom"){this.layer.addClassName("ad-uses-flex-box");if(!this._positionMap){this._positionMap={left:"start",right:"end",top:"start",bottom:"end",center:"center"}}this.layer.style.webkitBoxPack=this._positionMap[m[0]];this.layer.style.webkitBoxAlign=this._positionMap[m[1]]}else{this.layer.removeClassName("ad-uses-flex-box");g.style.left=m[0];g.style.top=m[1]}this._usingFallback=false}};iAd.ImageView.needsToFallbackMatch=/(center|right|bottom)/;iAd.ImageView.prototype.needsToFallback=function(){if(this.usesBackgroundImage||iAd.ImageView.usesBackgroundImage){return true}if(this._imageRepeat!="no-repeat"){return true}var b=this._imageSize;if(b=="contain"||b=="100% 100%"){return false}if(this._imagePosition.match(iAd.ImageView.needsToFallbackMatch)){var c=this.getSizeData();if(b=="cover"){if(Math.abs(c.viewWidth/c.viewHeight-c.imageWidth/c.imageHeight)>0.01){return true}}else{if(c.imageWidth>c.viewWidth||c.imageHeight>c.viewHeight){return true}}}return false};iAd.ImageView.prototype.getSizeData=function(){var c=(this.highlighted&&this.highlightedImage)?this.highlightedImage:this.image,b=window.getComputedStyle(this.layer);return{imageWidth:c.width,imageHeight:c.height,viewWidth:this.widthFromComputedStyle(b),viewHeight:this.heightFromComputedStyle(b)}};iAd.ImageView.prototype.widthFromComputedStyle=function(b){var c;if(b.width.indexOf("%")!=-1){var d=0;if(this.superview){d=this.superview.size.width}else{if(this.layer.parentNode){d=this.layer.parentNode.offsetWidth}}c=parseFloat(b.width)/100*d}else{c=parseInt(b.width,10)}return c};iAd.ImageView.prototype.heightFromComputedStyle=function(b){var d;if(b.height.indexOf("%")!=-1){var c=0;if(this.superview){c=this.superview.size.height}else{if(this.layer.parentNode){c=this.layer.parentNode.offsetHeight}}d=parseFloat(b.height)/100*c}else{d=parseInt(b.height,10)}return d};iAd.Class.synthesizeProperty(iAd.ImageView.prototype,"usesBackgroundImage");iAd.Class.synthesizeProperty(iAd.ImageView.prototype,"imagePosition");iAd.Class.synthesizeProperty(iAd.ImageView.prototype,"imageSize");iAd.Class.synthesizeProperty(iAd.ImageView.prototype,"imageRepeat");iAd.ImageView.archivedProperties.push("usesBackgroundImage");iAd.ImageView.archivedProperties.push("imagePosition");iAd.ImageView.archivedProperties.push("imageSize");iAd.ImageView.archivedProperties.push("imageRepeat")}());
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ScriptAction",mixins:[iAd.EventTarget],synthesizedProperties:["viewController","delay"]});iAd.ScriptAction.ACTION_DID_COMPLETE="scriptActionDidComplete";iAd.ScriptAction.prototype.init=function(a){this.callSuper();this.viewController=a;this.delay=0;this.eventTarget=document};iAd.ScriptAction.prototype.run=function(){return this.callMethodNameAfterDelay("start",this.delay)};iAd.ScriptAction.prototype.prepare=function(){};iAd.ScriptAction.prototype.start=function(){this.end()};iAd.ScriptAction.prototype.end=function(){this.dispatchNotification(iAd.ScriptAction.ACTION_DID_COMPLETE,this.delegate)};iAd.ScriptAction.prototype.reset=function(){};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class.synthesizeProperty(iAd.ScriptAction.prototype,"targetView");iAd.ScriptAction.prototype.getTargetView=function(){if(!this._targetView&&this.targetViewId){this._targetView=iAd.View.getViewById(this.targetViewId)}return this._targetView};iAd.Class.synthesizeProperty(iAd.ScriptAction.prototype,"sourceView");
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.StartActionListAction",superclass:iAd.ScriptAction,synthesizedProperties:["actionList"]});iAP.StartActionListAction.prototype.start=function(){if(this.actionList){this.viewController.addEventListener(iAd.ViewController.ACTION_LIST_DID_COMPLETE,this,false);this.viewController.startActionListWithSourceView(this.actionList,this.sourceView)}else{this.end()}};iAP.StartActionListAction.prototype.handleEvent=function(b){var a=b.type;if(a==iAd.ViewController.ACTION_LIST_DID_COMPLETE&&b.ad.actionList.name==this.actionList){this.end();this.removeEventListener(a,this,false)}};iAP.StartActionListAction.prototype.summaryText=function(){return this.actionList||"None"};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.SpatialNavigationManager={};iAd.SpatialNavigationManager.ENABLED=false;iAd.SpatialNavigationManager.FOCUSED_CSS_CLASS="ad-focused";iAd.SpatialNavigationManager.INACTIVE_CSS_CLASS="ad-inactive";iAd.SpatialNavigationManager.NAVIGABLE_CSS_CLASS="ad-navigable";iAd.SpatialNavigationManager.BACK_CSS_CLASS="ad-back-button";iAd.SpatialNavigationManager.ENABLED_CSS_CLASS="ad-supports-spatial-navigation";iAd.SpatialNavigationManager.INITIALLY_FOCUSED_ATTR="ad-initially-focused";iAd.SpatialNavigationManager.EXPLICIT_LEFT_ATTR="ad-left-navigable-element";iAd.SpatialNavigationManager.EXPLICIT_RIGHT_ATTR="ad-right-navigable-element";iAd.SpatialNavigationManager.EXPLICIT_UP_ATTR="ad-top-navigable-element";iAd.SpatialNavigationManager.EXPLICIT_DOWN_ATTR="ad-bottom-navigable-element";iAd.SpatialNavigationManager.FOCUS_IN_EVENT="ad-focus-in";iAd.SpatialNavigationManager.FOCUS_OUT_EVENT="ad-focus-out";iAd.SpatialNavigationManager.ACTIVATE_EVENT="ad-activate";iAd.SpatialNavigationManager.NAVIGATE_EVENT="ad-navigate";iAd.SpatialNavigationManager.sharedManager={init:function(){}};["navigableElementsInSubtree","registerSubtree","unregisterSubtree","addNavigableElement","removeNavigableElement","handleEvent","handleKeydown","handleNavigationEvent","handleNavigationCommand","navigateBack","activateFocusedElement","navigateInDirection","preferredElementInDirection","nearestElementIndexInDirection","topMostIndex","rightMostIndex","bottomMostIndex","leftMostIndex","metricsForElement","metricsForElementAtIndex","isElementAtIndexNavigable","focusElement"].forEach(function(a){iAd.SpatialNavigationManager.sharedManager[a]=iAd.SpatialNavigationManager.sharedManager.init});
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Control",superclass:iAd.View,synthesizedProperties:["state","enabled","selected","highlighted"],archivedProperties:["highlighted","enabled","selected","tag"],cssClassName:"ad-control",collectionAccessor:"controls"});iAd.Control.UNHIGHLIGHT_DELAY=0.1;iAd.Control.prototype.init=function(a){this.tag=0;this._enabled=true;this._selected=false;this._highlighted=false;this.callSuper(a);this.layer._control=this;this.userInteractionEnabled=this._enabled;this.navigable=true};iAd.Control.VALUE_CHANGE_EVENT="controlValueChange";iAd.Control.STATE_NORMAL=0;iAd.Control.STATE_NORMAL_CSS="ad-normal";iAd.Control.STATE_HIGHLIGHTED=1<<0;iAd.Control.STATE_HIGHLIGHTED_CSS="ad-highlighted";iAd.Control.STATE_DISABLED=1<<1;iAd.Control.STATE_DISABLED_CSS="ad-disabled";iAd.Control.STATE_SELECTED=1<<2;iAd.Control.STATE_SELECTED_CSS="ad-selected";iAd.Control.synthesizedEvents=[iAd.Control.VALUE_CHANGE_EVENT];iAd.Control.prototype.getState=function(){return(iAd.Control.STATE_NORMAL|(this._highlighted?iAd.Control.STATE_HIGHLIGHTED:0)|(this._enabled?0:iAd.Control.STATE_DISABLED)|(this._selected?iAd.Control.STATE_SELECTED:0))};iAd.Control.prototype.setEnabled=function(a){if(a==this._enabled){return}var b=this.layer;b.toggleClassName(iAd.Control.STATE_DISABLED_CSS,!a);b.setAttribute("aria-disabled",a?"false":"true");this._enabled=a;this.userInteractionEnabled=a;this.notifyPropertyChange("state")};iAd.Control.prototype.setSelected=function(a){if(a==this._selected){return}this.layer.toggleClassName(iAd.Control.STATE_SELECTED_CSS,a);this._selected=a;this.notifyPropertyChange("state")};iAd.Control.prototype.setHighlighted=function(a){if(this._snmHighlightedTimer){clearTimeout(this._snmHighlightedTimer)}if(a==this._highlighted){return}this.layer.toggleClassName(iAd.Control.STATE_HIGHLIGHTED_CSS,a);this._highlighted=a;this.notifyPropertyChange("state")};iAd.Control.prototype.handleSNMActivate=function(a){this.highlighted=true;this._snmHighlightedTimer=this.callMethodNameAfterDelay("setHighlighted",iAd.Control.UNHIGHLIGHT_DELAY,false);this.callSuper(a)};iAd.Control.prototype.touchesBegan=function(a){if(!this._enabled){return}this.callSuper(a);this.highlighted=true};iAd.Control.prototype.touchesMoved=function(b){var a=this.touchInside;this.callSuper(b);if(a!=this.touchInside){this.highlighted=this.touchInside}};iAd.Control.prototype.touchesEnded=function(a){this.callSuper(a);this.highlighted=false};iAd.Control.prototype.touchesCancelled=function(a){this.callSuper(a);this.highlighted=false};iAd.Control.isNodeInControlHierarchyBoundedByElement=function(b,a){while(b.parentNode){if(b.hasOwnProperty("_view")&&b._view instanceof iAd.Control){return true}if(b===a){return false}b=b.parentNode}return false};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.TextField",superclass:iAd.Control,cssClassName:"iap-text-field",synthesizedProperties:["type","placeholder","value","maxLength","autocorrect","autocapitalize"],archivedProperties:["type","placeholder","value","maxLength","autocorrect","autocapitalize"],collectionAccessor:"textFields"});iAP.TextField.DID_FOCUS_EVENT="textFieldDidFocus";iAP.TextField.DID_BLUR_EVENT="textFieldDidBlur";iAP.TextField.AUTOCAPITALIZE_NONE="none";iAP.TextField.AUTOCAPITALIZE_SENTENCES="sentences";iAP.TextField.AUTOCAPITALIZE_WORDS="words";iAP.TextField.AUTOCAPITALIZE_CHARACTERS="characters";iAP.TextField.VALID_TYPES=["text","url","email","tel","number","multiline"];(function(){var a=document.createElement("input");a.autocapitalize="foo";iAP.TextField.SUPPORTS_AUTOCAPITALIZE_TYPES=(a.autocapitalize=="sentences")})();iAP.TextField.prototype.init=function(a){this._type="text";this._placeholder="";this._maxLength=0;this._autocorrect=true;this._autocapitalize="none";this._value="";this.callSuper(a);this.tracking=false};iAP.TextField.prototype.layerWasCreated=function(){this.callSuper();this.setupInput()};iAP.TextField.prototype.setupInput=function(){var b=["keyup","change","blur","focus"];if(this._input){for(var a in b){this._input.removeEventListener(b[a],this)}this._input.parentNode.removeChild(this._input);this._input=null}if(this.type=="multiline"){this._input=document.createElement("textarea");this._input.innerText=this.value}else{this._input=document.createElement("input");this._input.type=this.type;this._input.value=this.value}this.setPlaceholder(this.placeholder);this.setMaxLength(this.maxLength);this.setAutocorrect(this.autocorrect);this.setAutocapitalize(this.autocapitalize);this.setEnabled(this.enabled);this._input.setAttribute("style","width: 100%; height: 100%; display: block;");for(var a in b){this._input.addEventListener(b[a],this,false)}this.layer.appendChild(this._input)};iAP.TextField.prototype.handleEvent=function(a){if(a.type=="focus"){this.createAndDispatchEvent(iAP.TextField.DID_FOCUS_EVENT)}else{if(a.type=="blur"){this.createAndDispatchEvent(iAP.TextField.DID_BLUR_EVENT)}else{if(a.target=this._input){this.updateInternalValue(this._input.value,true)}else{this.callSuper(a)}}}};iAP.TextField.prototype.setEnabled=function(a){this.callSuper(a);if(this._input){this._input.disabled=!this._enabled}};iAP.TextField.prototype.getValue=function(){if(this._input){return this._input.value}return this._value};iAP.TextField.prototype.setValue=function(a){if(a!=this._value){a=(a||"").toString();if(this._input){this._input.value=a}this.updateInternalValue(a,false)}};iAP.TextField.prototype.updateInternalValue=function(a,b){this._value=a;if(b){this.notifyPropertyChange("value")}this.createAndDispatchEvent(iAd.Control.VALUE_CHANGE_EVENT)};iAP.TextField.prototype.setPlaceholder=function(a){this._placeholder=(a||"").toString();if(this._input){this._input.placeholder=this._placeholder}};iAP.TextField.prototype.setMaxLength=function(a){if(typeof(a)===typeof(0)){this._maxLength=Math.max(a,0);if(this._input){if(this._maxLength){this._input.maxLength=this._maxLength}else{this._input.removeAttribute("maxLength")}}}};iAP.TextField.prototype.setAutocorrect=function(a){this._autocorrect=a;if(this._input){this._input.setAttribute("autocorrect",this._autocorrect?"on":"off");this._input.setAttribute("spellcheck",this._autocorrect.toString())}};iAP.TextField.prototype.setAutocapitalize=function(b){if(typeof b=="boolean"){var a=b;b=b?iAP.TextField.AUTOCAPITALIZE_SENTENCES:iAP.TextField.AUTOCAPITALIZE_NONE;iAd.Console.warn("Using deprecated TextField autocapitalize API; passed "+JSON.stringify(a)+" reverted to "+JSON.stringify(b)+".")}if(!iAP.TextField.SUPPORTS_AUTOCAPITALIZE_TYPES){b=b==iAP.TextField.AUTOCAPITALIZE_NONE?"off":"on"}this._autocapitalize=b;if(this._input){this._input.setAttribute("autocapitalize",this._autocapitalize)}};iAP.TextField.prototype.setType=function(c){if(this._type!=c&&~iAP.TextField.VALID_TYPES.indexOf(c)){var a=this._type;this._type=c;if(this._input){if(this._type!="multiline"&&a!="multiline"){this._input.type=this._type}else{var b=this._input.value;this.setupInput();this._input.value=b}}}};iAP.TextField.prototype.focus=function(){if(!this._input){return}this._input.focus()};iAP.TextField.prototype.blur=function(){if(!this._input){return}this._input.blur()};iAP.TextField.prototype.touchesBegan=function(a){var c={};iAd.Utils.copyPropertiesFromSourceToTarget(a,c);var b=c;b.preventDefault=function(){};this.callSuper(b)};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ActionListManager",mixins:[iAd.EventTarget]});iAd.ActionListManager.ACTIVE_STATE_SUFFIX="-is-active";iAd.ActionListManager.ACTION_LIST_WILL_START="actionListWillStart";iAd.ActionListManager.ACTION_LIST_DID_START="actionListDidStart";iAd.ActionListManager.ACTION_LIST_WILL_ITERATE="actionListWillIterate";iAd.ActionListManager.ACTION_LIST_DID_ITERATE="actionListDidIterate";iAd.ActionListManager.ACTION_LIST_WILL_COMPLETE="actionListWillComplete";iAd.ActionListManager.ACTION_LIST_DID_COMPLETE="actionListDidComplete";iAd.ActionListManager.ACTION_LIST_DID_CANCEL="actionListDidCancel";iAd.ActionListManager.ACTION_LIST_DID_PROGRESS="actionListDidProgress";iAd.ActionListManager.prototype.init=function(c,d){this.callSuper();this.eventTarget=document;this.id=c.id||iAd.ActionListManager.uniqueId();this.actionList=c;this.viewController=d;this.actionsByName={};this.actions=[];this.executedActions=[];this.seedActions=[];this.actionQueue=[];this.dependency={};this.selectors=[];this.timers=[];this.usesAnimationIterationCount=true;var b,a;this.actionList.actions.forEach(function(i){var n=i.type;if(n=="css-reset"){this.selectors.push(i.selector);return}var e=i.name,g=i.startAfter||[];if(n=="script"){var j=i.className,f=iAd.Utils.resolveObjectPath(j);if(!f){throw new ReferenceError("Can't find script action class named: "+j)}var l=new f(this.viewController);var m=i.properties;for(var o in m){l[o]=m[o]}if(i.delay){l.delay=i.delay}if(!i.asynchronous){l.delegate=this}l._action=i;l.prepare();i.object=l;this.usesAnimationIterationCount=false}else{if(n=="css"){this.selectors.push(i.selector);var h=i.duration||0;if(b==null){b=h}else{if(b!=h){this.usesAnimationIterationCount=false}}var k=i.delay||0;if(a==null){a=k}else{if(a!=k){this.usesAnimationIterationCount=false}}}}if(g.length>0){g.forEach(function(p){if(this.dependency[p]){this.dependency[p].push(i)}else{this.dependency[p]=[i]}},this);this.usesAnimationIterationCount=false}else{this.seedActions.push(i)}if(e){this.actionsByName[e]=i}i.completed=false;this.actions.push(i)},this);this.totalIterations=this.actionList.iterationCount||1;this.totalActions=this.actions.length};iAd.ActionListManager.prototype.start=function(){if(this.viewController.isInState(this.actionList.cssClassName)){this.resetActions();this.viewController.exitState(this.actionList.cssClassName);this.timers.push(this.callMethodNameAfterDelay("start",0));return}this.clearCSSAnimationProperties();this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_WILL_START,this.viewController,[["actionList",this.actionList]]);this.viewController.enterState(this.actionList.cssClassName);this.viewController.enterState(this.actionList.cssClassName+iAd.ActionListManager.ACTIVE_STATE_SUFFIX);document.addEventListener("webkitAnimationEnd",this,true);if(this.usesAnimationIterationCount){document.addEventListener("webkitAnimationIteration",this,true)}this.completedIterationCount=0;this.iterate();this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_DID_START,this.viewController,[["actionList",this.actionList]])};iAd.ActionListManager.prototype.iterate=function(){this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_WILL_ITERATE,this.viewController,[["actionList",this.actionList],["iteration",this.completedIterationCount]]);this.completedActionCount=0;this.actionQueue=this.seedActions.slice();this.flushActionQueue()};iAd.ActionListManager.prototype.clearCSSAnimationProperties=function(){if(this.selectors.length==0){return}var d=this.selectors.join(",");var e=Array.prototype.slice.call(document.querySelectorAll(d));var a=this.viewController.view;if(a.superview==null){e.push.apply(e,Array.prototype.slice.call(a.layer.querySelectorAll(d)))}for(var c=e.length-1;c>=0;c--){var b=e[c];this.viewController.actionListDidResetAnimation(this,b.style.webkitAnimationName);b.style.webkitAnimationName="";b.style.webkitAnimationDuration="";b.style.webkitAnimationDelay="";b.style.webkitAnimationIterationCount=""}};iAd.ActionListManager.prototype.resetActions=function(){this.clearCSSAnimationProperties();var a;for(a=this.timers.length-1;a>=0;a--){clearTimeout(this.timers[a])}this.timers=[];this.actionQueue=[];for(a=this.executedActions.length-1;a>=0;a--){this.executedActions[a].reset()}this.executedActions=[];this.actions.forEach(function(b){b.completed=false},this)};iAd.ActionListManager.prototype.reset=function(){document.removeEventListener("webkitAnimationEnd",this,true);if(this.usesAnimationIterationCount){document.removeEventListener("webkitAnimationIteration",this,true)}this.resetActions();this.viewController.exitState(this.actionList.cssClassName);this.viewController.exitState(this.actionList.cssClassName+iAd.ActionListManager.ACTIVE_STATE_SUFFIX);this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_DID_CANCEL,this.viewController,[["actionList",this.actionList]])};iAd.ActionListManager.prototype.handleEvent=function(c){var e,b=c.type;if(b=="webkitAnimationEnd"||b=="webkitAnimationIteration"){var f=this.viewController._pageState;var d=c.animationName;if(f){var a=new RegExp("-"+f+"$");d=d.replace(a,"")}e=this.actionsByName[d]}if(e==null||e.asynchronous){return}this.handleActionDidComplete(e)};iAd.ActionListManager.prototype.scriptActionDidComplete=function(a){this.handleActionDidComplete(a._action)};iAd.ActionListManager.prototype.handleActionDidComplete=function(d){if(!this.viewController.isInState(this.actionList.cssClassName)){return}if(d.completed){return}d.completed=true;this.completedActionCount++;var a=this.totalIterations=="infinite"?0:(this.completedIterationCount*this.totalActions+this.completedActionCount)/(this.totalActions*this.totalIterations);this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_DID_PROGRESS,this.viewController,[["actionList",this.actionList],["action",d],["progress",a]]);if(this.completedActionCount==this.totalActions){this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_DID_ITERATE,this.viewController,[["actionList",this.actionList],["iteration",this.completedIterationCount]]);this.completedIterationCount++;if(this.totalIterations!="infinite"&&this.completedIterationCount==this.totalIterations){this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_WILL_COMPLETE,this.viewController,[["actionList",this.actionList]]);document.removeEventListener("webkitAnimationEnd",this,true);if(this.usesAnimationIterationCount){document.removeEventListener("webkitAnimationIteration",this,true)}this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_DID_COMPLETE,this.viewController,[["actionList",this.actionList]]);this.viewController.exitState(this.actionList.cssClassName+iAd.ActionListManager.ACTIVE_STATE_SUFFIX)}else{if(this.usesAnimationIterationCount){this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_WILL_ITERATE,this.viewController,[["actionList",this.actionList],["iteration",this.completedIterationCount]]);this.actions.forEach(function(i){i.completed=false},this);this.completedActionCount=0}else{this.resetActions();this.timers.push(this.callMethodNameAfterDelay("iterate",0))}}}else{var e=d.name;if(e){var m=this.dependency[e];if(m){for(var h=0,l=m.length;h<l;h++){var f=m[h];var c=f.startAfter;var n=true;for(var g=0,b=c.length;g<b;g++){var k=this.actionsByName[c[g]];if(k&&k.completed==false){n=false;break}}if(n){this.actionQueue.push(f)}}}}}this.flushActionQueue()};iAd.ActionListManager.prototype.flushActionQueue=function(){if(this.actionQueue.length==0){return}var f=this.viewController._pageState;var b=f?"-"+f:"";var e=[];var a={};this.actionQueue.forEach(function(m){var r=m.type;if(r=="css"){var h=document.querySelectorAll(m.selector),k=h.length;if(k>0){var t=m.name+b,p=m.duration+"s",s=m.delay||0+"s";for(var o=0;o<k;o++){var n=h[o];var j=n.id;if(!j){j=n.id=iAd.ActionListManager.uniqueId()}var l=a[j];if(!l){l=a[j]={keyframeNames:[t],durations:[p],delays:[s],element:n}}else{l.keyframeNames.push(t);l.durations.push(p);l.delays.push(s)}}}else{e.push(m)}}else{if(r=="script"){var q=m.object;this.executedActions.push(q);this.timers.push(q.run())}}if(m.asynchronous){e.push(m)}},this);for(var c in a){var g=a[c];var d=g.element;d.style.webkitAnimationName=g.keyframeNames.join(",");d.style.webkitAnimationDuration=g.durations.join(",");d.style.webkitAnimationDelay=g.delays.join(",");d.style.webkitAnimationFillMode="both";d.style.webkitAnimationIterationCount=this.usesAnimationIterationCount?this.totalIterations:""}this.actionQueue=[];e.forEach(this.handleActionDidComplete,this);this.flushActionQueue()};iAd.ActionListManager.uniqueId=function(){return"al-"+this._uid++};iAd.ActionListManager._uid=1;
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class.synthesizeProperty(iAd.ActionListManager.prototype,"sourceView");iAd.ActionListManager.prototype.flushActionQueue=function(){if(this.actionQueue.length==0){return}var f=this.viewController._pageState;var b=f?"-"+f:"";var e=[];var a={};this.actionQueue.forEach(function(m){var r=m.type;if(r=="css"){var h=document.querySelectorAll(m.selector),k=h.length;if(k>0){var t=m.name+b,p=m.duration+"s",s=m.delay||0+"s";for(var o=0;o<k;o++){var n=h[o];var j=n.id;if(!j){j=n.id=iAd.ActionListManager.uniqueId()}var l=a[j];if(!l){l=a[j]={keyframeNames:[t],durations:[p],delays:[s],element:n}}else{l.keyframeNames.push(t);l.durations.push(p);l.delays.push(s)}}}else{e.push(m)}}else{if(r=="script"){var q=m.object;this.executedActions.push(q);q.sourceView=this.sourceView;this.timers.push(q.run())}}if(m.asynchronous){e.push(m)}},this);for(var c in a){var g=a[c];var d=g.element;d.style.webkitAnimationName=g.keyframeNames.join(",");d.style.webkitAnimationDuration=g.durations.join(",");d.style.webkitAnimationDelay=g.delays.join(",");d.style.webkitAnimationFillMode="both";d.style.webkitAnimationIterationCount=this.usesAnimationIterationCount?this.totalIterations:""}this.actionQueue=[];e.forEach(this.handleActionDidComplete,this);this.flushActionQueue()};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Loader",mixins:[iAd.EventTarget],synthesizedProperties:["supportingObject","progress","url","resolvedURL","timeout"]});iAd.Loader.DID_START="loaderDidStart";iAd.Loader.DID_PROGRESS="loaderDidProgress";iAd.Loader.DID_COMPLETE="loaderDidComplete";iAd.Loader.DID_FAIL="loaderDidFail";iAd.Loader.NO_ERROR=0;iAd.Loader.LOAD_ERROR=1;iAd.Loader.LOAD_ABORTED=2;iAd.Loader.LOAD_TIMED_OUT=3;iAd.Loader.DEFAULT_TIMEOUT=0;iAd.Loader.prototype.init=function(a){this.callSuper();this._url=a;this._timeout=-1;this.delegate=null;this.loading=false;this.loaded=false;this.error=iAd.Loader.NO_ERROR;this.eventTarget=document};iAd.Loader.prototype.load=function(){if(this.loading){return false}this.loading=true;this.loaded=false;this.error=iAd.Loader.NO_ERROR;this.startTimeoutTimer();this.notifyLoaderDidStart();this.startLoad();return true};iAd.Loader.prototype.abort=function(){if(!this.loading||this.loaded){return false}this.actuallyAbort();this.notifyLoaderDidFail(iAd.Loader.LOAD_ABORTED);return true};iAd.Loader.prototype.actuallyAbort=function(){this.loading=false;this.loaded=false;this.abortLoad()};iAd.Loader.prototype.getProgress=function(){return this.loaded?1:0};iAd.Loader.prototype.setUrl=function(a){if(this.loading||this.loaded){iAd.Console.warn("iAd.Loader: You cannot change the url after starting the load.");return}this._url=a};iAd.Loader.prototype.getResolvedURL=function(){return iAd.Path.resolveAbsolutePath(this._url)};iAd.Loader.prototype.getTimeout=function(){return this._timeout>=0?this._timeout:this.constructor.DEFAULT_TIMEOUT};iAd.Loader.prototype.startLoad=function(){this.notifyLoaderDidFail(iAd.Loader.LOAD_ERROR)};iAd.Loader.prototype.abortLoad=function(){};iAd.Loader.prototype.startTimeoutTimer=function(){if(this.timeout>0){this.timeoutTimer=this.callMethodNameAfterDelay("handleTimeout",this.timeout)}};iAd.Loader.prototype.cancelTimeoutTimer=function(){if(this.timeoutTimer){clearTimeout(this.timeoutTimer)}this.timeoutTimer=null};iAd.Loader.prototype.handleTimeout=function(){this.actuallyAbort();this.notifyLoaderDidFail(iAd.Loader.LOAD_TIMED_OUT)};iAd.Loader.prototype.notifyLoaderDidStart=function(){this.loading=true;this.dispatchLoaderNotification(iAd.Loader.DID_START)};iAd.Loader.prototype.notifyLoaderDidProgress=function(){this.dispatchLoaderNotification(iAd.Loader.DID_PROGRESS,[["progress",this.progress]])};iAd.Loader.prototype.notifyLoaderDidFail=function(a){this.cancelTimeoutTimer();this.loading=false;this.error=a;this.dispatchLoaderNotification(iAd.Loader.DID_FAIL,[["error",(a||iAd.Loader.LOAD_ERROR)]])};iAd.Loader.prototype.notifyLoaderDidComplete=function(){if(this.loaded&&!this.loading){return}this.cancelTimeoutTimer();this.loading=false;this.loaded=true;this.dispatchLoaderNotification(iAd.Loader.DID_COMPLETE)};iAd.Loader.prototype.dispatchLoaderNotification=function(a,b){this.dispatchNotification(a,this.delegate,b);this.notifyDelegate(a,this._manager,b)};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ImageLoader",superclass:iAd.Loader});iAd.ImageLoader.DEFAULT_TIMEOUT=5;iAd.ImageLoader.prototype.init=function(b,a){this.callSuper(b);this.hasHiDPIVersion=a};iAd.ImageLoader.prototype.startLoad=function(){var a=this._img=document.createElement("img");this.addImageEventListeners();a.src=this.processImageURL(this._url,this.hasHiDPIVersion)};iAd.ImageLoader.prototype.processImageURL=function(b,a){return(a&&iAd.Device.HAS_HIDPI_DISPLAY)?iAd.Path.appendHiDPISuffix(b):b};iAd.ImageLoader.prototype.abortLoad=function(){this.removeImageEventListeners()};iAd.ImageLoader.prototype.getSupportingObject=function(){return this._img};iAd.ImageLoader.prototype.getResolvedURL=function(){return this.processImageURL(this.callSuper(),this.hasHiDPIVersion)};iAd.ImageLoader.prototype.handleEvent=function(a){this.removeImageEventListeners();if(a.type=="load"){this.notifyLoaderDidComplete()}else{if(a.type=="error"){this.notifyLoaderDidFail(iAd.Loader.LOAD_ERROR)}}};iAd.ImageLoader.prototype.addImageEventListeners=function(){if(this._img){this._img.addEventListener("load",this);this._img.addEventListener("error",this)}};iAd.ImageLoader.prototype.removeImageEventListeners=function(){if(this._img){this._img.removeEventListener("load",this);this._img.removeEventListener("error",this)}};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Utils.replaceMethod(iAd.ImageLoader,"init",function(b,a){this.callOriginal.apply(this,arguments);if(arguments.length<2){this.hasHiDPIVersion=window.imageAssetInfo&&window.imageAssetInfo[b]}});
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.StyleLoader",superclass:iAd.Loader});iAd.StyleLoader.DEFAULT_TIMEOUT=0;iAd.StyleLoader.LOAD_EVENT_SUPPORT_DETECTED=false;iAd.StyleLoader.prototype.startLoad=function(){var a=this._element=document.createElement("link");a.rel="stylesheet";a.href=this._url;if(iAd.CSS.isStyleSheetLoaded(this.resolvedURL)){this._element=iAd.CSS.elementForStyleSheet(this.resolvedURL);this.notifyLoaderDidComplete();return}this.addElementListeners();if(!iAd.StyleLoader.LOAD_EVENT_SUPPORT_DETECTED){iAd.StyleLoader.enqueueStyleLoader(this)}document.head.appendChild(a)};iAd.StyleLoader.prototype.abortLoad=function(){if(this._element){this.removeElementListeners();document.head.removeChild(this._element);iAd.StyleLoader.dequeueStyleLoader(this)}};iAd.StyleLoader.prototype.getSupportingObject=function(){return this._element};iAd.StyleLoader.prototype.getResolvedURL=function(){return this._element?this._element.href:this.callSuper()};iAd.StyleLoader.prototype.addElementListeners=function(a){this._element.addEventListener("load",this);this._element.addEventListener("error",this)};iAd.StyleLoader.prototype.removeElementListeners=function(a){this._element.removeEventListener("load",this);this._element.removeEventListener("error",this)};iAd.StyleLoader.prototype.handleEvent=function(a){iAd.StyleLoader.LOAD_EVENT_SUPPORT_DETECTED=true;iAd.StyleLoader.dequeueStyleLoader(this);this.removeElementListeners();switch(a.type){case"load":if(!this.loaded){this.notifyLoaderDidComplete()}break;case"error":this.notifyLoaderDidFail();break}};iAd.StyleLoader.stylesheetsLoadingQueue={};iAd.StyleLoader.stylesheetsLoadPoller=null;iAd.StyleLoader.enqueueStyleLoader=function(b){var c=b.resolvedURL;var a=iAd.StyleLoader.stylesheetsLoadingQueue;if(a.hasOwnProperty(c)){a[c].push(b)}else{a[c]=[b]}if(iAd.StyleLoader.stylesheetsLoadPoller==null){iAd.StyleLoader.stylesheetsLoadPoller=window.setInterval(iAd.StyleLoader.pollStylesheetLoad,50)}};iAd.StyleLoader.dequeueStyleLoader=function(b){var a=iAd.StyleLoader.stylesheetsLoadingQueue;var c=b.resolvedURL;if(a.hasOwnProperty(c)){iAd.Array.removeObjectFromArray(b,a[c])}if(a[c]&&a[c].length==0){delete a[c]}if(iAd.StyleLoader.stylesheetsLoadPoller&&Object.keys(a).length==0){iAd.StyleLoader.stopPolling()}};iAd.StyleLoader.pollStylesheetLoad=function(){var a=iAd.StyleLoader.stylesheetsLoadingQueue;if(iAd.StyleLoader.LOAD_EVENT_SUPPORT_DETECTED){iAd.StyleLoader.stylesheetsLoadingQueue={};iAd.StyleLoader.stopPolling();return}for(var b in a){if(iAd.CSS.isStyleSheetLoaded(b)){a[b].forEach(function(c){c.notifyLoaderDidComplete()});delete a[b]}}if(Object.keys(a).length==0){iAd.StyleLoader.stopPolling()}};iAd.StyleLoader.stopPolling=function(){window.clearInterval(iAd.StyleLoader.stylesheetsLoadPoller);iAd.StyleLoader.stylesheetsLoadPoller=null};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.StyleLoader.prototype.handleEvent=function(){};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.LoaderManager",superclass:iAd.Loader,synthesizedProperties:["length"]});iAd.LoaderManager.DID_PROGRESS="loaderDidProgress";iAd.LoaderManager.prototype.init=function(a){this.callSuper();this._progress=0;this.loaders=a||[];this.pendingLoaders=this.loaders.slice();this.failedLoaders=[];this.completedLoaders=[];this.openLoaders=[]};iAd.LoaderManager.prototype.add=function(a){if(this.contains(a)){iAd.Console.warn(this.constructor.displayName+": Unable to add loader again if already managed.");return false}if(a.error||a.loaded||a.loading){iAd.Console.warn(this.constructor.displayName+": Unable to add a loader that has already started to load.");return false}this.loaders.push(a);this.pendingLoaders.push(a);if(this.loading){this.updateProgress()}return true};iAd.LoaderManager.prototype.remove=function(a){if(this.loading){iAd.Console.warn(this.constructor.displayName+": Unable to remove loaders from a manager that has already started to load.");return false}if(this.contains(a)&&this.pendingLoaders.indexOf(a)==-1){iAd.Console.warn(this.constructor.displayName+": Unable to remove a loader that has already started to load.");return false}var b=iAd.Array.removeObjectFromArray(a,this.loaders);iAd.Array.removeObjectFromArray(a,this.pendingLoaders);return b};iAd.LoaderManager.prototype.clear=function(){if(this.loading){iAd.Console.warn(this.constructor.displayName+": You cannot clear while loading is in progress.");return}this.resetLoaderArrays();this.updateProgress()};iAd.LoaderManager.prototype.contains=function(a){return this.loaders.indexOf(a)!=-1};iAd.LoaderManager.prototype.resetLoaderArrays=function(){this.pendingLoaders=[];this.completedLoaders=[];this.openLoaders=[];this.failedLoaders=[];this.loaders=[]};iAd.LoaderManager.prototype.getProgress=function(){return this._progress};iAd.LoaderManager.prototype.updateProgress=function(){var g=this.length;if(g==0){this._progress=0;return}var f=this.loaders,d=0,b=0,a,c;for(var e=0;e<g;e++){a=f[e];c=a.length||1;d+=c;b+=c*a.progress}this._progress=b/d};iAd.LoaderManager.prototype.getLength=function(){return this.loaders.length};iAd.LoaderManager.prototype.startLoad=function(){this._progress=0;this.openLoaders=[];this.completedLoaders=[];this.failedLoaders=[]};iAd.LoaderManager.prototype.abortLoad=function(){for(var a=0,b=this.openLoaders.length;a<b;a++){this.openLoaders[a].abort()}return true};iAd.LoaderManager.prototype.loadNextItem=function(){if(this.pendingLoaders.length==0){return}var a=this.pendingLoaders.shift();this.openLoaders.push(a);a._manager=this;a.callMethodNameAfterDelay("load",0)};iAd.LoaderManager.prototype.loaderDidComplete=function(a){this.completedLoaders.push(a);this.loaderDidEnd(a)};iAd.LoaderManager.prototype.loaderDidFail=function(a,b){this.failedLoaders.push(a);this.loaderDidEnd(a)};iAd.LoaderManager.prototype.loaderDidProgress=function(a,c,b){this.notifyLoaderDidProgress(b||a)};iAd.LoaderManager.prototype.loaderDidEnd=function(a){iAd.Array.removeObjectFromArray(a,this.openLoaders);delete a._manager;this.notifyLoaderDidProgress(a)};iAd.LoaderManager.prototype.notifyLoaderDidProgress=function(a){this.updateProgress();this.dispatchLoaderNotification(iAd.Loader.DID_PROGRESS,[["progress",this.progress],["relatedLoader",a]])};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.LoaderBatch",superclass:iAd.LoaderManager});iAd.LoaderBatch.prototype.add=function(a){var b=this.callSuper(a);if(b&&this.loading){this.loadNextItem();this.notifyLoaderDidProgress()}};iAd.LoaderBatch.prototype.startLoad=function(){this.callSuper();var a=this.pendingLoaders;while(a.length>0){this.loadNextItem()}return true};iAd.LoaderBatch.prototype.loaderDidComplete=function(a){this.callSuper(a);this.checkLoaderDidComplete()};iAd.LoaderBatch.prototype.loaderDidFail=function(a,b){this.callSuper(a,b);this.checkLoaderDidComplete()};iAd.LoaderBatch.prototype.checkLoaderDidComplete=function(){if(this.openLoaders.length==0){this.notifyLoaderDidComplete()}};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.XHRLoader",superclass:iAd.Loader,synthesizedProperties:["xmlContent","content"]});iAd.XHRLoader.SUPPORTS_CONTENT_TYPE=(new XMLHttpRequest()).hasOwnProperty("responseType");iAd.XHRLoader.XHR_EVENTS=["loadstart","progress","abort","error","load","timeout","loadend","readystatechange"];iAd.XHRLoader.DEFAULT_TIMEOUT=0;iAd.XHRLoader.prototype.init=function(a,c,b){this.callSuper(a);this.method=c||"GET";this.params=b;this.headers={};this.urlEncoded=true;this.contentType=""};iAd.XHRLoader.prototype.getContent=function(){if(this._xhr){return iAd.XHRLoader.SUPPORTS_CONTENT_TYPE?this._xhr.response:this._xhr.responseText}return null};iAd.XHRLoader.prototype.getXmlContent=function(){try{return this._xhr?this._xhr.responseXML:null}catch(a){return null}};iAd.XHRLoader.prototype.getSupportingObject=function(){return this._xhr};iAd.XHRLoader.prototype.getProgress=function(){if(this.loaded){return 1}return this.bytesTotal?this.bytesLoaded/this.bytesTotal:0};iAd.XHRLoader.prototype.getResolvedURL=function(){return iAd.Path.resolveAbsolutePath(this.shouldSerializeURL()?this.serializeURL():this._url)};iAd.XHRLoader.prototype.startLoad=function(){var a=this.shouldSerializeURL()?this.serializeURL():this._url;var f=this.method.toUpperCase();var b=this.params;if(f=="GET"){b=null}if(this.urlEncoded&&(f=="POST"||f=="PUT")){this.headers["Content-type"]="application/x-www-form-urlencoded; charset=utf-8";if(b){b=this.serializeParams()}}if(!this._xhr){this._xhr=new XMLHttpRequest()}this.addXHRListeners();this._xhr.open(f,a,true);for(var d in this.headers){try{this._xhr.setRequestHeader(d,this.headers[d])}catch(c){iAd.Console.warn('iAd.XHRLoader: Error when attempting to set header "'+d+'".')}}if(iAd.XHRLoader.SUPPORTS_CONTENT_TYPE){try{this._xhr.responseType=this.contentType}catch(c){iAd.Console.warn('iAd.XHRLoader: Invalid contentType "'+this.contentType+'".');this.contentType=""}}this.bytesTotal=0;this.bytesLoaded=0;this._xhr.send(b)};iAd.XHRLoader.prototype.abortLoad=function(){if(this._xhr){this.removeXHRListeners();this._xhr.abort();this._xhr=null}};iAd.XHRLoader.prototype.serializeURL=function(){var a=this._url;var b=(a.indexOf("?")!=-1)?"&":"?";return this.params?a+b+this.serializeParams():a};iAd.XHRLoader.prototype.serializeParams=function(){return iAd.Path.objectToQueryString(this.params)};iAd.XHRLoader.prototype.shouldSerializeURL=function(){return this.method.toUpperCase()=="GET"&&!!this.params};iAd.XHRLoader.prototype.addXHRListeners=function(){var b=iAd.XHRLoader.XHR_EVENTS;for(var a=0,c=b.length;a<c;a++){this._xhr.addEventListener(b[a],this)}};iAd.XHRLoader.prototype.removeXHRListeners=function(){var b=iAd.XHRLoader.XHR_EVENTS;for(var a=0,c=b.length;a<c;a++){this._xhr.removeEventListener(b[a],this)}};iAd.XHRLoader.prototype.handleEvent=function(a){switch(a.type){case"load":this.handleLoadEvent(a);break;case"progress":this.handleProgressEvent(a);break;case"abort":this.handleAbortEvent(a);break;case"error":this.handleErrorEvent(a);break}};iAd.XHRLoader.prototype.handleLoadEvent=function(a){this.notifyLoaderDidComplete()};iAd.XHRLoader.prototype.handleProgressEvent=function(a){if(a.lengthComputable){this.bytesLoaded=a.loaded;this.bytesTotal=a.total}this.notifyLoaderDidProgress()};iAd.XHRLoader.prototype.handleAbortEvent=function(a){this.notifyLoaderDidFail(iAd.Loader.LOAD_ABORTED)};iAd.XHRLoader.prototype.handleErrorEvent=function(a){this.notifyLoaderDidFail(iAd.Loader.LOAD_ERROR)};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.VideoLoader",superclass:iAd.Loader});iAd.VideoLoader.DEFAULT_TIMEOUT=5;iAd.VideoLoader.prototype.startLoad=function(){this.video=iAd.Video.videoForURL(this._url);this.video.delegate=this;if(this.video.loadReady){this.notifyLoaderDidComplete()}else{this.video.load()}};iAd.VideoLoader.prototype.notifyLoaderDidComplete=function(){iAd.Media.preloadedMedia=this.video;this.callSuper()};iAd.VideoLoader.prototype.getSupportingObject=function(){return this.video};iAd.VideoLoader.prototype.getResolvedURL=function(){return this.video.resolvedURL};iAd.VideoLoader.prototype.mediaLoadIsReady=function(a){this.notifyLoaderDidComplete()};iAd.VideoLoader.prototype.mediaLoadDidFail=function(b,a){this.notifyLoaderDidFail(iAd.Loader.LOAD_ERROR)};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ScriptLoader",superclass:iAd.Loader});iAd.ScriptLoader.DEFAULT_TIMEOUT=0;iAd.ScriptLoader.prototype.startLoad=function(){var b=this._element=document.createElement("script");b.type="text/javascript";b.src=this._url;var a=iAd.ScriptLoader.elementForScript(b.src);if(a){this._element=a;this.notifyLoaderDidComplete();return}this.addElementListeners();document.head.appendChild(b)};iAd.ScriptLoader.prototype.abortLoad=function(){if(this._element){this.removeElementListeners();document.head.removeChild(this._element)}};iAd.ScriptLoader.prototype.getSupportingObject=function(){return this._element};iAd.ScriptLoader.prototype.getResolvedURL=function(){return this._element?this._element.src:this.callSuper()};iAd.ScriptLoader.prototype.addElementListeners=function(){if(this._element){this._element.addEventListener("load",this,false);this._element.addEventListener("error",this,false)}};iAd.ScriptLoader.prototype.removeElementListeners=function(){if(this._element){this._element.removeEventListener("load",this,false);this._element.removeEventListener("error",this,false)}};iAd.ScriptLoader.prototype.handleEvent=function(a){this.removeElementListeners();if(a.type=="load"){this.notifyLoaderDidComplete()}else{if(a.type=="error"){this.notifyLoaderDidFail(iAd.Loader.LOAD_ERROR)}}};iAd.ScriptLoader.elementForScript=function(c){var b,a=document.scripts;for(var d=0,e=a.length;d<e;d++){b=a[d];if(b.href==c){return b}}return null};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ViewControllerRequiredFilesLoader",superclass:iAd.LoaderBatch,synthesizedProperties:["contentViewMarkup"]});iAd.ViewControllerRequiredFilesLoader.LOADER_CLASSES={stylesheets:iAd.StyleLoader,scripts:iAd.ScriptLoader,images:iAd.ImageLoader,video:iAd.VideoLoader,contentView:iAd.XHRLoader};iAd.ViewControllerRequiredFilesLoader.prototype.init=function(a){this.callSuper();this.viewController=a;var b=a.configuration;if(b.requiredFileURIs){this.processFiles(b.requiredFileURIs)}};iAd.ViewControllerRequiredFilesLoader.prototype.getContentViewMarkup=function(){return this.contentViewLoader.content};iAd.ViewControllerRequiredFilesLoader.prototype.processFiles=function(b){for(var c in b){if(b.hasOwnProperty(c)){switch(c){case"contentView":var a=this.addFilesOfType([b[c]],c);this.contentViewLoader=a[0];break;case"stylesheets":this.addFilesOfType(b[c],c);break;case"scripts":this.addFilesOfType(b[c],c);break;case"images":this.addFilesOfType(b[c],c);break;case"video":this.addFilesOfType([b[c]],c);break;default:iAd.Console.warn('iAd.ViewController # loadRequiredFiles : unknown key "'+c+'" in configuration.requiredFileURIs');break}}}};iAd.ViewControllerRequiredFilesLoader.prototype.addFilesOfType=function(a,h){var g=iAd.ViewControllerRequiredFilesLoader.LOADER_CLASSES[h];if(!g){iAd.Console.warn('iAd.ViewController #loadRequiredFiles : No known loader for type "'+h+'"');return}var e=[];for(var d=0,f=a.length;d<f;d++){var b=a[d];var j;if(g==iAd.ImageLoader){var c=this.viewController.configuration;j=new g(b,c.hasHiDPIVersion)}else{j=new g(b)}this.add(j);e.push(j)}return e};iAd.ViewControllerRequiredFilesLoader.prototype.notifyLoaderDidProgress=function(a){this.callSuper(a);this.viewController.requiredFilesLoaderDidProgress(this,this.progress,a)};iAd.ViewControllerRequiredFilesLoader.prototype.notifyLoaderDidFail=function(a){this.callSuper(a);this.viewController.requiredFilesLoaderDidFail(this,a)};iAd.ViewControllerRequiredFilesLoader.prototype.notifyLoaderDidComplete=function(){this.callSuper();this.viewController.requiredFilesLoaderDidComplete(this)};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.ViewControllerRequiredFilesLoader.prototype.addFilesOfType=function(g,e){var h=iAd.ViewControllerRequiredFilesLoader.LOADER_CLASSES[e];if(!h){iAd.Console.warn('iAd.ViewController #loadRequiredFiles : No known loader for type "'+e+'"');return}var b=[];for(var d=0,f=g.length;d<f;d++){var c=g[d];var a;a=new h(c);this.add(a);b.push(a)}return b};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Archiver={};iAd.Archiver._uid=1;iAd.Archiver.WILL_ENCODE_OBJECT="willEncodeObjectToArchive";iAd.Archiver.DID_ENCODE_OBJECT="didEncodeObjectToArchive";iAd.Archiver.WILL_RESTORE_OBJECT="willRestoreFromArchive";iAd.Archiver.DID_RESTORE_OBJECT="didRestoreFromArchive";iAd.Archiver.archive=function(c,a){if(!a){a={};return{__root:this.archive(c,a),__objects:a}}if(iAd.Utils.objectIsPrimitive(c)){return c}else{if(iAd.Utils.objectIsArray(c)){return c.map(function(h){return this.archive(h,a)},this)}}var f=c._uid||(c._uid=this._uid++);if(!a[f]){var e=a[f]={};if(iAd.Utils.objectIsInstanceOfClass(c,iAd.Object)){var d=c.constructor;e.__className=d._name;var b=this.archivePropertiesForClass(d);if(iAd.Utils.objectHasMethod(c,iAd.Archiver.WILL_ENCODE_OBJECT)){c[iAd.Archiver.WILL_ENCODE_OBJECT](e)}for(var g in b){e[g]=this.archive(c.archiveProperty(g),a)}if(iAd.Utils.objectHasMethod(c,iAd.Archiver.DID_ENCODE_OBJECT)){c[iAd.Archiver.DID_ENCODE_OBJECT](e)}}else{for(var g in c){if(g!="_uid"){e[g]=this.archive(c[g],a)}}}}return{_uid:f}};iAd.Archiver.archiveToJSON=function(a){return JSON.stringify(this.archive(a))};iAd.Archiver.archivePropertiesForClass=function(g){var d=g._archivePropertyMap;if(d){return d}d=g._archivePropertyMap={};var f=g.superclass;if(f){iAd.Utils.copyPropertiesFromSourceToTarget(this.archivePropertiesForClass(f),d)}var e=g.archivedProperties||[];for(var a=0,c=e.length;a<c;a++){d[e[a]]=true}var b=g.excludedProperties||[];for(a=0,c=b.length;a<c;a++){delete d[b[a]]}return d};iAd.Archiver.restoreFromArchive=function(b,a,j){if(iAd.Utils.objectIsPrimitive(b)){return b}else{if(b.__root){return this.restoreFromArchive(b.__root,b.__objects,{})}else{if(b._uid){var f=b._uid;return j[f]||(j[f]=this.restoreFromArchive(a[f],a,j))}else{if(iAd.Utils.objectIsArray(b)){return b.map(function(k){return this.restoreFromArchive(k,a,j)},this)}else{var g={};for(var i in b){if(i!="__className"){g[i]=this.restoreFromArchive(b[i],a,j)}}if(b.__className){var d=iAd.Utils.resolveObjectPath(b.__className);var c=d;var e;do{e=c.restoreFromArchive}while(!e&&(c=c.superclass));var h=e?e.call(d,g):new d();if(iAd.Utils.objectHasMethod(h,iAd.Archiver.WILL_RESTORE_OBJECT)){h[iAd.Archiver.WILL_RESTORE_OBJECT](b)}for(var i in g){h.restoreProperty(i,g[i])}if(iAd.Utils.objectHasMethod(h,iAd.Archiver.DID_RESTORE_OBJECT)){h[iAd.Archiver.DID_RESTORE_OBJECT](b)}return h}else{return g}}}}}};iAd.Archiver.restoreWithJSONArchive=function(a){return a?this.restoreFromArchive(JSON.parse(a)):null};iAd.Archiver.objectReferences={};iAd.Archiver.referenceForObject=function(b){var a=this.objectReferences,c;if(b.__archiveReference){c=b.__archiveReference;a[c].count++;return c}c=++this._uid;a[c]={object:b,count:1};b.__archiveReference=c;return c};iAd.Archiver.objectForReference=function(c){var a=this.objectReferences;var d=a[c];if(!d){return null}var b=d.object;d.count--;if(d.count<=0){delete a[c];delete b.__archiveReference}return b};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ViewController",superclass:iAd.Object,mixins:[iAd.EventTarget],synthesizedProperties:["view","title","loadingRequiredFiles","loadedAllRequiredFiles","viewWasProcessed","contentView","interfaceOrientation","contentSizeForViewInPopover"],archivedProperties:["configuration","viewWasArchived","title","toolbarItems","requiredFilesLoadDelegate","stateChangeDelegate","actionListDelegate","wasBackItemTransition","becomesBackItemTransition","wasTopItemTransition","becomesTopItemTransition","becomesHiddenTransition","becomesVisibleTransition","buildInActionListShouldOccurAfterTransition","buildOutActionListShouldDelayTransition","disableLoadingViewController","viewLoadingDelaysTransition","contentSizeForViewInPopover","modalInPopover"]});iAd.ViewController.__minimalViewLoadingTime=0;iAd.ViewController.prototype.init=function(d){this.requiredFilesLoadDelegate=null;this.stateChangeDelegate=null;this.actionListDelegate=null;this.callSuper();this.configuration={};this.shouldSetUpContentViewUponLoad=false;this.shouldProcessViewUponRequestsCompleted=false;this.viewIsLoaded=false;this.viewWasArchived=false;this.shouldArchiveView=true;if(iAd.Utils.objectIsString(d)){this.configuration={id:d}}else{if(d!==undefined&&d!==null){this.configuration=d}}this.id=this.configuration.id||iAd.ViewController.uniqueId();this._view=null;this._contentView=null;this._title="";this._tabBarItem=null;this._navigationItem=null;this._toolbarItems=[];this._viewWasProcessed=false;this.outlets={};this.eventTarget=document;this.modalViewController=null;this.parentViewController=null;this.viewAppearancePropagationProperty=null;this.modalTransitionStyle=null;this.searchDisplayController=null;this.wasBackItemTransition=iAd.ViewController.TRANSITION_IN_FROM_LEFT;this.becomesBackItemTransition=iAd.ViewController.TRANSITION_OUT_TO_LEFT;this.wasTopItemTransition=iAd.ViewController.TRANSITION_OUT_TO_RIGHT;this.becomesTopItemTransition=iAd.ViewController.TRANSITION_IN_FROM_RIGHT;this.becomesHiddenTransition=iAd.ViewController.TRANSITION_DISSOLVE_OUT;this.becomesVisibleTransition=iAd.ViewController.TRANSITION_DISSOLVE_IN;this.buildInActionListShouldOccurAfterTransition=false;this.buildOutActionListShouldDelayTransition=false;this.disableLoadingViewController=false;this.viewLoadingDelaysTransition=true;this.__minimalViewLoadingTime=iAd.ViewController.__minimalViewLoadingTime;this.contentSizeForViewInPopover=new iAd.Size(320,1100);this.modalInPopover=false;iAd.ViewController.instances[this.id]=this;iAd.Utils.copyPropertiesFromSourceToTarget(this.configuration.properties,this);this.actionListManagersByName={};this.actionListByName={};this.actionListNameByClassName={};var a=this.configuration.actionLists;if(a){for(var b=0,c=a.length;b<c;b++){this.loadActionList(a[b])}}};iAd.ViewController.restoreFromArchive=function(a){return new this(a.configuration)};iAd.ViewController.instances={};iAd.ViewController.viewProcessors=[];iAd.ViewController.WILL_LOAD_REQUIRED_FILES="viewControllerWillLoadRequiredFiles";iAd.ViewController.PROGRESS_LOADING_REQUIRED_FILES="viewControllerProgressLoadingRequiredFiles";iAd.ViewController.DID_LOAD_REQUIRED_FILES="viewControllerDidLoadRequiredFiles";iAd.ViewController.DID_ABORT_LOAD_REQUIRED_FILES="viewControllerDidAbortLoadRequiredFiles";iAd.ViewController.DID_ENTER_STATE="viewControllerDidEnterState";iAd.ViewController.DID_EXIT_STATE="viewControllerDidExitState";iAd.ViewController.ACTION_LIST_WILL_START="viewControllerActionListWillStart";iAd.ViewController.ACTION_LIST_DID_START="viewControllerActionListDidStart";iAd.ViewController.ACTION_LIST_WILL_ITERATE="viewControllerActionListWillIterate";iAd.ViewController.ACTION_LIST_DID_ITERATE="viewControllerActionListDidIterate";iAd.ViewController.ACTION_LIST_WILL_COMPLETE="viewControllerActionListWillComplete";iAd.ViewController.ACTION_LIST_DID_COMPLETE="viewControllerActionListDidComplete";iAd.ViewController.ACTION_LIST_DID_CANCEL="viewControllerActionListDidCancel";iAd.ViewController.ACTION_LIST_DID_PROGRESS="viewControllerActionListDidProgress";iAd.ViewController.VIEW_WILL_APPEAR_STATE="ad-view-will-appear";iAd.ViewController.VIEW_DID_APPEAR_STATE="ad-view-did-appear";iAd.ViewController.VIEW_WILL_DISAPPEAR_STATE="ad-view-will-disappear";iAd.ViewController.VIEW_DID_DISAPPEAR_STATE="ad-view-did-disappear";iAd.ViewController.APPEARANCE_STATES=[iAd.ViewController.VIEW_WILL_APPEAR_STATE,iAd.ViewController.VIEW_DID_APPEAR_STATE,iAd.ViewController.VIEW_WILL_DISAPPEAR_STATE,iAd.ViewController.VIEW_DID_DISAPPEAR_STATE];iAd.ViewController.VIEW_WILL_APPEAR_EVENT="viewControllerViewWillAppear";iAd.ViewController.VIEW_DID_APPEAR_EVENT="viewControllerViewDidAppear";iAd.ViewController.VIEW_WILL_DISAPPEAR_EVENT="viewControllerViewWillDisappear";iAd.ViewController.VIEW_DID_DISAPPEAR_EVENT="viewControllerViewDidDisappear";iAd.ViewController.VIEW_DID_LOAD="viewControllerViewDidLoad";iAd.ViewController.VIEW_DID_UNLOAD="viewControllerViewDidUnload";iAd.ViewController.TRANSITION_IN_FROM_RIGHT={properties:["transform"],from:["translateX(100%)"],to:["translateX(0)"]};iAd.ViewController.TRANSITION_IN_FROM_LEFT={properties:["transform"],from:["translateX(-100%)"],to:["translateX(0)"]};iAd.ViewController.TRANSITION_OUT_TO_RIGHT={properties:["transform"],from:["translateX(0)"],to:["translateX(100%)"]};iAd.ViewController.TRANSITION_OUT_TO_LEFT={properties:["transform"],from:["translateX(0)"],to:["translateX(-100%)"]};iAd.ViewController.TRANSITION_DISSOLVE_OUT={properties:["opacity"],from:[1],to:[0]};iAd.ViewController.TRANSITION_DISSOLVE_IN={properties:["opacity"],from:[0],to:[1]};iAd.ViewController.DECLARATIVE_MIME_TYPE="application/vnd.apple.iadjs; type=view-controllers";iAd.ViewController.ARCHIVE_PREFIX=window.location.href+":";iAd.ViewController.VIEW_ARCHIVE_PREFIX=window.location.href+"-view:";iAd.ViewController.prototype.getView=function(){if(this._view){return this._view}if(this.viewWasArchived){var b=iAd.ViewController.VIEW_ARCHIVE_PREFIX+this.id;var a=window.localStorage[b];delete window.localStorage[b];this.viewWasArchived=false;this.view=iAd.Archiver.restoreWithJSONArchive(a)}if(this._view==null){this.loadView()}return this._view};iAd.ViewController.prototype.setView=function(b){if(this._view instanceof iAd.View){delete this._view._viewController}if(b==null){var a=this.shouldArchiveView;this.shouldArchiveView=false;this.unloadView();this.shouldArchiveView=a;return}if(this.__minimalViewLoadingTime>0){this.__loadViewStartTime=new Date()}b._viewController=this;this._view=b;var c=this.configuration;if(b.usesDeclarativeBacking&&b.layerHasCustomAttribute("ad-content-view")){if(!c.requiredFileURIs){c.requiredFileURIs={}}c.requiredFileURIs.contentView=b.getLayerCustomAttributeValue("ad-content-view")}if(c.requiredFileURIs&&c.requiredFileURIs.contentView){this.loadContentView()}else{if(c.requiredFileURIs&&!this.loadedAllRequiredFiles){this.shouldProcessViewUponRequestsCompleted=true;if(!this.loadingRequiredFiles){this.loadRequiredFiles()}}else{this.processView()}}};iAd.ViewController.prototype.setContentView=function(a){a.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT;this._contentView=a};iAd.ViewController.prototype.loadView=function(){this.view=new iAd.View()};iAd.ViewController.prototype.loadContentView=function(){if(this.loadingRequiredFiles){this.shouldSetUpContentViewUponLoad=true}else{if(this.loadedAllRequiredFiles){this.setupContentViewFromLayer()}else{this.shouldSetUpContentViewUponLoad=true;this.loadRequiredFiles()}}};iAd.ViewController.prototype.unloadView=function(){if(this._view==null||!this.isViewLoaded()){return}this.archiveView();this._contentView=null;this._view.removeFromSuperview();this.cleanViewProcessors();this._view=null;this.viewIsLoaded=false;this.viewDidUnload()};iAd.ViewController.prototype.archiveView=function(){if(!this.shouldArchiveView||!this._view||this._contentView){return}window.localStorage[iAd.ViewController.VIEW_ARCHIVE_PREFIX+this.id]=iAd.Archiver.archiveToJSON(this._view);this.viewWasArchived=true};iAd.ViewController.prototype.willEncodeObjectToArchive=function(a){this.archiveView();this.callSuper(a)};iAd.ViewController.prototype.archiveProperty=function(b){var a=this.callSuper(b);if(b=="configuration"){a.id=this.id}return a};iAd.ViewController.prototype.isViewLoading=function(){return(this.loadingRequiredFiles||(this.loadedAllRequiredFiles&&!this.viewIsLoaded))};iAd.ViewController.prototype.isViewLoaded=function(){return this.viewIsLoaded};iAd.ViewController.prototype.viewDidLoad=function(){this.createAndDispatchEvent(iAd.ViewController.VIEW_DID_LOAD)};iAd.ViewController.prototype.viewDidUnload=function(){this.createAndDispatchEvent(iAd.ViewController.VIEW_DID_UNLOAD)};iAd.ViewController.prototype.didReceiveMemoryWarning=function(){if(this.parentViewController==null&&this.isViewLoaded()&&!document.body.contains(this.view.layer)){this.unloadView()}};iAd.ViewController.prototype.setTitle=function(b){this._title=b;var a=this.parentViewController;if(a==null){return}else{if(iAd.Utils.objectIsInstanceOfClass(a,iAd.TabBarController)){this.tabBarItem.title=b}else{if(iAd.Utils.objectIsInstanceOfClass(a,iAd.NavigationController)){this.navigationItem.title=b}}}};iAd.ViewController.prototype.isInState=function(a){return this.view.layer.hasClassName(a)};iAd.ViewController.prototype.enterState=function(b){var a=this.view.layer.addClassName(b);if(a){this.dispatchNotification(iAd.ViewController.DID_ENTER_STATE,this.stateChangeDelegate,[["state",b]])}return a};iAd.ViewController.prototype.exitState=function(a){var b=this.view.layer.removeClassName(a);if(b){this.dispatchNotification(iAd.ViewController.DID_EXIT_STATE,this.stateChangeDelegate,[["state",a]])}return b};iAd.ViewController.prototype.toggleState=function(a,b){if(b==null){b=!this.isInState(a)}this[b?"enterState":"exitState"](a)};iAd.ViewController.prototype.enterExclusiveAppearanceState=function(d){var a;for(var b=0,c=iAd.ViewController.APPEARANCE_STATES.length;b<c;b++){a=iAd.ViewController.APPEARANCE_STATES[b];this[(a===d)?"enterState":"exitState"](a)}};iAd.ViewController.prototype.propagateViewAppearanceIfNotInState=function(e,a,d){var c=this.viewAppearancePropagationProperty;var b=c?this[c]:null;if(b&&!b.isInState(d)){b[e](a)}};iAd.ViewController.prototype.viewWillAppear=function(a){this.createAndDispatchEvent(iAd.ViewController.VIEW_WILL_APPEAR_EVENT,[["animated",a]]);this.enterExclusiveAppearanceState(iAd.ViewController.VIEW_WILL_APPEAR_STATE);this.propagateViewAppearanceIfNotInState("viewWillAppear",a,iAd.ViewController.VIEW_DID_APPEAR_STATE)};iAd.ViewController.prototype.viewDidAppear=function(a){this.enterExclusiveAppearanceState(iAd.ViewController.VIEW_DID_APPEAR_STATE);this.createAndDispatchEvent(iAd.ViewController.VIEW_DID_APPEAR_EVENT,[["animated",a]]);this.propagateViewAppearanceIfNotInState("viewDidAppear",a,iAd.ViewController.VIEW_DID_APPEAR_STATE)};iAd.ViewController.prototype.viewWillDisappear=function(a){this.createAndDispatchEvent(iAd.ViewController.VIEW_WILL_DISAPPEAR_EVENT,[["animated",a]]);this.enterExclusiveAppearanceState(iAd.ViewController.VIEW_WILL_DISAPPEAR_STATE);this.propagateViewAppearanceIfNotInState("viewWillDisappear",a,iAd.ViewController.VIEW_DID_DISAPPEAR_STATE)};iAd.ViewController.prototype.viewDidDisappear=function(a){this.enterExclusiveAppearanceState(iAd.ViewController.VIEW_DID_DISAPPEAR_STATE);this.createAndDispatchEvent(iAd.ViewController.VIEW_DID_DISAPPEAR_EVENT,[["animated",a]]);this.propagateViewAppearanceIfNotInState("viewDidDisappear",a,iAd.ViewController.VIEW_DID_DISAPPEAR_STATE);this.resetAllActionLists()};iAd.ViewController.prototype.presentModalViewControllerAnimated=function(b,a){this.modalViewController=b};iAd.ViewController.prototype.dismissModalViewControllerAnimated=function(a){this.modalViewController=null};iAd.ViewController.prototype.parentControllerOfKind=function(b){var a=this;while((a=a.parentViewController)){if(iAd.Utils.objectIsInstanceOfClass(a,b)){return a}}return null};iAd.ViewController.prototype.getLoadingRequiredFiles=function(){return(this.requiredFilesLoader&&this.requiredFilesLoader.loading)};iAd.ViewController.prototype.getLoadedAllRequiredFiles=function(){var a=this.requiredFilesLoader;return(a&&(a.loaded||a.length==0))};iAd.ViewController.prototype.loadRequiredFiles=function(){if(this.loadedAllRequiredFiles){return}if(!this.requiredFilesLoader){this.requiredFilesLoader=new iAd.ViewControllerRequiredFilesLoader(this)}this.dispatchNotification(iAd.ViewController.WILL_LOAD_REQUIRED_FILES,this.requiredFilesLoadDelegate);var a=this.requiredFilesLoader;if(a.length>0){a.load();this.notifyPropertyChange("loadingRequiredFiles")}else{this.dispatchNotification(iAd.ViewController.DID_LOAD_REQUIRED_FILES,this.requiredFilesLoadDelegate)}};iAd.ViewController.prototype.abortLoadRequiredFiles=function(){if(this.requiredFilesLoader.loading){this.requiredFilesLoader.abort()}};iAd.ViewController.prototype.handleEvent=function(a){};iAd.ViewController.prototype.setupContentViewFromLayer=function(){var a=iAd.Element.elementFromString(this.requiredFilesLoader.contentViewMarkup);this._view.hostingLayer.appendChild(a);if(!a.hasAttribute("id")){a.id=this.id}var b=iAd.View.viewForLayer(a);b.superview=this._view;b._indexInSuperviewSubviews=this._view.subviews.push(b)-1;this.contentView=b;if(b.declarativeLayerWasInitialized){this.processView()}else{b.addPropertyObserver("declarativeLayerWasInitialized",this,"processView")}};iAd.ViewController.prototype.requiredFilesLoaderDidProgress=function(a,c,b){if(b.loaded){this.dispatchNotification(iAd.ViewController.PROGRESS_LOADING_REQUIRED_FILES,this.requiredFilesLoadDelegate,[["progress",c],["url",b.url]])}else{if(b.error){iAd.Console.warn("iAd.ViewController — could not load required file with URI "+b.url)}}};iAd.ViewController.prototype.requiredFilesLoaderDidComplete=function(a){this.dispatchNotification(iAd.ViewController.DID_LOAD_REQUIRED_FILES,this.requiredFilesLoadDelegate);this.notifyPropertyChange("loadingRequiredFiles");if(this.shouldSetUpContentViewUponLoad){this.setupContentViewFromLayer()}else{if(this.shouldProcessViewUponRequestsCompleted){this.processView()}}};iAd.ViewController.prototype.requiredFilesLoaderDidFail=function(a,b){if(b!=iAd.Loader.LOAD_ABORTED){return}var e=[];var f=this.requiredFilesLoader.openLoaders;for(var c=0,d=f.length;c<d;c++){e.push(f[c].url)}this.notifyPropertyChange("loadingRequiredFiles");this.dispatchNotification(iAd.ViewController.DID_ABORT_LOAD_REQUIRED_FILES,this.requiredFilesLoadDelegate,[["uris",e]])};iAd.ViewController.prototype.processView=function(){if(!this._view.layer.hasAttribute("id")){this._view.id=this.id+((this.configuration.hasOwnProperty("requiredFileURIs")&&this.configuration.requiredFileURIs.hasOwnProperty("contentView"))?"-container":"")}this.viewProcessors=[];var d;for(var b=0,c=iAd.ViewController.viewProcessors.length;b<c;b++){d=new iAd.ViewController.viewProcessors[b](this);d.processView(this._view);this.viewProcessors.push(d)}if(this.__minimalViewLoadingTime>0){var a=(Date.now()-this.__loadViewStartTime)/1000;if(a<this.__minimalViewLoadingTime){this.callMethodNameAfterDelay("viewProcessingDidComplete",this.__minimalViewLoadingTime-a);return}}this.viewProcessingDidComplete()};iAd.ViewController.prototype.viewProcessingDidComplete=function(){if(!this.viewIsLoaded){this.viewIsLoaded=true;this.viewDidLoad()}this.viewWasProcessed=true};iAd.ViewController.prototype.cleanViewProcessors=function(){while(this.viewProcessors.length){this.viewProcessors.pop().cleanUp()}this.viewWasProcessed=false};iAd.ViewController.uniqueId=function(){return"vc-"+Math.floor(Math.random()*10000000000)};iAd.ViewController.addViewProcessor=function(a){iAd.ViewController.viewProcessors.push(a)};iAd.ViewController.init=function(){iAd.Class.processAllClasses();var c=document.scripts;var a;for(var b=0,d=c.length;b<d;b++){a=c[b];if(a.type==iAd.ViewController.DECLARATIVE_MIME_TYPE){iAd.ViewController.handleScriptElementForDeclarativeViewControllers(a)}}window.addEventListener("ADMemoryLevelWarning",iAd.ViewController.handleMemoryWarning,true);window.addEventListener("ADMemoryLevelUrgent",iAd.ViewController.handleMemoryWarning,true)};iAd.ViewController.handleScriptElementForDeclarativeViewControllers=function(c){if(c.src!=""){var b=new XMLHttpRequest();b._url=c.src;b.addEventListener("load",this.handleEventProxy,false);b.addEventListener("error",this.handleEventProxy,false);b.open("GET",b._url,true);b.send()}else{var a=Function("undefined","return ("+c.textContent+");")();setTimeout(function(){iAd.ViewController.handleDeclarativeViewControllerDefinitions(a)},0)}};iAd.ViewController.handleEventProxy=function(a){iAd.ViewController.handleEvent(a)};iAd.ViewController.handleEvent=function(c){var b=c.target;switch(c.type){case"load":var a=Function("undefined","return ("+b.responseText+");")();iAd.ViewController.handleDeclarativeViewControllerDefinitions(a);break;case"error":iAd.Console.error("Failed to read content from JSON file "+b._url);break}};iAd.ViewController.handleDeclarativeViewControllerDefinitions=function(b){if(iAd.Utils.objectIsArray(b)){for(var a=0,c=b.length;a<c;a++){iAd.ViewController.viewControllerWithConfiguration(b[a])}}else{iAd.ViewController.viewControllerWithConfiguration(b)}};iAd.ViewController.viewControllerWithConfiguration=function(a){if(iAd.ViewController.instances.hasOwnProperty(a.id)){return}return new (iAd.ViewController.constructorMap[a.type]||iAd.ViewController)(a)};iAd.ViewController.constructorMap={};iAd.ViewController.handleMemoryWarning=function(b){var c=iAd.ViewController.instances;for(var a in c){c[a].didReceiveMemoryWarning()}};iAd.ViewController.prototype.startAction=function(c){var d=iAd.Utils.resolveObjectPath(c.className);if(!d){throw iAd.ActionListManager.INVALID_CLASS_NAME_EXCEPTION}var e=new d(this);var b=c.properties;for(var a in b){e[a]=b[a]}if(c.delay){e.delay=c.delay}e.prepare();e.run()};iAd.ViewController.prototype.loadActionList=function(c){var a=c.name,b=c.cssClassName;if(!a){return}if(this.actionListManagersByName[a]){if(c.reset){this.cancelActionList(a)}delete this.actionListManagersByName[a]}if(c.actions.length>0){this.actionListByName[a]=c;if(b==null){c.cssClassName=b=a.replace(/\s+/g,"-").toLowerCase()}this.actionListNameByClassName[b]=a}};iAd.ViewController.prototype.startActionList=function(a){var b=this.actionListByName[a];if(!b){return}var c=this.actionListManagersByName[a];if(!c){this.actionListManagersByName[a]=c=new iAd.ActionListManager(b,this)}c.callMethodNameAfterDelay("start",0)};iAd.ViewController.prototype.cancelActionList=function(a){var b=this.actionListManagersByName[a];if(!b){return}b.reset()};iAd.ViewController.prototype.resetAllActionLists=function(){for(var a in this.actionListManagersByName){this.actionListManagersByName[a].reset()}};iAd.ViewController.prototype.hasActionList=function(a){return !!this.actionListByName[a]};iAd.ViewController.prototype.dispatchActionListNotification=function(a,b){this.notifyDelegate(a,this.transitionController,b);this.dispatchNotification(a,this.actionListDelegate,b)};iAd.ViewController.prototype.actionListWillStart=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_WILL_START,[["actionList",a]])};iAd.ViewController.prototype.actionListDidStart=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_START,[["actionList",a]])};iAd.ViewController.prototype.actionListWillIterate=function(c,a,b){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_WILL_ITERATE,[["actionList",a],["iteration",b]])};iAd.ViewController.prototype.actionListDidIterate=function(c,a,b){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_ITERATE,[["actionList",a],["iteration",b]])};iAd.ViewController.prototype.actionListWillComplete=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_WILL_COMPLETE,[["actionList",a]])};iAd.ViewController.prototype.actionListDidComplete=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_COMPLETE,[["actionList",a]])};iAd.ViewController.prototype.actionListDidCancel=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_CANCEL,[["actionList",a]])};iAd.ViewController.prototype.actionListDidProgress=function(d,b,c,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_PROGRESS,[["actionList",b],["action",c],["progress",a]])};iAd.ViewController.orientationDidChange=function(a){var b=this.instances;for(var c in b){b[c].didRotateFromInterfaceOrientation(a)}};iAd.ViewController.prototype.getInterfaceOrientation=function(){return iAd.Device.interfaceOrientation};iAd.ViewController.prototype.didRotateFromInterfaceOrientation=function(a){};iAd.ViewController.prototype.archive=function(){var a=iAd.ViewController.ARCHIVE_PREFIX+this.id;window.localStorage[a]=iAd.Archiver.archiveToJSON(this)};iAd.ViewController.restore=function(c){var b=iAd.ViewController.ARCHIVE_PREFIX+c;var a=window.localStorage[b];return a?iAd.Archiver.restoreWithJSONArchive(a):null};iAd.ViewController.clearArchives=function(){for(var a in window.localStorage){if(a.indexOf(iAd.ViewController.ARCHIVE_PREFIX)==0||a.indexOf(iAd.ViewController.VIEW_ARCHIVE_PREFIX)==0){delete window.localStorage[a]}}};iAd.ViewController.initialize=function(){iAd.ViewController.constructorMap[this.displayName]=this};iAd.View.prototype.containingViewController=function(){var a=this;while(a){if(a._viewController){return a._viewController}a=a.superview}};iAd.Class.processMethods(iAd.View,["containingViewController"]);window.addEventListener("DOMContentLoaded",iAd.ViewController.init,true);
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

(function viewControllerAnalytics(){iAd.Class.processMethod(iAd.ViewController,"init");var a=iAd.ViewController.prototype.init;iAd.ViewController.prototype.init=function(c){a.apply(this,arguments);var b=this.configuration.analytics;if(b){iAd.Analytics.processAnalyticsWithConfiguration(b)}}}());
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.ViewController.prototype.setPageState=function(a){var b=this._pageState;if(b==a){return}if(b!=null){if(b=="ad-normal-4-inch"){this.exitState("ad-normal")}if(b=="ad-landscape-4-inch"){this.exitState("ad-landscape")}this.exitState(b)}this._pageState=a;if(a!=null){if(a=="ad-normal-4-inch"){this.enterState("ad-normal")}if(a=="ad-landscape-4-inch"){this.enterState("ad-landscape")}this.enterState(a)}};iAd.ViewController.prototype.startActionListWithSourceView=function(b,a){var c=this.actionListByName[b];if(!c){return}var d=this.actionListManagersByName[b];if(!d){this.actionListManagersByName[b]=d=new iAd.ActionListManager(c,this)}d.sourceView=a;d.callMethodNameAfterDelay("start",0)};iAd.ViewController.prototype.startActionList=function(a){this.startActionListWithSourceView(a,undefined)};iAd.ViewController.prototype.startActionWithSourceView=function(d,a){var e=iAd.Utils.resolveObjectPath(d.className);if(!e){throw iAd.ActionListManager.INVALID_CLASS_NAME_EXCEPTION}var f=new e(this);var c=d.properties;for(var b in c){f[b]=c[b]}if(d.delay){f.delay=d.delay}f.prepare();f.sourceView=a;f.run()};iAd.ViewController.prototype.actionListDidResetAnimation=function(f,h){var k=h.split(","),m=k.length;if(m==0){return}var g,d,l=[];for(var c in this.actionListManagersByName){d=this.actionListManagersByName[c];if(d!=f){l.push(d)}}var b=l.length;if(b==0){return}var e,a={type:"webkitAnimationEnd",animationName:""};for(g=0;g<m;g++){a.animationName=k[g];for(e=0;e<b;e++){l[e].handleEvent(a)}}};(function(){if(iAP.Context.IS_IBOOKS){var a=iAd.ViewController.handleDeclarativeViewControllerDefinitions;iAd.ViewController.handleDeclarativeViewControllerDefinitions=function(c){var b=iAd.RootViewController.sharedRootViewController.initialViewControllerID;iAd.RootViewController.sharedRootViewController.initialViewControllerID=iAP.iBooksLoadingViewController.VIEW_CONTROLLER_ID;if(!iAd.Utils.objectIsArray(c)){c=[c]}var d={id:iAP.iBooksLoadingViewController.VIEW_CONTROLLER_ID,actionLists:[],hasHiDPIVersion:true,properties:{nextViewControllerID:b},requiredFileURIs:{images:["Default.png"]},type:"iAP.iBooksLoadingViewController"};c.push(d);a(c)}}})();
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.RootView",superclass:iAd.View,synthesizedProperties:["disablesDefaultScrolling","scrollsHorizontally","scrollsVertically"],archivedProperties:["disablesDefaultScrolling","scrollsHorizontally","scrollsVertically"],cssClassName:"ad-root-view"});iAd.RootView.prototype.init=function(a){this.callSuper(a);if(this.layer===document.body){this.layerIsInDocument=true;this._size=new iAd.Size(window.innerWidth,window.innerHeight);this.layer.removeClassName("ad-view");window.addEventListener(iAd.Device.iOS_VERSION?"orientationchange":"resize",this,true)}this._scrollsHorizontally=false;this._scrollsVertically=true;this.disablesDefaultScrolling=true;iAd.RootView.sharedRoot=this};iAd.RootView.prototype.createLayer=function(){this.layer=document.body};iAd.RootView.prototype.setDisablesDefaultScrolling=function(a){this._disablesDefaultScrolling=a;this.updateSize();if(!iAd.HostScrollView){this.layer[a?"addEventListener":"removeEventListener"](iAd.Event.MOVE_EVENT,iAd.Event.preventDefault,false)}};iAd.RootView.prototype.handleEvent=function(a){this.callSuper(a);if(a.type=="resize"||a.type=="orientationchange"){this.updateSize();if(this._disablesDefaultScrolling){window.scrollTo(0,0)}}};iAd.RootView.prototype.updateSize=function(){if(this.layer!==document.body){return}if(this._disablesDefaultScrolling){this.size=new iAd.Size(window.innerWidth,window.innerHeight)}else{this._size=new iAd.Size(document.body.offsetWidth,document.body.offsetHeight);this.notifyPropertyChange("size")}};iAd.RootView._sharedRoot=null;Object.defineProperty(iAd.RootView,"sharedRoot",{get:function(){if(iAd.RootView._sharedRoot==null){iAd.RootView._sharedRoot=new iAd.RootView()}return iAd.RootView._sharedRoot},set:function(a){iAd.RootView._sharedRoot=a}});iAd.RootView.init=function(){document.body.addClassName(iAd.Device.HAS_HIDPI_DISPLAY?"ad-HiDPI":"ad-LoDPI");if(iAd.Device.IS_IPAD){document.body.addClassName("ad-iPad")}if(iAd.RootView._sharedRoot==null){var a=document.querySelector("."+iAd.RootView.cssClassName);if(a!=null){iAd.RootView._sharedRoot=new iAd.RootView(a)}}};window.addEventListener("DOMContentLoaded",iAd.RootView.init,true);
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

(function(){iAd.Class.processMethod(iAd.RootView,"init");var a=iAd.RootView.prototype.init;iAd.RootView.prototype.init=function(d){a.apply(this,arguments);if(iAP.Context.projectIsOfType("iTunesProject")){this._size=new iAd.Size(1280,720)}else{if(iAP.Context.IS_SAFARI){var e=document.body.offsetWidth,c=document.body.offsetHeight;this._size=new iAd.Size(e,c);iAd.Device.HAS_4_INCH_DISPLAY=e==568||c==568}}if(iAP.Context.IS_IAD_PRODUCER||iAP.Context.IS_SAFARI){window.removeEventListener("resize",this,true)}};iAd.Class.processMethod(iAd.RootView,"updateSize");var b=iAd.RootView.prototype.updateSize;iAd.RootView.prototype.updateSize=function(){var c=this;setTimeout(function(){if(iAP.Context.IS_SAFARI){c._size=new iAd.Size(document.body.offsetWidth,document.body.offsetHeight);c.notifyPropertyChange("size")}else{b.apply(c)}},0)};iAd.RootView.prototype.setIsLandscape=function(f){if(iAP.Context.projectIsOfType("iTunesProject")){return}var e=this.size.width,c=this.size.height,d=e>c;if(d!=f){this.size=new iAd.Size(c,e)}}})();
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.RootViewController",superclass:iAd.ViewController,archivedProperties:["navigationController"]});iAd.RootViewController.ID="root";iAd.RootViewController.prototype.init=function(b){b=b||{};b.id=iAd.RootViewController.ID;if(b.requiredFileURIs){delete b.requiredFileURIs.contentView}this.callSuper(b);this.openBeginIgnoringInteractionEventsCalls=0;this.shouldArchiveView=false;iAd.RootViewController.sharedRootViewController=this;var a=this.view};iAd.RootViewController.prototype.loadView=function(){this.view=iAd.RootView.sharedRoot};iAd.RootViewController.prototype.archiveProperty=function(a){if(a=="navigationController"){return this._navigationController}else{return this.callSuper(a)}};iAd.RootViewController.prototype.beginIgnoringInteractionEvents=function(){this.openBeginIgnoringInteractionEventsCalls++;if(this.openBeginIgnoringInteractionEventsCalls==1){this.view.layer.style.pointerEvents="none"}};iAd.RootViewController.prototype.endIgnoringInteractionEvents=function(){if(this.openBeginIgnoringInteractionEventsCalls==0){return}this.openBeginIgnoringInteractionEventsCalls--;if(this.openBeginIgnoringInteractionEventsCalls==0){this.view.layer.style.pointerEvents="auto"}};iAd.RootViewController.prototype.isIgnoringInteractionEvents=function(){return(this.openBeginIgnoringInteractionEventsCalls>0)};Object.defineProperty(iAd.RootViewController,"sharedRootViewController",{get:function(){if(!iAd.RootViewController.hasOwnProperty("_sharedRootViewController")){var a=new iAd.RootViewController()}return iAd.RootViewController._sharedRootViewController},set:function(a){iAd.RootViewController._sharedRootViewController=a}});
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Transaction={transitions:[],openTransactions:0,defaults:{},defaultsStates:[]};iAd.Transaction.begin=function(){if(this.openTransactions==0){this.transitions=[];this.defaults={}}else{var a={};iAd.Utils.copyPropertiesFromSourceToTarget(this.defaults,a);this.defaultsStates.push(a)}this.openTransactions++};iAd.Transaction.addTransition=function(b){for(var a in this.defaults){if(b[a]==null){b[a]=this.defaults[a]}}this.transitions.push(b)};iAd.Transaction.commit=function(){if(this.openTransactions==0){return}this.openTransactions--;if(this.openTransactions!=0){this.defaults=this.defaultsStates.pop();return}var c=this.transitions;for(var a=0,b=c.length;a<b;a++){c[a].applyFromState()}iAd.CSS.flushPendingUpdates();setTimeout(function(){while(c.length){c.pop().applyToState()}},0)};iAd.Utils.setupDisplayNames(iAd.Transaction,"iAd.Transaction");
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.TransitionController",superclass:iAd.ViewController,synthesizedProperties:["visibleViewController","cachedViewControllers","loadingViewController"],archivedProperties:["visibleViewController","previouslyVisibleViewController","loadingViewController","loadingViewControllerMinimumDisplayTime"]});iAd.TransitionController.WILL_MAKE_VIEW_CONTROLLER_VISIBLE="transitionControllerWillMakeViewControllerVisibleAnimated";iAd.TransitionController.DID_MAKE_VIEW_CONTROLLER_VISIBLE="transitionControllerDidMakeViewControllerVisibleAnimated";iAd.TransitionController.VIEW_IS_VISIBLE_STATE="ad-transition-controller-visible";iAd.TransitionController.VIEW_IS_HIDDEN_STATE="ad-transition-controller-hidden";iAd.TransitionController.VIEW_BUILDS_IN_STATE="ad-view-builds-in";iAd.TransitionController.VIEW_BUILDS_OUT_STATE="ad-view-builds-out";iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS="ad-view-builds-in-action-list";iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS="ad-view-builds-out-action-list";iAd.TransitionController.VIEW_IDLE_STATE="ad-view-is-idle";iAd.TransitionController.DEFAULT_TRANSITION_DURATION=0.35;iAd.TransitionController.WAITING_ON_DISPLAY_CSS_CLASS="ad-waiting-on-display";iAd.TransitionController.prototype.init=function(b,a){this.callSuper(b);this._cachedViewControllers=[];this._visibleViewController=null;this._loadingViewController=null;this.loadingViewControllerMinimumDisplayTime=0;this.loadingViewControllerVisible=false;this.delegate=null;this.hidesLoadingViewControllerWithTransition=true;this.previouslyVisibleViewController=null;this.busy=false;if(a!=undefined){this.visibleViewController=a}};iAd.TransitionController.prototype.loadView=function(){this.view=new iAd.TransitionControllerView()};iAd.TransitionController.prototype.setCachedViewControllers=function(c){var a;var e=this._cachedViewControllers;for(var b=0,d=e.length;b<d;b++){a=e[b];if(a!==this._visibleViewController&&c.indexOf(a)==-1){a.view.removeFromSuperview()}}for(b=0,d=c.length;b<d;b++){a=c[b];if(a!==this._visibleViewController&&e.indexOf(a)==-1){this.attachViewController(a)}}this._cachedViewControllers=c.slice()};iAd.TransitionController.prototype.attachViewController=function(b){var a=b.view;a.layer.addClassName(iAd.TransitionController.WAITING_ON_DISPLAY_CSS_CLASS);if(a.superview!==this._view){this._view.addSubview(a)}};iAd.TransitionController.prototype.setVisibleViewController=function(a){this.setVisibleViewControllerAnimated(a,false)};iAd.TransitionController.prototype.setVisibleViewControllerAnimated=function(b,a){if(this.busy||this._visibleViewController===b){return}iAd.RootViewController.sharedRootViewController.beginIgnoringInteractionEvents();this.transitionIsDelayedByPreviouslyVisibleViewController=false;this.previouslyVisibleViewController=this._visibleViewController;this._visibleViewController=b;if(b){b._transitionController=this}if(this.previouslyVisibleViewController!=null){this.previouslyVisibleViewController.viewWillDisappear(a);this.transitionIsDelayedByPreviouslyVisibleViewController=this.prepareToHideViewController(this.previouslyVisibleViewController);iAd.SpatialNavigationManager.sharedManager.unregisterSubtree(this.previouslyVisibleViewController.view.layer)}if(b==null){this.performTransitionToViewController(b,a);return}this.attachViewController(b);this.nextVisibleViewController=b;this.willUseAnimationToTransitionToNextVisibleViewController=a;if(!this.transitionIsDelayedByPreviouslyVisibleViewController){this.previousViewControllerDidUnblockTransitions()}if(!b.isViewLoaded()){b.addPropertyObserver("viewWasProcessed",this,"viewControllerFinishedProcessingView")}};iAd.TransitionController.prototype.performTransitionToViewController=function(c,b){if(c!=null){c.viewWillAppear(b)}this.dispatchNotification(iAd.TransitionController.WILL_MAKE_VIEW_CONTROLLER_VISIBLE,this.delegate,[["newlyVisibleViewController",c],["previouslyVisibleViewController",this.previouslyVisibleViewController],["animated",b]]);if(c!=null){this.prepareToShowViewController(c)}iAd.Transaction.begin();var d,a=null;this.busy=b;iAd.Transaction.begin();iAd.Transaction.defaults.duration=b?iAd.TransitionController.DEFAULT_TRANSITION_DURATION:0;if(this.previouslyVisibleViewController!=null){d=b?this.previouslyVisibleViewController.becomesHiddenTransition:null;if(d!=null){d=this.viewForTransition(this.previouslyVisibleViewController).applyTransition(d,false)}}if(c!=null){a=b?c.becomesVisibleTransition:null;if(a!=null){a=this.viewForTransition(c).applyTransition(a,false)}}if(a instanceof iAd.Transition){a.delegate=this}else{if(d instanceof iAd.Transition){d.delegate=this}else{b=false}}iAd.Transaction.commit();if(c!=null){if(a){setTimeout(function(){c.view.layer.removeClassName(iAd.TransitionController.WAITING_ON_DISPLAY_CSS_CLASS)},0)}else{c.view.layer.removeClassName(iAd.TransitionController.WAITING_ON_DISPLAY_CSS_CLASS)}iAd.SpatialNavigationManager.sharedManager.registerSubtree(c.view.layer)}if(this.hidesLoadingViewControllerWithTransition){this.hideLoadingViewController()}iAd.Transaction.commit();if(!b){this.transitionDidComplete()}};iAd.TransitionController.prototype.performBuildInToViewController=function(b){if(!b.shouldPlayBuildInActionList){return}var a=b.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS];if(a){b.enterState(iAd.TransitionController.VIEW_BUILDS_IN_STATE);b.callMethodNameAfterDelay("startActionList",0,a);if(b.buildInActionListShouldOnlyPlayOnce){b.shouldPlayBuildInActionList=false}}};iAd.TransitionController.prototype.performBuildOutToViewController=function(b){if(!b.shouldPlayBuildOutActionList){return false}var a=b.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS];if(a){b.enterState(iAd.TransitionController.VIEW_BUILDS_OUT_STATE);b.startActionList(a);if(b.buildOutActionListShouldOnlyPlayOnce){b.shouldPlayBuildOutActionList=false}if(b.buildOutActionListShouldDelayTransition){return true}}return false};iAd.TransitionController.prototype.prepareToHideViewController=function(a){var b=false;a.exitState(iAd.TransitionController.VIEW_IS_VISIBLE_STATE);a.enterState(iAd.TransitionController.VIEW_IS_HIDDEN_STATE);a.exitState(iAd.TransitionController.VIEW_IDLE_STATE);b=this.performBuildOutToViewController(a);return b};iAd.TransitionController.prototype.prepareToShowViewController=function(a){a.exitState(iAd.TransitionController.VIEW_BUILDS_OUT_STATE);a.exitState(iAd.TransitionController.VIEW_IS_HIDDEN_STATE);a.enterState(iAd.TransitionController.VIEW_IS_VISIBLE_STATE);a.exitState(iAd.TransitionController.VIEW_IDLE_STATE);if(!a.buildInActionListShouldOccurAfterTransition){this.performBuildInToViewController(a)}};iAd.TransitionController.prototype.viewControllerActionListDidComplete=function(d,a){if(!d.isInState(iAd.TransitionController.VIEW_BUILDS_IN_STATE)&&!d.isInState(iAd.TransitionController.VIEW_BUILDS_OUT_STATE)){return}var c=a.cssClassName;if(c===iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS){d.exitState(iAd.TransitionController.VIEW_BUILDS_OUT_STATE);if(this.transitionIsDelayedByPreviouslyVisibleViewController){this.transitionIsDelayedByPreviouslyVisibleViewController=false;this.previousViewControllerDidUnblockTransitions()}else{if(d===this._loadingViewController){var b=(d.becomesHiddenTransition!=null);this.detachLoadingViewControllerAnimated(b);if(d.buildOutActionListShouldDelayTransition){this.showNextViewControllerIfReady()}}}}else{if(c===iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS){d.exitState(iAd.TransitionController.VIEW_BUILDS_IN_STATE);if(!this.busy){d.enterState(iAd.TransitionController.VIEW_IDLE_STATE);if(d===this._loadingViewController){this.showNextViewControllerIfReady()}}}}};iAd.TransitionController.prototype.viewControllerFinishedProcessingView=function(b,a){b.removePropertyObserver("viewWasProcessed",this);this.showNextViewControllerIfReady()};iAd.TransitionController.prototype.previousViewControllerDidUnblockTransitions=function(){var a=this.nextVisibleViewController;var b=a.viewLoadingDelaysTransition&&!a.isViewLoaded();if(!a.disableLoadingViewController&&this._loadingViewController&&b){this.showLoadingViewController();return}if(!b){this.performTransitionToViewController(a,this.willUseAnimationToTransitionToNextVisibleViewController)}};iAd.TransitionController.prototype.viewForTransition=function(b){var a=b.view;if(a.size.equals(iAd.Size.ZERO_SIZE)&&b.contentView!=null){a=b.contentView}return a};iAd.TransitionController.prototype.viewControllerViewDidAppear=function(b,a){if(b.buildInActionListShouldOccurAfterTransition){this.performBuildInToViewController(b)}b.viewDidAppear(a)};iAd.TransitionController.prototype.viewControllerViewDidDisappear=function(b,a){b.viewDidDisappear(a)};iAd.TransitionController.prototype.contentTransitionDidComplete=function(b){iAd.RootViewController.sharedRootViewController.endIgnoringInteractionEvents();var a=this._wasAnimatedTransition=this.busy;if(this.previouslyVisibleViewController!=null){if(this._cachedViewControllers.indexOf(this.previouslyVisibleViewController)==-1){this.previouslyVisibleViewController.view.removeFromSuperview()}else{this.previouslyVisibleViewController.view.layer.addClassName(iAd.TransitionController.WAITING_ON_DISPLAY_CSS_CLASS)}this.viewControllerViewDidDisappear(this.previouslyVisibleViewController,a)}if(this._visibleViewController!=null){if(this.loadingViewControllerVisible&&!this.hidesLoadingViewControllerWithTransition){this.hideLoadingViewController()}else{this.notifyVisibleViewControllerDidAppear()}}this.busy=false;this.dispatchNotification(iAd.TransitionController.DID_MAKE_VIEW_CONTROLLER_VISIBLE,this.delegate,[["newlyVisibleViewController",this._visibleViewController],["previouslyVisibleViewController",this.previouslyVisibleViewController],["animated",a]])};iAd.TransitionController.prototype.notifyVisibleViewControllerDidAppear=function(){var a=this._visibleViewController;if(a.isInState(iAd.ViewController.VIEW_DID_APPEAR_STATE)&&!iAd.TransitionController.__forceNotifyVisibleViewControllerDidAppear){return}this.viewControllerViewDidAppear(a,this._wasAnimatedTransition);this._wasAnimatedTransition=false;var b=a.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS];if(!b||!a.isInState(iAd.TransitionController.VIEW_BUILDS_IN_STATE)){a.enterState(iAd.TransitionController.VIEW_IDLE_STATE)}};iAd.TransitionController.prototype.setLoadingViewController=function(a){if(this.loadingViewControllerVisible){return}if(a&&!a.isViewLoading()&&!a.isViewLoaded()){this.attachViewController(a)}this._loadingViewController=a;if(a){a._transitionController=this}};iAd.TransitionController.prototype.showLoadingViewController=function(){if(this.loadingViewControllerVisible||this._loadingViewController==null){return}var c=this._loadingViewController;var b=c.view;var a=(c.becomesVisibleTransition!=null);c.view.layer.removeClassName(iAd.TransitionController.WAITING_ON_DISPLAY_CSS_CLASS);c.viewWillAppear(a);this.prepareToShowViewController(this._loadingViewController);if(a){b.size=this._view.size.copy();b.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT;var d=b.applyTransition(c.becomesVisibleTransition,false);d.delegate=this}this._view.addSubview(b);this.loadingViewControllerVisible=true;if(this.loadingViewControllerMinimumDisplayTime>0){this.loadingViewDisplayTime=new Date();this.callMethodNameAfterDelay("showNextViewControllerIfReady",this.loadingViewControllerMinimumDisplayTime)}if(!a){this.viewControllerViewDidAppear(c,false);this.showNextViewControllerIfReady()}};iAd.TransitionController.prototype.hideLoadingViewController=function(){if(!this.loadingViewControllerVisible){return}var b=this._loadingViewController;if(b.isInState(iAd.ViewController.VIEW_WILL_DISAPPEAR_STATE)){return}var a=(b.becomesHiddenTransition!=null);b.viewWillDisappear(a);this.prepareToHideViewController(b);var c=b.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS];if(!c){this.detachLoadingViewControllerAnimated(a)}};iAd.TransitionController.prototype.detachLoadingViewControllerAnimated=function(b){var a=this._loadingViewController;if(b){var c=a.view.applyTransition(a.becomesHiddenTransition,false);c.delegate=this}else{a.view.removeFromSuperview();this.viewControllerViewDidDisappear(a,false)}this.loadingViewControllerVisible=false};iAd.TransitionController.prototype.loadingViewControllerTransitionDidComplete=function(a){if(this.loadingViewControllerVisible){this.viewControllerViewDidAppear(this._loadingViewController,true);this.showNextViewControllerIfReady()}else{this._loadingViewController.view.removeFromSuperview();this.viewControllerViewDidDisappear(this._loadingViewController,true);if(!this.hidesLoadingViewControllerWithTransition){this.notifyVisibleViewControllerDidAppear()}}};iAd.TransitionController.prototype.showNextViewControllerIfReady=function(){if(this.transitionIsDelayedByPreviouslyVisibleViewController){return}if(this.loadingViewControllerVisible){var c=this._loadingViewController;if(c.isInState(iAd.TransitionController.VIEW_BUILDS_IN_STATE)||c.isInState(iAd.ViewController.VIEW_WILL_APPEAR_STATE)){return}if(this.loadingViewControllerMinimumDisplayTime>0){var a=(Date.now()-this.loadingViewDisplayTime)/1000;if(a<this.loadingViewControllerMinimumDisplayTime){return}}if(this.hidesLoadingViewControllerWithTransition){var d=c.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS];if(d&&c.buildOutActionListShouldDelayTransition){this.hideLoadingViewController();return}}}var b=this.nextVisibleViewController;if(b&&b.viewLoadingDelaysTransition&&!b.isViewLoaded()){return}if(b.isInState(iAd.ViewController.VIEW_WILL_APPEAR_STATE)||b.isInState(iAd.ViewController.VIEW_DID_APPEAR_STATE)){return}this.performTransitionToViewController(b,this.willUseAnimationToTransitionToNextVisibleViewController)};iAd.TransitionController.prototype.transitionDidComplete=function(a){if(a&&this._loadingViewController!=null&&a.target===this._loadingViewController.view){this.loadingViewControllerTransitionDidComplete(a)}else{this.contentTransitionDidComplete(a)}};iAd.Class({name:"iAd.TransitionControllerView",superclass:iAd.View,cssClassName:"ad-transition-controller-view"});iAd.TransitionControllerView.prototype.init=function(a){this.callSuper(a);this.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT};iAd.TransitionControllerView.prototype.willMoveToSuperview=function(a){this.callSuper(a);if(a!=null&&this._size.equals(iAd.Size.ZERO_SIZE)){this.size=a.size.copy()}};iAd.ViewController.prototype.getTransitionController=function(){return this._transitionController||this.parentControllerOfKind(iAd.TransitionController)};iAd.Class.synthesizeProperties(iAd.ViewController,["transitionController"]);iAd.RootViewController.prototype.getTransitionController=function(){if(!this.hasOwnProperty("_transitionController")){var b=iAd.RootView.sharedRoot;var a=new iAd.TransitionController();a.view.size=b.size.copy();a.delegate=this;b.addSubview(a.view,0);this._transitionController=a}return this._transitionController};iAd.Class.synthesizeProperties(iAd.RootViewController,["transitionController"]);
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.TransitionController.prototype.setLoadingViewController=function(a){if(this.loadingViewControllerVisible){return}this._loadingViewController=a;if(a){a._transitionController=this}};iAd.TransitionController.prototype.transitionDidComplete=function(a){if(a&&this._loadingViewController!=null&&a.target===this._loadingViewController._view){this.loadingViewControllerTransitionDidComplete(a)}else{this.contentTransitionDidComplete(a)}};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.View.TRANSITION_DISSOLVE_OUT={properties:["opacity"],from:[1],to:[0]};iAd.View.TRANSITION_DISSOLVE_IN={properties:["opacity"],from:[0],to:[1]};iAd.View.TRANSITION_ZOOM_IN={properties:["opacity","transform"],from:[0,"scale(0.2)"],to:[1,"scale(1)"]};iAd.View.TRANSITION_ZOOM_OUT={properties:["opacity","transform"],from:[0,"scale(1.2)"],to:[1,"scale(1)"]};iAd.View.TRANSITION_CROSS_SPIN_RIGHT={properties:["opacity","transform"],from:[0,"rotate(20deg)"],to:[1,"rotate(0)"]};iAd.View.TRANSITION_CROSS_SPIN_LEFT={properties:["opacity","transform"],from:[0,"rotate(-20deg)"],to:[1,"rotate(0)"]};iAd.View.TRANSITION_FLIP_LEFT_OUT={properties:["transform"],from:["perspective(800) rotateY(0deg) translateZ(0)"],to:["perspective(800) rotateY(-180deg) translateZ(1px)"]};iAd.View.TRANSITION_FLIP_LEFT_IN={properties:["transform"],from:["perspective(800) rotateY(180deg) translateZ(1px)"],to:["perspective(800) rotateY(0deg) translateZ(0)"]};iAd.View.TRANSITION_FLIP_RIGHT_OUT={properties:["transform"],from:["perspective(800) rotateY(0deg) translateZ(0)"],to:["perspective(800) rotateY(180deg) translateZ(1px)"]};iAd.View.TRANSITION_FLIP_RIGHT_IN={properties:["transform"],from:["perspective(800) rotateY(-180deg) translateZ(1px)"],to:["perspective(800) rotateY(0deg) translateZ(0)"]};iAd.View.TRANSITION_CUBE_LEFT_OUT=function(a){var b=-a.size.width/2;return{base:["anchorPoint",new iAd.Point(0.5,0.5),"anchorPointZ",b],properties:["transform"],from:["perspective(800) translateZ("+b+"px) rotateY(0deg)"],to:["perspective(800) translateZ("+b+"px) rotateY(-90deg)"]}};iAd.View.TRANSITION_CUBE_LEFT_IN=function(a){var b=-a.size.width/2;return{base:["anchorPoint",new iAd.Point(0.5,0.5),"anchorPointZ",b],properties:["transform"],from:["perspective(800) translateZ("+b+"px) rotateY(90deg)"],to:["perspective(800) translateZ("+b+"px) rotateY(0deg)"]}};iAd.View.TRANSITION_CUBE_RIGHT_OUT=function(a){var b=-a.size.width/2;return{base:["anchorPoint",new iAd.Point(0.5,0.5),"anchorPointZ",b],properties:["transform"],from:["perspective(800) translateZ("+b+"px) rotateY(0deg)"],to:["perspective(800) translateZ("+b+"px) rotateY(90deg)"]}};iAd.View.TRANSITION_CUBE_RIGHT_IN=function(a){var b=-a.size.width/2;return{base:["anchorPoint",new iAd.Point(0.5,0.5),"anchorPointZ",b],properties:["transform"],from:["perspective(800) translateZ("+b+"px) rotateY(-90deg)"],to:["perspective(800) translateZ("+b+"px) rotateY(0deg)"]}};iAd.View.TRANSITION_DOOR_OPEN_LEFT_OUT={base:["anchorPoint",new iAd.Point(0,0.5)],properties:["transform"],from:["perspective(800) rotateY(0deg)"],to:["perspective(800) rotateY(-90deg)"]};iAd.View.TRANSITION_DOOR_CLOSE_LEFT_IN={base:["anchorPoint",new iAd.Point(0,0.5)],properties:["transform"],from:["perspective(800) rotateY(-90deg)"],to:["perspective(800) rotateY(0deg)"]};iAd.View.TRANSITION_DOOR_OPEN_RIGHT_OUT={base:["anchorPoint",new iAd.Point(1,0.5)],properties:["transform"],from:["perspective(800) rotateY(0deg)"],to:["perspective(800) rotateY(90deg)"]};iAd.View.TRANSITION_DOOR_CLOSE_RIGHT_IN={base:["anchorPoint",new iAd.Point(1,0.5)],properties:["transform"],from:["perspective(800) rotateY(90deg)"],to:["perspective(800) rotateY(0deg)"]};iAd.View.TRANSITION_REVOLVE_TOWARDS_LEFT_OUT={base:["anchorPoint",new iAd.Point(0,0.5)],properties:["transform","opacity"],from:["perspective(800) rotateY(0deg)",1],to:["perspective(800) rotateY(-90deg)",0]};iAd.View.TRANSITION_REVOLVE_TOWARDS_LEFT_IN={base:["anchorPoint",new iAd.Point(0,0.5)],properties:["transform"],from:["perspective(800) rotateY(90deg)"],to:["perspective(800) rotateY(0deg)"]};iAd.View.TRANSITION_REVOLVE_AWAY_LEFT_OUT={base:["anchorPoint",new iAd.Point(0,0.5)],properties:["transform"],from:["perspective(800) rotateY(0deg)"],to:["perspective(800) rotateY(90deg)"]};iAd.View.TRANSITION_REVOLVE_AWAY_LEFT_IN={base:["anchorPoint",new iAd.Point(0,0.5)],properties:["transform","opacity"],from:["perspective(800) rotateY(-90deg)",0],to:["perspective(800) rotateY(0deg)",1]};iAd.View.TRANSITION_REVOLVE_TOWARDS_RIGHT_OUT={base:["anchorPoint",new iAd.Point(1,0.5)],properties:["transform","opacity"],from:["perspective(800) rotateY(0deg)",1],to:["perspective(800) rotateY(90deg)",0]};iAd.View.TRANSITION_REVOLVE_TOWARDS_RIGHT_IN={base:["anchorPoint",new iAd.Point(1,0.5)],properties:["transform"],from:["perspective(800) rotateY(-90deg)"],to:["perspective(800) rotateY(0deg)"]};iAd.View.TRANSITION_REVOLVE_AWAY_RIGHT_OUT={base:["anchorPoint",new iAd.Point(1,0.5)],properties:["transform"],from:["perspective(800) rotateY(0deg)"],to:["perspective(800) rotateY(-90deg)"]};iAd.View.TRANSITION_REVOLVE_AWAY_RIGHT_IN={base:["anchorPoint",new iAd.Point(1,0.5)],properties:["transform","opacity"],from:["perspective(800) rotateY(90deg)",0],to:["perspective(800) rotateY(0deg)",1]};iAd.View.TRANSITION_SPIN_LEFT_OUT={properties:["transform","opacity"],from:["perspective(800) rotate(0)",1],to:["perspective(800) rotate(180deg)",0]};iAd.View.TRANSITION_SPIN_LEFT_IN={base:["zIndex",1],properties:["transform","opacity"],from:["perspective(800) rotate(-180deg)",0],to:["perspective(800) rotate(0)",1]};iAd.View.TRANSITION_SPIN_RIGHT_OUT={properties:["transform","opacity"],from:["perspective(800) rotate(0)",1],to:["perspective(800) rotate(-180deg)",0]};iAd.View.TRANSITION_SPIN_RIGHT_IN={base:["zIndex",1],properties:["transform","opacity"],from:["perspective(800) rotate(180deg)",0],to:["perspective(800) rotate(0)",1]};iAd.View.TRANSITION_SCALE_IN={base:["zIndex",1],properties:["transform"],from:["scale(0.01)"],to:["scale(1)"]};iAd.View.TRANSITION_SCALE_OUT={base:["zIndex",1],properties:["transform"],from:["scale(1)"],to:["scale(0.01)"]};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.View.TRANSITION_DOOR_OPEN_LEFT_TOP_OUT=function(a){var b=Math.max(800,a.size.width*1.5);return{base:["anchorPoint",new iAd.Point(0,0.5),"zIndex",1],properties:["transform"],from:["perspective("+b+") translateZ(1px) rotateY(0deg)"],to:["perspective("+b+") translateZ(1px) rotateY(-90deg)"]}};iAd.View.TRANSITION_DOOR_CLOSE_LEFT_TOP_IN=function(a){var b=Math.max(800,a.size.width*1.5);return{base:["anchorPoint",new iAd.Point(0,0.5),"zIndex",1],properties:["transform"],from:["perspective("+b+") translateZ(1px) rotateY(-90deg)"],to:["perspective("+b+")  translateZ(1px) rotateY(0deg)"]}};iAd.View.TRANSITION_DOOR_OPEN_RIGHT_TOP_OUT=function(a){var b=Math.max(800,a.size.width*1.5);return{base:["anchorPoint",new iAd.Point(1,0.5),"zIndex",1],properties:["transform"],from:["perspective("+b+") translateZ(1px) rotateY(0deg)"],to:["perspective("+b+") translateZ(1px) rotateY(90deg)"]}};iAd.View.TRANSITION_DOOR_CLOSE_RIGHT_TOP_IN=function(a){var b=Math.max(800,a.size.width*1.5);return{base:["anchorPoint",new iAd.Point(1,0.5),"zIndex",1],properties:["transform"],from:["perspective("+b+") translateZ(1px) rotateY(90deg)"],to:["perspective("+b+") translateZ(1px) rotateY(0deg)"]}};(function(){if(!!iAP.Context.IS_ITUNES_EXTRA){iAd.View.TRANSITION_FLIP_LEFT_OUT.to[0]="perspective(800) rotateY(-179deg) translateZ(-1px)";iAd.View.TRANSITION_FLIP_LEFT_IN.from[0]="perspective(800) rotateY(179deg) translateZ(-1px)";iAd.View.TRANSITION_FLIP_RIGHT_OUT.to[0]="perspective(800) rotateY(179deg) translateZ(-1px)";iAd.View.TRANSITION_FLIP_RIGHT_IN.from[0]="perspective(800) rotateY(-179deg) translateZ(-1px)";var e=function(h){var g=h.properties.indexOf("transform");h.from[g]=new WebKitCSSMatrix(h.from[g]).toString();h.to[g]=new WebKitCSSMatrix(h.to[g]).toString();return h};var f=function(g){if(iAd.Utils.objectIsFunction(g)){return function(h){return e(g(h))}}else{return e(g)}};var a=["TRANSITION_FLIP_LEFT_OUT","TRANSITION_FLIP_LEFT_IN","TRANSITION_FLIP_RIGHT_OUT","TRANSITION_FLIP_RIGHT_IN","TRANSITION_CUBE_LEFT_OUT","TRANSITION_CUBE_LEFT_IN","TRANSITION_CUBE_RIGHT_OUT","TRANSITION_CUBE_RIGHT_IN","TRANSITION_DOOR_OPEN_LEFT_OUT","TRANSITION_DOOR_CLOSE_LEFT_IN","TRANSITION_DOOR_OPEN_RIGHT_OUT","TRANSITION_DOOR_CLOSE_RIGHT_IN","TRANSITION_DOOR_OPEN_LEFT_TOP_OUT","TRANSITION_DOOR_CLOSE_LEFT_TOP_IN","TRANSITION_DOOR_OPEN_RIGHT_TOP_OUT","TRANSITION_DOOR_CLOSE_RIGHT_TOP_IN"];for(var c=0,d=a.length;c<d;c++){var b=a[c];iAd.View[b]=f(iAd.View[b])}}})();
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.EventDelegate",superclass:iAd.Object,synthesizedProperties:["eventHandlers","target","userScriptFunction","executionContext"]});iAP.EventDelegate.prototype.init=function(c,b,a){this.renamedEvents={};this.renamedEvents.flipViewDidFlip="containerDidFocusCellAtIndex";this.renamedEvents.audioButtonDidPlay="mediaDidPlay";this.renamedEvents.audioButtonDidPause="mediaDidPause";this.renamedEvents.audioButtonDidEnd="mediaDidEnd";this.renamedEvents.audioButtonDidTimeUpdate="mediaDidTimeUpdate";this.renamedEvents.didReceiveResponseData="mapViewDidReceiveResponseData";this.renamedEvents.didReceiveDataFailure="mapViewDidReceiveDataFailure";this.renamedEvents.annotationCalloutTapped="mapViewAnnotationLeftCalloutTapped";this.renamedEvents.mapViewDidTapAnnotationCallout="mapViewAnnotationLeftCalloutTapped";if(iAd.VideoPlayer&&c instanceof iAd.VideoPlayer){this.renamedEvents.mediaDidPlay="mediaPlaybackDidStart";this.renamedEvents.mediaDidPause="mediaPlaybackDidPause";this.renamedEvents.mediaDidEnd="mediaPlaybackDidEnd";this.renamedEvents.mediaDidTimeUpdate="mediaPlaybackDidProgress";this.renamedEvents.mediaDidEnterWaitingState="mediaPlaybackDidBeginWaiting";this.renamedEvents.mediaDidExitWaitingState="mediaPlaybackDidEndWaiting"}if(iAP.AudioButton&&c instanceof iAP.AudioButton){this.renamedEvents.audioButtonDidPlay="mediaPlaybackDidStart";this.renamedEvents.audioButtonDidPause="mediaPlaybackDidPause";this.renamedEvents.audioButtonDidEnd="mediaPlaybackDidEnd";this.renamedEvents.audioButtonDidTimeUpdate="mediaDidUpdateTime";this.renamedEvents.mediaDidPlay="mediaPlaybackDidStart";this.renamedEvents.mediaDidPause="mediaPlaybackDidPause";this.renamedEvents.mediaDidEnd="mediaPlaybackDidEnd";this.renamedEvents.mediaDidTimeUpdate="mediaDidUpdateTime"}if(iAP.RootViewController&&c instanceof iAP.RootViewController){this.renamedEvents.adDidFinishLaunching="didFinishLaunching";this.renamedEvents.adWillBeDismissed="willBeDismissed"}this.renamedEvents.galleryViewDidSelectCell="containerDidFocusCellAtIndex";this.renamedEvents.carouselViewDidChangeIndex="containerDidFocusCellAtIndex";this.renamedEvents.webGLViewModelDidLoad="webGLViewSceneDidLoad";this.renamedEvents.chapterListDidTapFrontCell="chapterListViewDidActivateChapter";this.renamedEvents.songSelected="songListDidActivateSong";this.callSuper();this._target=c;this._executionContext=b;this._userScriptFunction=a;this._eventHandlers={};if(b==null){this._executionContext=this}};iAP.EventDelegate.prototype.processUserScript=function(){for(var b in this.eventHandlers){var d=this.eventHandlers[b];this.target.removeEventListener(b,this,false);this.executionContext["on"+b.substr(0,1).toUpperCase()+b.substr(1)]=null}this._eventHandlers={};var a=this.executionContext.handleEvent;this.userScriptFunction.call(this.executionContext);if(this.executionContext.handleEvent!==a){var c=this.executionContext;var f=this.executionContext.handleEvent;var e=function(h){a.apply(c,[h]);f.apply(c,[h])};this.executionContext.handleEvent=e}for(key in this.executionContext){if(key.substr(0,2)!="on"){continue}var g=this.executionContext[key];if(typeof g=="function"){b=key.substr(2,1).toLowerCase()+key.substr(3);if(this.renamedEvents[b]){b=this.renamedEvents[b]}this.target.addEventListener(b,this,false);this.eventHandlers[b]=g}}};iAP.EventDelegate.prototype.handleEvent=function(b){var a=this.eventHandlers[b.type];if(a!=null&&b.ad&&b.ad.sender===this.target){if(b["arguments"]){a.apply(this.executionContext,b["arguments"])}else{a.call(this.executionContext,b)}}};iAP.EventDelegate.viewScriptFunctions={};iAP.EventDelegate.viewControllerScriptFunctions={};iAP.EventDelegate.registerViewControllerEventDelegate=function(b,a){iAP.EventDelegate.viewControllerScriptFunctions[b]=a};iAP.EventDelegate.registerViewEventDelegate=function(b,c,a){if(iAP.EventDelegate.viewScriptFunctions[c]==null){iAP.EventDelegate.viewScriptFunctions[c]={}}iAP.EventDelegate.viewScriptFunctions[c][b]=a};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class("iAd.ViewProcessor");iAd.ViewProcessor.prototype.init=function(a){this.callSuper();this.viewController=a};iAd.ViewProcessor.prototype.processView=function(a){};iAd.ViewProcessor.prototype.cleanUp=function(){};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ViewControllerReferencingViewProcessor",superclass:iAd.ViewProcessor});iAd.ViewControllerReferencingViewProcessor.prototype.init=function(a){this.callSuper(a);this.anchors=[]};iAd.ViewControllerReferencingViewProcessor.prototype.processView=function(b){var f=this.constructor.PROCESSED_KEY;var a=this.constructor.ATTR_NAME;var e=iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX+a;var c;var h=b.layer.querySelectorAll("["+e+"],["+a+"]");for(var d=0,g=h.length;d<g;d++){c=h[d];if(c.hasOwnProperty(f)){continue}iAd.Event.registerForNotificationEvent(iAd.View.ACTIVATE_EVENT);c.addEventListener(iAd.View.ACTIVATE_EVENT,this,false);c.addEventListener("click",this,false);iAd.SpatialNavigationManager.sharedManager.addNavigableElement(c);c.addEventListener(iAd.SpatialNavigationManager.ACTIVATE_EVENT,this,false);c[f]=true;this.anchors.push(c)}};iAd.ViewControllerReferencingViewProcessor.prototype.cleanUp=function(){var b=this.constructor.PROCESSED_KEY;var a;while(this.anchors.length){a=this.anchors.pop();a.removeEventListener(iAd.View.ACTIVATE_EVENT,this,false);a.removeEventListener("click",this,false);a.removeEventListener(iAd.SpatialNavigationManager.ACTIVATE_EVENT,this,false);iAd.SpatialNavigationManager.sharedManager.removeNavigableElement(a);delete a[b]}};iAd.ViewControllerReferencingViewProcessor.prototype.shouldHandleEvent=function(b){var a=b.currentTarget;if(!iAd.Element.hasCustomAttribute(a,this.constructor.ATTR_NAME)){return false}if(b.type=="click"&&iAd.Control.isNodeInControlHierarchyBoundedByElement(b.target,a)){return false}return true};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.NavigationController",superclass:iAd.ViewController,synthesizedProperties:["viewControllers","topViewController","visibleViewController","navigationBarHidden","toolbar","navigationBar","toolbarHidden"],archivedProperties:["viewControllers","navigationBarHidden","toolbarHidden","autoReversesTransitions"]});iAd.NavigationController.WILL_SHOW_VIEW_CONTROLLER="navigationControllerWillShowViewControllerAnimated";iAd.NavigationController.DID_SHOW_VIEW_CONTROLLER="navigationControllerDidShowViewControllerAnimated";iAd.NavigationController.HIDE_SHOW_BAR_DURATION=0.2;iAd.NavigationController.POPOVER_OFFSET=6;iAd.NavigationController.prototype.init=function(b,a){this.callSuper(b);this.delegate=null;this._viewControllers=[];this.autoReversesTransitions=false;this.shouldAnimateInitialViewController=false;this.previousController=null;this.viewAppearancePropagationProperty="visibleViewController";this.shouldArchiveView=false;this.delayedSetOperationArguments=null;this.backingTransitionController=new iAd.TransitionController();this.backingTransitionController.delegate=this;this._navigationBarHidden=false;this._toolbarHidden=true;this._navigationBar=null;this._toolbar=null;this.requiresDeferredHostViewSizeUpdate=false;if(a!=null){this.viewControllers=[a]}};iAd.NavigationController.prototype.loadView=function(){var a=new iAd.NavigationView(this);this.view=a;a.layer.addClassName("ad-navigation-controller-view");a.size=new iAd.Size(window.innerWidth,window.innerHeight);a.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT;a.clipsToBounds=true;if(!this._navigationBarHidden&&this.navigationBar){a.addSubview(this.navigationBar)}this.hostView=a.addSubview(this.backingTransitionController.view);this.hostView.layer.addClassName("ad-navigation-controller-host-view");if(!this._toolbarHidden&&this.toolbar){a.addSubview(this.toolbar)}a.addPropertyObserver("size",this,"sizeChanged");this.sizeChanged();this.performDelayedSetOperation();var b=this.topViewController?this.topViewController.view:null;if(b&&b.superview!=this.hostView){b.size=this.hostView.size.copy();b.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT;this.hostView.addSubview(b)}a.layer.addEventListener(iAd.SpatialNavigationManager.NAVIGATE_EVENT,this,false)};iAd.NavigationController.prototype.viewMovedToNewSuperview=function(){var a=this._navigationBar;if(!a){return}var b=a.topItem;if(b!=null){b.updateLayoutIfTopItem()}};iAd.NavigationController.prototype.unloadView=function(){if(this.hostView){this.hostView.removeFromSuperview();this.hostView=null}if(this._toolbar){this._toolbar.removeFromSuperview();this._toolbar=null}if(this._navigationBar){this._navigationBar.removeFromSuperview();this._navigationBar=null}this.callSuper()};iAd.NavigationController.prototype.didReceiveMemoryWarning=function(){this.callSuper();var b=this._viewControllers.length-(this._view?2:0);for(var a=0;a<b;a++){this._viewControllers[a].unloadView()}};iAd.NavigationController.prototype.handleEvent=function(a){if(iAd.SpatialNavigationManager&&a.type==iAd.SpatialNavigationManager.NAVIGATE_EVENT){if(a.ad.command==iAd.Event.KEYBOARD_BACKSPACE){this.popViewControllerAnimated(true);a.preventDefault()}}else{this.callSuper(a)}};iAd.NavigationController.prototype.getNavigationBar=function(){var a=this._navigationBar;if(!a){if(!iAd.NavigationBar){iAd.Console.warn("iAd.NavigationController: Attempting to create a navigation bar but iAd.NavigationBar is undefined; navigationBarHidden will be set to true. You must explicitly require iAd.NavigationBar in your project.");this._navigationBarHidden=true;return null}var a=this._navigationBar=new iAd.NavigationBar();a.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH;if(this.isViewLoaded()){a.size=new iAd.Size(this.view.size.width,iAd.NavigationBar.DEFAULT_HEIGHT)}}return a};iAd.NavigationController.prototype.getToolbar=function(){var a=this._toolbar;if(!a){if(!iAd.Toolbar){iAd.Console.warn("iAd.NavigationController: Attempting to create a toolbar but iAd.Toolbar is undefined; toolbarHidden will be set to true. You must explicitly require iAd.Toolbar in your project.");this._toolbarHidden=true;return null}var a=this._toolbar=new iAd.Toolbar();a.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH;if(this.isViewLoaded()){a.size=new iAd.Size(this.view.size.width,iAd.Toolbar.DEFAULT_HEIGHT)}}return a};iAd.NavigationController.prototype.getTopViewController=function(){return(this.viewControllers.length>0)?this.viewControllers[this.viewControllers.length-1]:null};iAd.NavigationController.prototype.getVisibleViewController=function(){var a=this.topViewController;return a.modalViewController||a};iAd.NavigationController.prototype.getViewControllers=function(){return(this.delayedSetOperationArguments!=null)?this.delayedSetOperationArguments[0]:this._viewControllers};iAd.NavigationController.prototype.setViewControllers=function(a){this.setViewControllersAnimated(a,false)};iAd.NavigationController.prototype.setViewControllersAnimated=function(g,e){if(g.length==0){return}if(this.shouldDelaySetOperation()){this.delayedSetOperationArguments=arguments;return}iAd.Transaction.begin();var f=(this._viewControllers.length>0)?this._viewControllers[this._viewControllers.length-1]:null;var a=g[g.length-1];var h=(this._viewControllers.indexOf(a)!=-1);var c=(!f&&e)?this.shouldAnimateInitialViewController:e;this.dispatchWillShowNotification(a,c);for(var b=0,d=this._viewControllers.length;b<d;b++){this._viewControllers[b].parentViewController=null}for(var b=0,d=g.length;b<d;b++){g[b].parentViewController=this}this._viewControllers=g;this.prepareViewControllersForTransition(f,a,h);this.backingTransitionController.setVisibleViewControllerAnimated(a,c);iAd.Transaction.commit()};iAd.NavigationController.prototype.prepareViewControllersForTransition=function(b,c,a){if(b==null){c.becomesVisibleTransition=c.becomesTopItemTransition}else{if(b!==c){if(this.autoReversesTransitions){b.becomesHiddenTransition=a?b.wasTopItemTransition:c.becomesBackItemTransition;c.becomesVisibleTransition=a?b.wasBackItemTransition:c.becomesTopItemTransition}else{b.becomesHiddenTransition=a?b.wasTopItemTransition:b.becomesBackItemTransition;c.becomesVisibleTransition=a?c.wasBackItemTransition:c.becomesTopItemTransition}}}c.view.size=this.hostView.size.copy();c.view.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT};iAd.NavigationController.prototype.shouldDelaySetOperation=function(){return !this.isViewLoaded()||this.backingTransitionController.busy||(!this.navigationBarHidden&&this.navigationBar.busy)};iAd.NavigationController.prototype.pushViewControllerAnimated=function(a,b){if(this.viewControllers.indexOf(a)!=-1){iAd.Console.warn("iAd.NavigationController.prototype.pushViewControllerAnimated: attempt to push a view controller already in the stack");return}this.setViewControllersAnimated(this.viewControllers.concat([a]),b)};iAd.NavigationController.prototype.popViewControllerAnimated=function(b){if(this.viewControllers.length>1){var a=this.topViewController;this.setViewControllersAnimated(this.viewControllers.slice(0,this.viewControllers.length-1),b);return a}return null};iAd.NavigationController.prototype.popToRootViewControllerAnimated=function(a){return this.popToViewControllerAnimated(this.viewControllers[0],a)};iAd.NavigationController.prototype.popToViewControllerAnimated=function(a,c){var d=this.viewControllers.indexOf(a);if(d<0||d>=this.viewControllers.length-1){return[]}var b=this.viewControllers.slice(d+1);this.setViewControllersAnimated(this.viewControllers.slice(0,d+1),c);return b};iAd.NavigationController.prototype.transitionControllerWillMakeViewControllerVisibleAnimated=function(d,b,c,e){var a=this._navigationBar;if(a){var h=[];for(var f=0,g=this._viewControllers.length;f<g;f++){h.push(this._viewControllers[f].navigationItem)}a.setItemsAnimated(h,this.navigationBarHidden?false:e)}var j=this._toolbar;if(j){j.setItemsAnimated(b.toolbarItems,e)}};iAd.NavigationController.prototype.transitionControllerDidMakeViewControllerVisibleAnimated=function(b,d,a,c){this.dispatchDidShowNotification(d,c);this.callMethodNameAfterDelay("performDelayedSetOperation",0)};iAd.NavigationController.prototype.dispatchDidShowNotification=function(b,a){this.dispatchNotification(iAd.NavigationController.DID_SHOW_VIEW_CONTROLLER,this.delegate,[["viewController",b],["animated",a]])};iAd.NavigationController.prototype.dispatchWillShowNotification=function(b,a){this.dispatchNotification(iAd.NavigationController.WILL_SHOW_VIEW_CONTROLLER,this.delegate,[["viewController",b],["animated",a]])};iAd.NavigationController.prototype.performDelayedSetOperation=function(){if(this.delayedSetOperationArguments==null){return}if(this._navigationBar&&this.navigationBar.busy){this.navigationBar.addPropertyObserver("busy",this,"navigationBarBusyStateChanged")}else{this.setViewControllersAnimated(this.delayedSetOperationArguments[0],this.delayedSetOperationArguments[1]);this.delayedSetOperationArguments=null}};iAd.NavigationController.prototype.navigationBarBusyStateChanged=function(){if(this._navigationBar&&this.navigationBar.busy){return}this.navigationBar.removePropertyObserver("busy",this,"navigationBarBusyStateChanged");this.performDelayedSetOperation()};iAd.NavigationController.prototype.sizeChanged=function(){var d=this.hostedInPopoverController();var c=iAd.NavigationBar?-iAd.NavigationBar.DEFAULT_HEIGHT:0;var b=0;var f=this._view.size.height;if(!this._navigationBarHidden){c=d?-iAd.NavigationController.POPOVER_OFFSET:0;b+=iAd.NavigationBar.DEFAULT_HEIGHT-(d?iAd.NavigationController.POPOVER_OFFSET:0)}if(!this._toolbarHidden){f-=iAd.Toolbar.DEFAULT_HEIGHT-(d?iAd.NavigationController.POPOVER_OFFSET+1:0)}this.hostView.position=new iAd.Point(0,b);var a=this._navigationBar;if(a){a.position=new iAd.Point(0,c)}var e=this._toolbar;if(e){this.toolbar.position=new iAd.Point(0,f)}this.updateHostViewSize()};iAd.NavigationController.prototype.updateHostViewSize=function(){var a=this._view.size.height;var b=this.hostedInPopoverController();if(!this._navigationBarHidden){a-=iAd.NavigationBar.DEFAULT_HEIGHT-(b?iAd.NavigationController.POPOVER_OFFSET:0)}if(!this._toolbarHidden){a-=iAd.Toolbar.DEFAULT_HEIGHT-(b?iAd.NavigationController.POPOVER_OFFSET:0)}this.hostView.size=new iAd.Size(this._view.size.width,a)};iAd.NavigationController.prototype.hostedInPopoverController=function(){return iAd.Utils.objectIsInstanceOfClass(this.parentViewController,iAd.PopoverController)};iAd.NavigationController.prototype.setNavigationBarHidden=function(a){this.setNavigationBarHiddenAnimated(a,false)};iAd.NavigationController.prototype.setNavigationBarHiddenAnimated=function(f,e){if(this._navigationBarHidden==f){return}this._navigationBarHidden=f;if(!this.isViewLoaded()){return}var a=this._navigationBar;if(!a&&f){return}var c=this.hostedInPopoverController();var b=new iAd.Point(0,f?-iAd.NavigationBar.DEFAULT_HEIGHT:(c?-iAd.NavigationController.POPOVER_OFFSET:0));var d=new iAd.Point(0,f?0:iAd.NavigationBar.DEFAULT_HEIGHT-(c?iAd.NavigationController.POPOVER_OFFSET:0));if(!f){this.view.addSubview(this.navigationBar)}if(!e){a.position=b;this.hostView.position=d;this.updateHostViewSize();if(f){a.removeFromSuperview()}return}iAd.Transaction.begin();iAd.Transaction.defaults.duration=e?iAd.NavigationController.HIDE_SHOW_BAR_DURATION:0;iAd.Transaction.defaults.properties=["position"];a.applyTransition({to:[b],removesTargetUponCompletion:f});this.hostView.applyTransition({to:[d],delegate:this});iAd.Transaction.commit();if(f){this.updateHostViewSize()}else{this.requiresDeferredHostViewSizeUpdate=true}};iAd.NavigationController.prototype.transitionDidComplete=function(a){if(this.requiresDeferredHostViewSizeUpdate){this.requiresDeferredHostViewSizeUpdate=false;this.updateHostViewSize()}};iAd.NavigationController.prototype.setToolbarHidden=function(a){this.setToolbarHiddenAnimated(a,false)};iAd.NavigationController.prototype.setToolbarHiddenAnimated=function(b,a){if(this._toolbarHidden==b){return}this._toolbarHidden=b;if(!this.isViewLoaded()){return}if(!this._toolbar&&b){return}var c=new iAd.Point(0,this._view.size.height-(b?0:iAd.Toolbar.DEFAULT_HEIGHT));if(this.hostedInPopoverController()){c.y+=iAd.NavigationController.POPOVER_OFFSET}if(!b){this.view.addSubview(this.toolbar)}if(!a){this.toolbar.position=c;this.updateHostViewSize();if(b){this.toolbar.removeFromSuperview()}return}new iAd.Transition({target:this.toolbar,properties:["position"],to:[c],duration:a?iAd.NavigationController.HIDE_SHOW_BAR_DURATION:0,delegate:this,removesTargetUponCompletion:b}).start();if(b){this.updateHostViewSize()}else{this.requiresDeferredHostViewSizeUpdate=true}this.notifyPropertyChange("toolbarHidden")};iAd.Class({name:"iAd.NavigationView",superclass:iAd.View});iAd.NavigationView.prototype.init=function(a){this.callSuper();this.viewController=a};iAd.NavigationView.prototype.didMoveToSuperview=function(a){this.callSuper(a);if(a!=null){this.viewController.viewMovedToNewSuperview()}};iAd.ViewController.prototype.getNavigationController=function(){return this.parentControllerOfKind(iAd.NavigationController)};iAd.ViewController.prototype.getNavigationItem=function(){if(this._navigationItem==null){this._navigationItem=new iAd.NavigationItem(this.title);this._navigationItem.viewController=this}return this._navigationItem};iAd.ViewController.prototype.setToolbarItems=function(a){this.setToolbarItemsAnimated(a,false)};iAd.ViewController.prototype.setToolbarItemsAnimated=function(b,c){if(!b){return}this._toolbarItems=b;var a=this.parentViewController;if(a!=null&&a instanceof iAd.NavigationController){a.toolbar.setItemsAnimated(b,c)}};iAd.Class.synthesizeProperties(iAd.ViewController,["navigationController","navigationItem","toolbarItems"]);iAd.Class.processMethods(iAd.ViewController,["setToolbarItemsAnimated"]);iAd.RootViewController.prototype.getNavigationController=function(){if(!this.hasOwnProperty("_navigationController")){this.navigationController=new iAd.NavigationController()}return this._navigationController};iAd.RootViewController.prototype.setNavigationController=function(b){b.navigationBarHidden=true;b.shouldAnimateInitialViewController=true;b.delegate=this;var a=this.view;b.view.size=a._size.copy();a.addSubview(b.view);this._navigationController=b};iAd.Class.synthesizeProperties(iAd.RootViewController,["navigationController"]);
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Utils.replaceMethod(iAd.NavigationView,"init",function(){this.callOriginal.apply(this,arguments);if(iAP.Context.IS_SAFARI){this.autoresizesSubviews=false}});
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.NavigationViewProcessor",superclass:iAd.ViewControllerReferencingViewProcessor});iAd.NavigationViewProcessor.PREVIOUS_ITEM_ID="{previous-item}";iAd.NavigationViewProcessor.ATTR_NAME="ad-navigates-to";iAd.NavigationViewProcessor.PROCESSED_KEY="_adProcessedNavigatesTo";iAd.NavigationViewProcessor.prototype.handleEvent=function(e){if(!this.shouldHandleEvent(e)){return}var d=e.currentTarget;var f=iAd.Element.getCustomAttribute(d,iAd.NavigationViewProcessor.ATTR_NAME);var b=iAd.RootViewController.sharedRootViewController.navigationController;if(f==iAd.NavigationViewProcessor.PREVIOUS_ITEM_ID){b.popViewControllerAnimated(true)}else{var a=iAd.ViewController.instances[f];if(a){var c=(b.viewControllers.indexOf(a)!=-1);if(c){b.popToViewControllerAnimated(a,true)}else{b.pushViewControllerAnimated(a,true)}}}};iAd.ViewController.addViewProcessor(iAd.NavigationViewProcessor);
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.OutletsViewProcessor",superclass:iAd.ViewProcessor});iAd.OutletsViewProcessor.prototype.init=function(a){this.callSuper(a);this.outlets=[]};iAd.OutletsViewProcessor.prototype.processView=function(b){var a="ad-outlet";var d=iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX+a;var g;var f=b.layer.querySelectorAll("["+d+"],["+a+"]");for(var c=0,e=f.length;c<e;c++){g=f[c];this.viewController.outlets[iAd.Element.getCustomAttribute(g,a)]=(g.hasOwnProperty("_view"))?g._view:g}};iAd.OutletsViewProcessor.prototype.cleanUp=function(){for(var a in this.viewController.outlets){delete this.viewController.outlets[a]}};iAd.ViewController.addViewProcessor(iAd.OutletsViewProcessor);
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Bindings={};iAd.Bindings.SHIMS_ENABLED=false;iAd.BindingUtils={};iAd.BindingUtils.BINDING_UNAVAILABLE_ERROR="This binding is unavailable.";iAd.BindingUtils.initializeBindingObject=function(b,a){var c=a?b:b.constructor;b._binding=c.BINDING_OBJECT;if(!iAd.Bindings.SHIMS_ENABLED&&b._binding.shim){b._binding=null}b._bindingClass=c.BINDING_CLASS;b._bindingProtocol=c.BINDING_PROTOCOL};iAd.BindingUtils.registerBindingClass=function(a){Object.defineProperty(a,"available",{get:function(){if(this.hasOwnProperty("getAvailable")){return this.getAvailable()}else{return iAd.BindingUtils.isBindingClassAvailable(this)}}})};iAd.BindingUtils.isBindingClassAvailable=function(a){return !!(a.BINDING_OBJECT&&(iAd.Bindings.SHIMS_ENABLED||!a.BINDING_OBJECT.shim))};iAd.BindingUtils.isErrorFromModalActivity=function(a){var b=this.sanitizeMessageFromError(a);return(b&&b.indexOf("modal activity is in progress")!==-1)};iAd.BindingUtils.sanitizeMessageFromError=function(a){if(!a){return""}if(a.hasOwnProperty("message")){return a.message}return a.toString()};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

window._ad={shim:true};if(!window.ADAd){window._ADAd={ADInterfaceOrientationLandscapeLeft:4,ADInterfaceOrientationLandscapeRight:8,ADInterfaceOrientationPortrait:1,ADInterfaceOrientationPortraitUpsideDown:2,kInvalidOrCorruptImageError:4,kInvalidURL:100,kURLInvalidSchemeViolation:105,kURLRelativePathViolation:103,kURLSameOriginPolicyViolation:104}}if(!window.ADNetworkTypeListener){window._ADNetworkTypeListener={kADNetworkTypeListenerNetworkType3G:3,kADNetworkTypeListenerNetworkTypeEDGE:2,kADNetworkTypeListenerNetworkTypeGPRS:1,kADNetworkTypeListenerNetworkTypeUnknown:0,kADNetworkTypeListenerNetworkTypeWiFi:4};window._ad.networkType=window._ADNetworkTypeListener.kADNetworkTypeListenerNetworkTypeUnknown}if(!window.ad||!window.ad.hasOwnProperty("currentSupportedInterfaceOrientations")){window._ad.currentSupportedInterfaceOrientations=0}if(!window.ad||!window.ad.hasOwnProperty("locationServicesEnabled")){window._ad.locationServicesEnabled=false}if(!window.ad){Object.defineProperty(window._ad,"deviceOrientationListener",{set:function(a){if(iAd.Bindings.SHIMS_ENABLED){a.deviceOrientationDidChange(0)}}})};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

if(!Function.prototype.hasOwnProperty("bind")){Function.prototype.bind=function(b){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - cannot bind something that is not callable")}var e=Array.prototype.slice.call(arguments,1),d=this,c=function(){},a=function(){var f=(this instanceof c)?this:(b||window);return d.apply(f,e.concat(Array.prototype.slice.call(arguments)))};c.prototype=this.prototype;a.prototype=new c();return a}};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Device._binding=window.ad||window._ad;iAd.Device._bindingProtocol=window._ADAd||window.ADAd;iAd.Device._bindingNetworkProtocol=window._ADNetworkTypeListener||window.ADNetworkTypeListener;iAd.Device.SHAKE_EVENT="deviceShakeDidOccur";iAd.Device.NETWORK_TYPE_CHANGE_EVENT="deviceNetworkTypeDidChange";iAd.Device.ORIENTATION_DID_CHANGE_EVENT="deviceOrientationDidChange";iAd.Device.NETWORK_TYPE_UNKNOWN=iAd.Device._bindingNetworkProtocol.kADNetworkTypeListenerNetworkTypeUnknown;iAd.Device.NETWORK_TYPE_GPRS=iAd.Device._bindingNetworkProtocol.kADNetworkTypeListenerNetworkTypeGPRS;iAd.Device.NETWORK_TYPE_EDGE=iAd.Device._bindingNetworkProtocol.kADNetworkTypeListenerNetworkTypeEDGE;iAd.Device.NETWORK_TYPE_3G=iAd.Device._bindingNetworkProtocol.kADNetworkTypeListenerNetworkType3G;iAd.Device.NETWORK_TYPE_WIFI=iAd.Device._bindingNetworkProtocol.kADNetworkTypeListenerNetworkTypeWiFi;iAd.Device.ORIENTATION_UNKNOWN=-1;iAd.Device.ORIENTATION_FACE_UP=5;iAd.Device.ORIENTATION_FACE_DOWN=6;iAd.Device.BINDING_DEVICE_ORIENTATION_UNKNOWN=0;iAd.Device.BINDING_DEVICE_ORIENTATION_PORTRAIT=1;iAd.Device.BINDING_DEVICE_ORIENTATION_PORTRAIT_UPSIDE_DOWN=2;iAd.Device.BINDING_DEVICE_ORIENTATION_LANDSCAPE_LEFT=3;iAd.Device.BINDING_DEVICE_ORIENTATION_LANDSCAPE_RIGHT=4;iAd.Device.BINDING_DEVICE_ORIENTATION_FACE_UP=5;iAd.Device.BINDING_DEVICE_ORIENTATION_FACE_DOWN=6;iAd.Device.orientationForBindingDeviceOrientation=function(a){switch(a){case iAd.Device.BINDING_DEVICE_ORIENTATION_PORTRAIT:return iAd.Device.ORIENTATION_PORTRAIT;case iAd.Device.BINDING_DEVICE_ORIENTATION_PORTRAIT_UPSIDE_DOWN:return iAd.Device.ORIENTATION_PORTRAIT_UPSIDE_DOWN;case iAd.Device.BINDING_DEVICE_ORIENTATION_LANDSCAPE_LEFT:return iAd.Device.ORIENTATION_LANDSCAPE_LEFT;case iAd.Device.BINDING_DEVICE_ORIENTATION_LANDSCAPE_RIGHT:return iAd.Device.ORIENTATION_LANDSCAPE_RIGHT;case iAd.Device.BINDING_DEVICE_ORIENTATION_FACE_UP:return iAd.Device.ORIENTATION_FACE_UP;case iAd.Device.BINDING_DEVICE_ORIENTATION_FACE_DOWN:return iAd.Device.ORIENTATION_FACE_DOWN;default:return iAd.Device.ORIENTATION_UNKNOWN}};iAd.Device.BINDING_ORIENTATION_UNKNOWN=0;iAd.Device.BINDING_ORIENTATION_PORTRAIT=iAd.Device._bindingProtocol.ADInterfaceOrientationPortrait;iAd.Device.BINDING_ORIENTATION_PORTRAIT_UPSIDE_DOWN=iAd.Device._bindingProtocol.ADInterfaceOrientationPortraitUpsideDown;iAd.Device.BINDING_ORIENTATION_LANDSCAPE_LEFT=iAd.Device._bindingProtocol.ADInterfaceOrientationLandscapeLeft;iAd.Device.BINDING_ORIENTATION_LANDSCAPE_RIGHT=iAd.Device._bindingProtocol.ADInterfaceOrientationLandscapeRight;iAd.Device.BINDING_ORIENTATIONS=[iAd.Device.BINDING_ORIENTATION_PORTRAIT,iAd.Device.BINDING_ORIENTATION_PORTRAIT_UPSIDE_DOWN,iAd.Device.BINDING_ORIENTATION_LANDSCAPE_LEFT,iAd.Device.BINDING_ORIENTATION_LANDSCAPE_RIGHT];iAd.Device.orientationForBindingOrientation=function(a){switch(a){case iAd.Device.BINDING_ORIENTATION_PORTRAIT:return iAd.Device.ORIENTATION_PORTRAIT;case iAd.Device.BINDING_ORIENTATION_PORTRAIT_UPSIDE_DOWN:return iAd.Device.ORIENTATION_PORTRAIT_UPSIDE_DOWN;case iAd.Device.BINDING_ORIENTATION_LANDSCAPE_LEFT:return iAd.Device.ORIENTATION_LANDSCAPE_LEFT;case iAd.Device.BINDING_ORIENTATION_LANDSCAPE_RIGHT:return iAd.Device.ORIENTATION_LANDSCAPE_RIGHT;default:return null}};iAd.Device.bindingOrientationForOrientation=function(a){switch(a){case iAd.Device.ORIENTATION_PORTRAIT:return iAd.Device.BINDING_ORIENTATION_PORTRAIT;case iAd.Device.ORIENTATION_PORTRAIT_UPSIDE_DOWN:return iAd.Device.BINDING_ORIENTATION_PORTRAIT_UPSIDE_DOWN;case iAd.Device.ORIENTATION_LANDSCAPE_LEFT:return iAd.Device.BINDING_ORIENTATION_LANDSCAPE_LEFT;case iAd.Device.ORIENTATION_LANDSCAPE_RIGHT:return iAd.Device.BINDING_ORIENTATION_LANDSCAPE_RIGHT;default:return null}};iAd.Device.eventTarget=document;iAd.Device.setupBindings=function(){iAd.Utils.copyPropertiesFromSourceToTarget(iAd.EventTarget,this);var a=iAd.Device._binding;a.networkTypeListener=this;a.shakeEventsListener=this;a.deviceOrientationListener=this};iAd.Device.shakeEventDidOccur=function(){this.createAndDispatchEvent(iAd.Device.SHAKE_EVENT)};iAd.Device.networkTypeDidChange=function(a){this.createAndDispatchEvent(iAd.Device.NETWORK_TYPE_CHANGE_EVENT,[["networkType",a]])};iAd.Device.deviceOrientationDidChange=function(a){this.orientation=iAd.Device.orientationForBindingDeviceOrientation(a);this.createAndDispatchEvent(iAd.Device.ORIENTATION_DID_CHANGE_EVENT,[["orientation",this.orientation]])};iAd.Device.getSupportedOrientations=function(){var b=iAd.Device._binding.currentSupportedInterfaceOrientations,e=[],a;for(var c=0,d=iAd.Device.BINDING_ORIENTATIONS.length;c<d;c++){a=iAd.Device.BINDING_ORIENTATIONS[c];if(b&a){e.push(iAd.Device.orientationForBindingOrientation(a))}}return e};iAd.Device.setSupportedOrientations=function(d){var a;for(var b=0,c=d.length;b<c;b++){a|=iAd.Device.bindingOrientationForOrientation(d[b])}try{iAd.Device._binding.currentSupportedInterfaceOrientations=a}catch(f){iAd.Console.warn("iAd.Device: There was an error setting .supportedOrientations")}};Object.defineProperty(iAd.Device,"supportedOrientations",{get:iAd.Device.getSupportedOrientations,set:iAd.Device.setSupportedOrientations});iAd.Device.getNetworkType=function(){return this._binding.networkType};Object.defineProperty(iAd.Device,"networkType",{get:iAd.Device.getNetworkType});iAd.Device.getLocationServicesEnabled=function(){return this._binding.locationServicesEnabled};Object.defineProperty(iAd.Device,"locationServicesEnabled",{get:iAd.Device.getLocationServicesEnabled});window.addEventListener("DOMContentLoaded",iAd.Device.setupBindings.bind(iAd.Device),true);
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.ViewController",superclass:iAd.ViewController,synthesizedProperties:["readyToTransition","nextViewController","autoAdvanceToNextViewController","autoAdvanceCondition","minimumDelayBeforeTransition"],archivedProperties:["readyToTransition","nextViewController","autoAdvanceToNextViewController","autoAdvanceCondition","minimumDelayBeforeTransition"]});iAP.ViewController.ORIENTATION_UNKNOWN=0;iAP.ViewController.ORIENTATION_PORTRAIT=1;iAP.ViewController.ORIENTATION_PORTRAIT_UPSIDE_DOWN=2;iAP.ViewController.ORIENTATION_LANDSCAPE_LEFT=3;iAP.ViewController.ORIENTATION_LANDSCAPE_RIGHT=4;iAP.ViewController.VIEW_DID_SHAKE="viewControllerViewDidShake";iAP.ViewController.ITUNES_PLAYBACK_WILL_START="viewControllerITunesPlaybackWillStart";iAP.ViewController.ITUNES_PLAYBACK_DID_START="viewControllerITunesPlaybackDidStart";iAP.ViewController.ITUNES_DID_SEEK="viewControllerITunesDidSeek";iAP.ViewController.ITUNES_PLAYBACK_DID_PAUSE="viewControllerITunesPlaybackDidPause";iAP.ViewController.ITUNES_PLAYBACK_DID_END="viewControllerITunesPlaybackDidEnd";iAP.ViewController.ITUNES_PLAYBACK_DID_ERROR="viewControllerITunesPlaybackDidError";iAP.ViewController.ITUNES_PLAYING_TRACK_INFO_DID_CHANGE="viewControllerITunesPlayingTrackInfoDidChange";iAP.ViewController.ITUNES_VOLUME_DID_CHANGE="viewControllerITunesVolumeDidChange";iAP.ViewController.ITUNES_VIDEO_DID_CLOSE="viewControllerITunesVideoDidClose";iAP.ViewController.iTunesEventMap={play:iAP.ViewController.ITUNES_PLAYBACK_WILL_START,playing:iAP.ViewController.ITUNES_PLAYBACK_DID_START,timeupdate:iAP.ViewController.ITUNES_DID_SEEK,pause:iAP.ViewController.ITUNES_PLAYBACK_DID_PAUSE,ended:iAP.ViewController.ITUNES_PLAYBACK_DID_END,error:iAP.ViewController.ITUNES_PLAYBACK_DID_ERROR,playingtrackchanged:iAP.ViewController.ITUNES_PLAYING_TRACK_INFO_DID_CHANGE,volumechange:iAP.ViewController.ITUNES_VOLUME_DID_CHANGE,videoclosed:iAP.ViewController.ITUNES_VIDEO_DID_CLOSE};iAd.ViewController.TRANSITION_IN_FROM_RIGHT=function(b){var a=b.size.width;return{properties:["transform"],from:["translateX("+a+"px)"],to:["translateX(0)"]}};iAd.ViewController.TRANSITION_IN_FROM_LEFT=function(b){var a=-b.size.width;return{properties:["transform"],from:["translateX("+a+"px)"],to:["translateX(0)"]}};iAd.ViewController.TRANSITION_OUT_TO_RIGHT=function(b){var a=b.size.width;return{properties:["transform"],from:["translateX(0)"],to:["translateX("+a+"px)"]}};iAd.ViewController.TRANSITION_OUT_TO_LEFT=function(b){var a=-b.size.width;return{properties:["transform"],from:["translateX(0)"],to:["translateX("+a+"px)"]}};iAP.ViewController.prototype.init=function(a){this.shouldPlayBuildOutActionList=true;this.shouldPlayBuildInActionList=true;this.buildInActionListShouldOnlyPlayOnce=false;this.buildOutActionListShouldOnlyPlayOnce=false;this.buildInActionListShouldDelayTransition=true;this.nextViewControllerID=null;this._autoAdvanceToNextViewController=false;this._autoAdvanceCondition="no-activity";this._minimumDelayBeforeTransition=0;this._loadingTimeoutDuration=3;this._autoAdvanceToNextViewControllerOnTimeout=false;this.callSuper(a);if(!this.configuration.properties){this.configuration.properties={}}var l=this;Object.defineProperty(this.configuration.properties,"autoAdvanceToNextViewController",{get:function(){iAd.Console.warn('Checking "viewController.configuration.properties.autoAdvanceToNextViewController" is no longer supported. Use "viewController.autoAdvanceToNextViewController" instead.');return l.autoAdvanceToNextViewController},set:function(i){iAd.Console.warn('Setting "viewController.configuration.properties.autoAdvanceToNextViewController" is no longer supported. Use "viewController.autoAdvanceToNextViewController" instead.');l.autoAdvanceToNextViewController=i;return l.autoAdvanceToNextViewController}});this._readyToTransition=false;this._shouldPreloadNextViewControllers=true;this._orientationCode=iAP.ViewController.ORIENTATION_UNKNOWN;this._additionalImages=[];this.becomesReadyToTransitionWhenViewsAreLoaded=true;this.viewControllerContainers=[];if(a.isBackgroundLayer){this.view.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT;this.view.resizeWithOldSuperviewSize(this.view.size)}var j=iAP.EventDelegate.viewControllerScriptFunctions[a.id];if(j){var d=new iAP.EventDelegate(this,this,j);d.processUserScript()}var k=null;if(this.transitionDuration){k=parseFloat(this.transitionDuration)}var b=["wasBackItemTransition","becomesBackItemTransition","wasTopItemTransition","becomesTopItemTransition","becomesHiddenTransition"];for(var c=0,f=b.length;c<f;c++){var e=b[c];var g=this[e];if(g){if(k>0){if(iAd.Utils.objectIsFunction(g)){this[e]=(function(i){return function(m){var n=i(m);n.revertsToOriginalValues=true;n.duration=k;return n}})(g)}else{var h={};iAd.Utils.copyPropertiesFromSourceToTarget(g,h);this[e]=g=h;g.revertsToOriginalValues=true;g.duration=k}}else{this[e]=null}}}if(!!iAd.Device.iOS_VERSION){document.addEventListener("focus",this,true);document.addEventListener("blur",this,true)}};iAP.ViewController.prototype.loadView=function(){if(this.configuration.isBackgroundLayer){this.view=iAd.View.getViewById(this.id);this.__visible=false}else{this.callSuper()}};iAP.ViewController.prototype.setContentView=function(a){this.callSuper.apply(this,arguments);if(!this.view.size.equals(iAd.Size.ZERO_SIZE)){a.size=this.view.size}};iAP.ViewController.prototype.clearScrollToTopTimer=function(){if(this._scrollToTopTimer){clearTimeout(this._scrollToTopTimer);this._scrollToTopTimer=null}};iAP.ViewController.prototype.clearAutoAdvanceTimer=function(){if(this._autoAdvanceTimer){clearTimeout(this._autoAdvanceTimer);this._autoAdvanceTimer=null}};iAP.ViewController.prototype.handleEvent=function(b){var a=b.type;if(a==iAd.Device.SHAKE_EVENT){this.createAndDispatchEvent(iAP.ViewController.VIEW_DID_SHAKE)}else{if(a=="orientationchange"&&this.orientation==iAP.ViewController.ORIENTATION_UNKNOWN){if(window.orientation==0){this.setOrientation(iAP.ViewController.ORIENTATION_PORTRAIT)}else{if(window.orientation==-90){this.setOrientation(iAP.ViewController.ORIENTATION_LANDSCAPE_RIGHT)}else{if(window.orientation==180){this.setOrientation(iAP.ViewController.ORIENTATION_PORTRAIT_UPSIDE_DOWN)}else{if(window.orientation==90){this.setOrientation(iAP.ViewController.ORIENTATION_LANDSCAPE_LEFT)}}}}}else{if(a=="focus"&&this.contentView){this.contentView.layer.style.overflow="hidden";this.clearScrollToTopTimer()}else{if(a=="blur"&&this.contentView){this.contentView.layer.style.overflow="visible";if(!iAd.Device.iOSVersionLessThan("5.0")){this.clearScrollToTopTimer();this._scrollToTopTimer=setTimeout(function(){window.scrollTo(0,0)},100)}}}}}if(this._autoAdvanceToNextViewController){if(a==iAd.Event.START_EVENT){this.clearAutoAdvanceTimer();window.addEventListener(iAd.Event.END_EVENT,this,true)}else{if(a==iAd.Event.END_EVENT){this._idleStartTime=Date.now();this._autoAdvanceTimer=this.callMethodNameAfterDelay("transitionToNextViewController",this._minimumDelayBeforeTransition);window.removeEventListener(iAd.Event.END_EVENT,this,true)}}}else{if(iAP.ViewController.iTunesEventMap.hasOwnProperty(a)!=-1){var c=[];if(b.track){c.push(["track",b.track])}this.createAndDispatchEvent(iAP.ViewController.iTunesEventMap[a],c)}}this.callSuper(b)};iAP.ViewController.prototype.getNextViewController=function(){return this.nextViewControllerID?iAd.ViewController.instances[this.nextViewControllerID]:null};iAP.ViewController.prototype.setNextViewController=function(a){this.nextViewControllerID=a.id};iAP.ViewController.prototype.isInitialViewController=function(){return this.id==iAd.RootViewController.sharedRootViewController.initialViewControllerID};iAP.ViewController.prototype.preloadNextViewController=function(){if(!this.nextViewController){return}if(this.nextViewController.readyToTransition){this.nextViewControllerIsReadyToTransition(this.nextViewController)}else{this.nextViewController.addPropertyObserver("readyToTransition",this,"nextViewControllerIsReadyToTransition")}this.nextViewController.loadRequiredFiles()};iAP.ViewController.prototype.preloadViewControllers=function(){var d=this.nextViewController;if(d){if(d._autoAdvanceToNextViewControllerOnTimeout){this.callMethodNameAfterDelay("skipNextViewController",d.loadingTimeoutDuration)}this.preloadNextViewController()}if(this.viewControllerIDsToPreload){for(var a=0,c=this.viewControllerIDsToPreload.length;a<c;a++){var b=iAd.ViewController.instances[this.viewControllerIDsToPreload[a]];b.loadRequiredFiles()}}};iAP.ViewController.prototype.skipNextViewController=function(){var a=this.nextViewController;if(a.readyToTransition){return}if(!a._autoAdvanceToNextViewController){return}if(!a.nextViewController){return}a.removePropertyObserver("readyToTransition",this);this.nextViewController=a.nextViewController;this.preloadNextViewController()};iAP.ViewController.prototype.transitionToViewControllerWithID=function(a){this.transitionToViewControllerWithIDAnimated(a,true)};iAP.ViewController.prototype.transitionToViewControllerWithIDAnimated=function(e,b){var c=iAd.ViewController.instances[e];if(c==null){iAd.Console.warn("Attempted to transition to a view controller with an invalid id: "+e);return}var a=iAd.RootViewController.sharedRootViewController.navigationController;var d=(a.viewControllers.indexOf(c)!=-1);if(d){a.popToViewControllerAnimated(c,b)}else{a.pushViewControllerAnimated(c,b)}};iAP.ViewController.prototype.nextViewControllerIsReadyToTransition=function(a){if(!a.readyToTransition){return}a.removePropertyObserver("readyToTransition",this);if(a.configuration.id!=this.nextViewController.id){return}if(this._autoAdvanceToNextViewController){this.transitionToNextViewController()}};iAP.ViewController.prototype.transitionToNextViewController=function(){var d=this.nextViewController;if(!d){return}if(!d.readyToTransition){return}if(this.buildInActionListShouldDelayTransition&&this.isInState(iAd.TransitionController.VIEW_BUILDS_IN_STATE)){return}if(this._autoAdvanceToNextViewController){var c=this._idleStartTime;if(c==null){return}var b=this._minimumDelayBeforeTransition;var a=(Date.now()-c)/1000;if(a<b){this.clearAutoAdvanceTimer();this._autoAdvanceTimer=this.callMethodNameAfterDelay("transitionToNextViewController",b-a);return}}this.transitionToViewControllerWithID(d.configuration.id)};iAP.ViewController.prototype.enterState=function(e){this.callSuper(e);var a,d,c;for(a=0,d=this.topAnchoredSharedViewIDs.length;a<d;a++){c=iAP.SharedView.instances[this.topAnchoredSharedViewIDs[a]];c.layer.addClassName(e);c.hidden=false}for(a=0,d=this.bottomAnchoredSharedViewIDs.length;a<d;a++){c=iAP.SharedView.instances[this.bottomAnchoredSharedViewIDs[a]];c.layer.addClassName(e);c.hidden=false}if(this.backgroundLayerVisible&&e!="ad-view-builds-in-action-list"&&e!="ad-view-builds-in-action-list-is-active"){var b=iAd.ViewController.instances.Background;b.view.layer.addClassName(e)}};iAP.ViewController.prototype.exitState=function(f){var g=this.callSuper(f);var b,e,d;for(b=0,e=this.topAnchoredSharedViewIDs.length;b<e;b++){d=iAP.SharedView.instances[this.topAnchoredSharedViewIDs[b]];d.layer.removeClassName(f)}for(b=0,e=this.bottomAnchoredSharedViewIDs.length;b<e;b++){d=iAP.SharedView.instances[this.bottomAnchoredSharedViewIDs[b]];d.layer.removeClassName(f)}if(this.backgroundLayerVisible&&f!="ad-view-builds-in-action-list"&&f!="ad-view-builds-in-action-list-is-active"){var c=iAd.ViewController.instances.Background;c.view.layer.removeClassName(f);if(iAP.StoreView){var a=iAP.StoreView.views;for(b=0,e=a.length;b<e;b++){a[b].layer.style.webkitAnimationName=""}}}if(f==iAd.TransitionController.VIEW_BUILDS_IN_STATE){if(this.buildInActionListShouldDelayTransition){this.transitionToNextViewController()}}return g};iAP.ViewController.prototype.viewDidLoad=function(){var e,k;for(k in this.outlets){e=this.outlets[k];if(iAd.Analytics&&iAd.Analytics._observedObjects[e.id]!=null){e.userInteractionEnabled=true}e.viewController=this;if(e.isViewControllerContainer){this.viewControllerContainers.push(e);e.parentViewControllerViewDidLoad()}}var g=iAP.EventDelegate.viewScriptFunctions[this.configuration.id];for(k in g){e=this.outlets[k];var d=new iAP.EventDelegate(e,e,g[k]);e.userInteractionEnabled=true;d.processUserScript()}if(iAP.Context.projectIsOfType("iTunesProject")){for(k in this.outlets){e=this.outlets[k];if(!e.userInteractionEnabled){e.layer.addClassName(iAd.View.FOCUSED_CSS_CLASS);stylesheet_loop:for(var b=0,l=document.styleSheets.length;b<l;b++){var h=document.styleSheets[b].cssRules;for(var a=0,c=h.length;a<c;a++){if(e.layer.webkitMatchesSelector(h[a].selectorText)&&h[a].selectorText.indexOf(iAd.View.FOCUSED_CSS_CLASS)!=-1){e.userInteractionEnabled=true;break stylesheet_loop}}}e.layer.removeClassName(iAd.View.FOCUSED_CSS_CLASS)}}}this.callSuper();if(this.isInitialViewController()){iAd.EventTarget.createAndDispatchEvent.call(iAd.ViewController.instances.Background,iAd.ViewController.VIEW_DID_LOAD,[["animated",false]])}var f=iAd.Device.HAS_4_INCH_DISPLAY?"ad-normal-4-inch":"ad-normal";this.setPageState(f);iAd.RootViewController.sharedRootViewController.setPageState(f)};iAP.ViewController.prototype.viewWillAppear=function(c){var k=this;var h=this.orientation;var a=this.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS];if(a){if(!this.shouldPlayBuildInActionList){var b=this.actionListByName[a];b&&this.enterState(b.cssClassName)}}if(window.iAPDebug!=null){window.iAPDebug.transitioningToViewController(this.configuration.id);if(h!=null&&!iAd.Utils.objectIsInstanceOfClass(this,iAP.LoadingViewController)){var e=iAd.Transaction.defaults.duration/2;setTimeout(function(){window.iAPDebug.rotateToOrientation(h)},e*1000)}}if(this.backgroundLayerVisible){var f=iAd.ViewController.instances.Background;if(!f.__visible){iAd.EventTarget.createAndDispatchEvent.call(f,iAd.ViewController.VIEW_WILL_APPEAR_EVENT,[["animated",false]]);var j=f.view.layer;this.showBackgroundBuildInActionList=true;f.__visible=true;j.style.display="block"}}this.setOrientation(h);window.addEventListener("orientationchange",this,false);this.callSuper(c);for(var d=0,g=this.viewControllerContainers.length;d<g;d++){this.viewControllerContainers[d].parentViewControllerViewWillAppear(c)}};iAP.ViewController.prototype.viewDidAppear=function(c){var k=this;this.callSuper(c);if(this._autoAdvanceToNextViewController){this._idleStartTime=Date.now();if(this._autoAdvanceCondition=="no-activity"){window.addEventListener(iAd.Event.START_EVENT,this,true)}}if(this._shouldPreloadNextViewControllers&&(this.nextViewController||this.viewControllerIDsToPreload)){this.preloadViewControllers()}iAd.Device.addEventListener(iAd.Device.SHAKE_EVENT,this,false);if(iAP.Context.IS_ITUNES_EXTRA){Object.keys(iAP.ViewController.iTunesEventMap).forEach(function(i){window.addEventListener(i,k)})}this.loadAdditionalFiles();var h=iAd.RootView.sharedRoot;var j=iAd.RootViewController.sharedRootViewController.navigationController.view;var d,f,b;var g=1;for(d=0,f=this.bottomAnchoredSharedViewIDs.length;d<f;d++){b=iAP.SharedView.instances[this.bottomAnchoredSharedViewIDs[d]];h.insertSubviewAtIndex(b,g++)}h.insertSubviewAtIndex(j,g++);for(d=0,f=this.topAnchoredSharedViewIDs.length;d<f;d++){b=iAP.SharedView.instances[this.topAnchoredSharedViewIDs[d]];h.insertSubviewAtIndex(b,g++)}for(d=0,f=this.viewControllerContainers.length;d<f;d++){this.viewControllerContainers[d].parentViewControllerViewDidAppear(c)}var e=iAd.ViewController.instances.Background;if(this.showBackgroundBuildInActionList){iAd.EventTarget.createAndDispatchEvent.call(e,iAd.ViewController.VIEW_DID_APPEAR_EVENT,[["animated",false]]);var a=e.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS];if(a){e.callMethodNameAfterDelay("startActionList",0,a)}this.showBackgroundBuildInActionList=false}if(this.contentView){this.contentView.viewDidAppear()}};iAP.ViewController.prototype.viewWillDisappear=function(e){var n=this;this.callSuper(e);if(this._autoAdvanceToNextViewController){this.clearAutoAdvanceTimer();window.removeEventListener(iAd.Event.START_EVENT,this,true)}iAd.Device.removeEventListener(iAd.Device.SHAKE_EVENT,this,false);if(iAP.Context.IS_ITUNES_EXTRA){Object.keys(iAP.ViewController.iTunesEventMap).forEach(function(i){window.removeEventListener(i,n)})}var l=iAd.RootView.sharedRoot;var d=this.transitionController&&this.transitionController.visibleViewController;var f,h,j,c,k={};for(f=0,h=this.topAnchoredSharedViewIDs.length;f<h;f++){j=this.topAnchoredSharedViewIDs[f];if(!d||d.topAnchoredSharedViewIDs.indexOf(j)==-1&&d.bottomAnchoredSharedViewIDs.indexOf(j)==-1){c=iAP.SharedView.instances[j];this.contentView.addSubview(c);k[j]=true}}for(f=this.bottomAnchoredSharedViewIDs.length-1;f>=0;f--){j=this.bottomAnchoredSharedViewIDs[f];if(!d||d.bottomAnchoredSharedViewIDs.indexOf(j)==-1&&d.topAnchoredSharedViewIDs.indexOf(j)==-1){c=iAP.SharedView.instances[j];this.contentView.insertSubviewAtIndex(c,0);k[j]=true}}if(d){var g=iAd.ViewController.instances.Background;if(g.__visible&&d.backgroundLayerVisible==false){iAd.EventTarget.createAndDispatchEvent.call(g,iAd.ViewController.VIEW_WILL_DISAPPEAR_EVENT,[["animated",false]]);var m=g.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS];if(m){g.callMethodNameAfterDelay("startActionList",0,m)}g.__visible=false;this.hideBackground=true}}for(f=0,h=this.viewControllerContainers.length;f<h;f++){var b=this.viewControllerContainers[f];b.parentViewControllerViewWillDisappear(e,!!k[b.viewControllerId])}if(iAP.AudioButton){var a=iAP.AudioButton.views;for(f=0,h=a.length;f<h;f++){a[f].stop()}}};iAP.ViewController.prototype.viewDidDisappear=function(d){this.view.views.forEach(function(e){e.mouseExited()});this.callSuper(d);for(var a=0,c=this.viewControllerContainers.length;a<c;a++){this.viewControllerContainers[a].parentViewControllerViewDidDisappear(d)}if(this.hideBackground){var b=iAd.ViewController.instances.Background;b.view.layer.style.display="";b.resetAllActionLists();this.hideBackground=false;iAd.EventTarget.createAndDispatchEvent.call(b,iAd.ViewController.VIEW_DID_DISAPPEAR_EVENT,[["animated",false]])}};iAP.ViewController.prototype.loadRequiredFiles=function(){if(window.iAPDebug!=null){var a=this.configuration.requiredFileURIs;var b=a.stylesheets.concat(a.scripts,a.images);b.push(a.contentView);window.iAPDebug.willRequestAssetsForViewController(this.configuration.id,b)}this.callSuper()};iAP.ViewController.prototype.requiredFilesLoaderDidComplete=function(a){this.callSuper(a);if(this.loadedAllRequiredFiles&&this.becomesReadyToTransitionWhenViewsAreLoaded){this.readyToTransition=true}if(window.editorProxy){editorProxy.didInitializeContentView()}};iAP.ViewController.prototype.loadAdditionalFiles=function(){if(this._didLoadAdditionalFiles||!this.configuration.additionalFileURIs||!this.configuration.additionalFileURIs.images){return}var d=this.configuration.additionalFileURIs.images;for(var b=0,c=d.length;b<c;b++){var a=document.createElement("img");a.src=iAd.Device.HAS_HIDPI_DISPLAY?iAd.Path.appendHiDPISuffixIfAvailable(d[b]):d[b];document.head.appendChild(a)}this._didLoadAdditionalFiles=true};iAP.ViewController.prototype.setOrientation=function(b){var c=false;if(b==iAP.ViewController.ORIENTATION_LANDSCAPE_LEFT||b==iAP.ViewController.ORIENTATION_LANDSCAPE_RIGHT){c=true;this.enterState("ad-landscape")}else{this.exitState("ad-landscape")}if(iAP.Context.IS_SAFARI){iAd.RootView.sharedRoot.setIsLandscape(c)}if(window.ad!=null&&b!=null){if(window.ad.hasOwnProperty("currentSupportedInterfaceOrientations")){var a=ADAd.ADInterfaceOrientationPortrait|ADAd.ADInterfaceOrientationPortraitUpsideDown|ADAd.ADInterfaceOrientationLandscapeLeft|ADAd.ADInterfaceOrientationLandscapeRight;var d=0;switch(b){case iAP.ViewController.ORIENTATION_PORTRAIT:d=ADAd.ADInterfaceOrientationPortrait;case iAP.ViewController.ORIENTATION_PORTRAIT_UPSIDE_DOWN:d=d||ADAd.ADInterfaceOrientationPortraitUpsideDown;if(iAd.Device.IS_IPAD){a=ADAd.ADInterfaceOrientationPortrait|ADAd.ADInterfaceOrientationPortraitUpsideDown}else{a=ADAd.ADInterfaceOrientationPortrait}break;case iAP.ViewController.ORIENTATION_LANDSCAPE_LEFT:d=ADAd.ADInterfaceOrientationLandscapeRight;case iAP.ViewController.ORIENTATION_LANDSCAPE_RIGHT:d=d||ADAd.ADInterfaceOrientationLandscapeLeft;a=ADAd.ADInterfaceOrientationLandscapeLeft|ADAd.ADInterfaceOrientationLandscapeRight;break}if(window.iAPDebug&&a!=d){window.ad.currentSupportedInterfaceOrientations=d;setTimeout(function(){window.ad.currentSupportedInterfaceOrientations=a},0)}else{window.ad.currentSupportedInterfaceOrientations=a}}}};iAP.ViewController.instances=iAd.ViewController.instances;
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.RootViewController",superclass:iAd.RootViewController,mixins:[iAd.EventTarget]});iAP.RootViewController.DID_FINISH_LAUNCHING_EVENT="didFinishLaunching";iAP.RootViewController.WILL_PAUSE_EVENT="adWillPause";iAP.RootViewController.DID_RESUME_EVENT="adDidResume";iAP.RootViewController.WILL_BE_DISMISSED_EVENT="willBeDismissed";iAP.RootViewController.DID_HIDE_EVENT="didHide";iAP.RootViewController.DID_SHOW_EVENT="didShow";iAP.RootViewController.prototype.init=function(c){this.callSuper(c);this.eventTarget=document;if(!iAP.Context.IS_IAD&&this.targetDevice){if(this.targetDevice==="iPad"){iAd.Device.IS_IPAD=true;document.body.addClassName("ad-iPad")}}if(!iAP.Context.IS_IAD_PRODUCER){document.body.addClassName("ad-normal");if(iAd.Device.HAS_4_INCH_DISPLAY){document.body.addClassName("ad-normal-4-inch")}}this.navigationController.view.clipsToBounds=false;var b=this;var a=iAd.ViewController.viewControllerWithConfiguration;iAd.ViewController.viewControllerWithConfiguration=function(g){var e=a.apply(this,arguments);var d=iAd.ViewController.instances[g.id];var f=d.configuration.id;if(f==b.initialViewControllerID){if(window.editorProxy||b.navigationController==null){b.transitionController.setVisibleViewControllerAnimated(d,true)}else{b.navigationController.pushViewControllerAnimated(d,true);b.navigationController.autoReversesTransitions=true}}return e};if(window.ad){window.ad.listener=this;this.registerItemsForPurchase(this.iTunesStoreIds)}if(c.videoWifiToCellularMapping){iAd.VideoWifiToCellularMapping=c.videoWifiToCellularMapping}};iAP.RootViewController.prototype.loadView=function(){if(!iAP.Context.IS_IAD_PRODUCER){iAd.RootView.sharedRoot=new iAd.RootView("#root")}this.callSuper()};iAP.RootViewController.prototype.registerItemsForPurchase=function(c){var a,b;if(c&&typeof(c.map)==="function"&&c.length>0){this.iTunesStoreIds=a=c}else{this.purchaseItemsWereRegistered=false;return false}b=a.map(function(d){return parseInt(d,10)});iAd.Store.registerItemsForPurchase(b);this.purchaseItemsWereRegistered=true;return true};iAP.RootViewController.prototype.getNavigationController=function(){var a=this.callSuper();a.backingTransitionController.hidesLoadingViewControllerWithTransition=false;return a};iAP.RootViewController.createRootViewController=function(a){window.addEventListener("DOMContentLoaded",function(){var b=new iAP.RootViewController(a);b.setupEventDelegate();b.createAndDispatchEvent(iAP.RootViewController.DID_FINISH_LAUNCHING_EVENT)});window.addEventListener("bookletclosing",function(){iAd.RootViewController.sharedRootViewController.createAndDispatchEvent(iAP.RootViewController.WILL_BE_DISMISSED_EVENT)});window.addEventListener("hidden",function(){iAd.RootViewController.sharedRootViewController.createAndDispatchEvent(iAP.RootViewController.DID_HIDE_EVENT)});window.addEventListener("shown",function(){iAd.RootViewController.sharedRootViewController.createAndDispatchEvent(iAP.RootViewController.DID_SHOW_EVENT)});iAP.RootViewController.configureViewport()};iAP.RootViewController.prototype.setupEventDelegate=function(){var b=iAP.EventDelegate.viewControllerScriptFunctions[this.configuration.id];if(b){var a=new iAP.EventDelegate(this,this,b);a.processUserScript()}};iAP.RootViewController.prototype.adWillBeDismissed=function(){this.createAndDispatchEvent(iAP.RootViewController.WILL_BE_DISMISSED_EVENT)};iAP.RootViewController.configureViewport=function(){var a=document.createElement("meta");a.setAttribute("name","viewport");a.setAttribute("content","width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no");document.head.appendChild(a);if(!iAP.Context.IS_IAD&&iAP.Context.IS_IOS){var b=document.createElement("meta");b.setAttribute("name","apple-mobile-web-app-capable");b.setAttribute("content","yes");document.head.appendChild(b)}};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Label",superclass:iAd.View,synthesizedProperties:["numberOfLines","text","verticalAlignment"],archivedProperties:["numberOfLines","text","verticalAlignment"],cssClassName:"ad-label",collectionAccessor:"labels"});iAd.Label.VERTICAL_ALIGNMENT_TOP="top";iAd.Label.VERTICAL_ALIGNMENT_MIDDLE="middle";iAd.Label.VERTICAL_ALIGNMENT_BOTTOM="bottom";iAd.Label.prototype.init=function(a){this._text="";this._numberOfLines=1;this._verticalAlignment=iAd.Label.VERTICAL_ALIGNMENT_MIDDLE;this.callSuper(a)};iAd.Label.prototype.layerWasCreated=function(){this.callSuper();this._text=this.layer.textContent;this._textContainer=document.createElement("div");this._textContainer.textContent=this._text;this.layer.textContent="";this.layer.appendChild(this._textContainer)};iAd.Label.prototype.setText=function(a){a=(a==null)?"":String(a);if(a===this._text){return}this._text=a;this._textContainer.textContent=a};iAd.Label.prototype.setNumberOfLines=function(a){this._numberOfLines=a;if(a==0){this._textContainer.style.webkitLineClamp="100%";this._textContainer.style.overflow="visible"}else{this._textContainer.style.webkitLineClamp=a;this._textContainer.style.overflow="hidden"}};iAd.Label.prototype.setVerticalAlignment=function(a){this._verticalAlignment=a;var b="center";if(a==iAd.Label.VERTICAL_ALIGNMENT_TOP){b="start"}else{if(a==iAd.Label.VERTICAL_ALIGNMENT_BOTTOM){b="end"}}this.setLayerStyle({"-webkit-box-pack":b})};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Label.prototype.removeTextEffectActionFrames=function(){this._textContainer.style.display="";if(this._frameContainer){this.layer.removeChild(this._frameContainer);this._frameContainer=null}};iAd.Utils.replaceMethod(iAd.Label,"setText",function(){this.callOriginal.apply(this,arguments);this.removeTextEffectActionFrames()});
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Button",superclass:iAd.Control,synthesizedProperties:["currentTitle","autosized"],archivedProperties:["autoSized","type","titles"],excludedProperties:["subviews"],cssClassName:"ad-button",collectionAccessor:"buttons"});iAd.Button.TYPE_CUSTOM="ad-custom-type";iAd.Button.TYPE_ROUNDED_RECT="ad-rounded-rect-type";iAd.Button.TYPE_DETAIL_DISCLOSURE="ad-detail-disclosure-type";iAd.Button.TYPE_INFO_LIGHT="ad-info-light-type";iAd.Button.TYPE_INFO_DARK="ad-info-dark-type";iAd.Button.TYPE_CONTACT_ADD="ad-contact-add-type";iAd.Button.TYPE_DELETION_ACCESSORY="ad-deletion-accessory-type";iAd.Button.DEFAULT_HEIGHT=37;iAd.Button.prototype.init=function(a,b){this.type=b||iAd.Button.TYPE_ROUNDED_RECT;this._autosized=true;this.titles=[""];this.titleLabel=null;this.callSuper(a)};iAd.Button.restoreFromArchive=function(a){return new this(null,a.type)};iAd.Button.prototype.initWithDeclarativeBacking=function(){this.callSuper();if(this.layer.hasClassName(iAd.Button.TYPE_ROUNDED_RECT)){this.type=iAd.Button.TYPE_ROUNDED_RECT}else{if(this.layer.hasClassName(iAd.Button.TYPE_CUSTOM)){this.type=iAd.Button.TYPE_CUSTOM}}this.layer.addClassName(this.type)};iAd.Button.prototype.createLayer=function(){this.callSuper();this.layer.addClassName(this.type)};iAd.Button.prototype.layerWasCreated=function(){this.callSuper();var a=this.layer;a.setAttribute("role","button");if(this.type===iAd.Button.TYPE_ROUNDED_RECT||this.type===iAd.Button.TYPE_CUSTOM){this.titleLabel=this.addSubview(new iAd.Label())}else{if(this.type===iAd.Button.TYPE_DELETION_ACCESSORY){a.appendChild(document.createElement("div"))}}this.syncTitleToState();this.addPropertyObserver("state",this,"syncTitleToState")};iAd.Button.prototype.setValueForAttribute=function(b,a){switch(a){case"ad-title-for-normal-state":this.setTitleForState(b,iAd.Control.STATE_NORMAL);break;case"ad-title-for-highlighted-state":this.setTitleForState(b,iAd.Control.STATE_HIGHLIGHTED);break;case"ad-title-for-disabled-state":this.setTitleForState(b,iAd.Control.STATE_DISABLED);break;case"ad-title-for-selected-state":this.setTitleForState(b,iAd.Control.STATE_SELECTED);break;default:this.callSuper(b,a)}};iAd.Button.prototype.getSize=function(){var a=window.getComputedStyle(this.layer);return new iAd.Size(parseInt(a.width),parseInt(a.height))};iAd.Button.prototype.setSize=function(a){this._autoSized=false;this.callSuper(a)};iAd.Button.prototype.getCurrentTitle=function(){if(this.titleLabel==null){return null}return this.titleLabel.text};iAd.Button.prototype.setAutosized=function(a){if(a){this.setLayerStyle({width:"auto",height:iAd.Button.DEFAULT_HEIGHT+"px"})}this._autosized=a};iAd.Button.prototype.titleForState=function(a){return this.titles[a]||null};iAd.Button.prototype.setTitleForState=function(b,a){this.titles[a]=b;if(a==this.state){this.syncTitleToState()}};iAd.Button.prototype.syncTitleToState=function(){if(this.titleLabel==null){return}this.titleLabel.text=this.titles[this.state]||this.titles[iAd.Control.STATE_NORMAL]};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Utils.replaceMethod(iAd.Button,"setValueForAttribute",function(b,a){if(a=="ad-title"){this.setTitleForState(b,iAd.Control.STATE_NORMAL)}else{if(a=="ad-vertical-alignment"){if(this.titleLabel){this.titleLabel.verticalAlignment=b}}else{this.callOriginal(b,a)}}});
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ActivityIndicatorView",superclass:iAd.View,synthesizedProperties:["activityIndicatorViewStyle","hidesWhenStopped","animating","animationStyle","customIndicatorImage","autoSized"],archivedProperties:["activityIndicatorViewStyle","hidesWhenStopped","animating","animationStyle","customIndicatorImage","autoSized"],cssClassName:"ad-activity-indicator-view"});iAd.ActivityIndicatorView.collectionAccessor="activityIndicatorViews";iAd.ActivityIndicatorView.STYLE_WHITE="ad-white";iAd.ActivityIndicatorView.STYLE_GRAY="ad-gray";iAd.ActivityIndicatorView.STYLE_CUSTOM="ad-custom";iAd.ActivityIndicatorView.ANIMATING_CSS="ad-animating";iAd.ActivityIndicatorView.SEGMENTS_CONTAINER_CSS="ad-segments-container";iAd.ActivityIndicatorView.ANIMATION_STYLE_STEPPED="ad-animation-stepped";iAd.ActivityIndicatorView.ANIMATION_STYLE_SMOOTH="ad-animation-smooth";iAd.ActivityIndicatorView.NUMBER_OF_SEGMENTS=12;iAd.ActivityIndicatorView.OPTIMAL_DIMENSION=74;iAd.ActivityIndicatorView.prototype.init=function(b,a){this._activityIndicatorViewStyle=a||iAd.ActivityIndicatorView.STYLE_WHITE;this._hidesWhenStopped=true;this._autoSized=true;this.segmentsContainer=null;this._animating=false;this._animationStyle="";this.segments=[];this.callSuper(b);this.updateVisibility();this.animationStyle=this._animationStyle||iAd.ActivityIndicatorView.ANIMATION_STYLE_STEPPED;this.updateSegments()};iAd.ActivityIndicatorView.prototype.setupLayer=function(){this.callSuper();if(this.layer.hasClassName(iAd.ActivityIndicatorView.STYLE_WHITE)){this._activityIndicatorViewStyle=iAd.ActivityIndicatorView.STYLE_WHITE}else{if(this.layer.hasClassName(iAd.ActivityIndicatorView.STYLE_GRAY)){this._activityIndicatorViewStyle=iAd.ActivityIndicatorView.STYLE_GRAY}else{if(this.layer.hasClassName(iAd.ActivityIndicatorView.STYLE_CUSTOM)){this._activityIndicatorViewStyle=iAd.ActivityIndicatorView.STYLE_CUSTOM}}}};iAd.ActivityIndicatorView.prototype.layerWasCreated=function(){this.callSuper();this.activityIndicatorViewStyle=this._activityIndicatorViewStyle;this.scaleContainer=document.createElement("div");this.scaleContainer.className="ad-scale-container";this.segmentsContainer=document.createElement("div");this.segmentsContainer.className=iAd.ActivityIndicatorView.SEGMENTS_CONTAINER_CSS;this.scaleContainer.appendChild(this.segmentsContainer);if(this._size.equals(iAd.Size.ZERO_SIZE)){this._size=new iAd.Size(37,37)}if(this._activityIndicatorViewStyle!==iAd.ActivityIndicatorView.STYLE_CUSTOM){this.createSegments()}this.layer.appendChild(this.scaleContainer)};iAd.ActivityIndicatorView.prototype.setSize=function(a){if(a.width!=a.height){a.width=a.height}this.callSuper(a);this.updateSegments()};iAd.ActivityIndicatorView.prototype.setValueForAttribute=function(b,a){switch(a){case"ad-custom-indicator-image":this.customIndicatorImage=iAd.Image.imageForURL(b,this.layerHasCustomAttribute("ad-has-hidpi-version"));break;default:this.callSuper(b,a)}};iAd.ActivityIndicatorView.prototype.setHidesWhenStopped=function(a){this._hidesWhenStopped=a;this.updateVisibility()};iAd.ActivityIndicatorView.prototype.setActivityIndicatorViewStyle=function(a){if(this.layer){this.layer.removeClassName(this._activityIndicatorViewStyle);this.layer.addClassName(a)}this._activityIndicatorViewStyle=a};iAd.ActivityIndicatorView.prototype.setAnimating=function(a){if(this._animating==a){return}this._animating=a;this.layer.toggleClassName(iAd.ActivityIndicatorView.ANIMATING_CSS,a);this.updateVisibility()};iAd.ActivityIndicatorView.prototype.setAnimationStyle=function(a){if(a==this._animationStyle){return}this.layer.removeClassName(this._animationStyle);this.layer.addClassName(a);this._animationStyle=a};iAd.ActivityIndicatorView.prototype.setCustomIndicatorImage=function(a){if(a==null||a.url==null){this._customIndicatorImage=null;this.layer.removeClassName(iAd.ActivityIndicatorView.STYLE_CUSTOM);this.segmentsContainer.style.backgroundImage="";if(!this.segments.length){this.createSegments()}this.updateSegments();return}this._customIndicatorImage=a;if(a.loaded){this.renderImage()}else{a.addPropertyObserver("loaded",this)}};iAd.ActivityIndicatorView.prototype.setAutoSized=function(a){if(a==this._autoSized){return}this._autoSized=a;if(a){this.autoSize()}};iAd.ActivityIndicatorView.prototype.handlePropertyChange=function(b,a){if(a=="loaded"){this.renderImage();this.removePropertyObserver("loaded",this)}};iAd.ActivityIndicatorView.prototype.renderImage=function(){if(this._autoSized){this.autoSize()}this.layer.addClassName(iAd.ActivityIndicatorView.STYLE_CUSTOM);this.segmentsContainer.style.backgroundImage="url("+this._customIndicatorImage.resolvedURL+")";this.segmentsContainer.style.webkitTransformOrigin="";this.scaleContainer.style.webkitTransform="scale(1)"};iAd.ActivityIndicatorView.prototype.autoSize=function(){if(this._customIndicatorImage&&this._customIndicatorImage.loaded){this.size=new iAd.Size(this._customIndicatorImage.width,this._customIndicatorImage.height)}};iAd.ActivityIndicatorView.prototype.updateVisibility=function(){this.hidden=(this._hidesWhenStopped&&!this._animating)};iAd.ActivityIndicatorView.prototype.createSegments=function(){var c=[];var b=iAd.ActivityIndicatorView.NUMBER_OF_SEGMENTS;var a=this.segmentsContainer;while(b--){var d=document.createElement("div");d.style.opacity=Math.max(1-b/10,0.3);a.appendChild(d);c.push(d)}this.segments=c};iAd.ActivityIndicatorView.prototype.updateSegments=function(){if(!this.segments.length||this.layer.hasClassName(iAd.ActivityIndicatorView.STYLE_CUSTOM)){return}var d=this._size.width/iAd.ActivityIndicatorView.OPTIMAL_DIMENSION,l=d<1?iAd.ActivityIndicatorView.OPTIMAL_DIMENSION:this._size.width,m=Math.floor(l/2),h=l/74,b=Math.floor(3*h)*2,k=Math.floor(10*h)*2,c=Math.floor((l-b)/2),j=Math.floor((l-k)/2),e=Math.floor(3*h),a=this.segments.length;angle_increment=360/a;var g;for(var f=0;f<a;f++){g=this.segments[f];g.style.left=c+"px";g.style.top=j+"px";g.style.width=b+"px";g.style.height=k+"px";g.style.webkitBorderRadius=e+"px";g.style.webkitTransform="rotate("+angle_increment*f+"deg) translateY(-"+j+"px)"}this.segmentsContainer.style.webkitTransformOrigin=m+"px "+m+"px";this.scaleContainer.style.webkitTransform=d<1?"scale("+d+")":""};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Utils.replaceMethod(iAd.ActivityIndicatorView,"setSize",function(a){var b=Math.min(a.width,a.height);this.callOriginal(new iAd.Size(b,b))});
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.SharedView",superclass:iAd.View,cssClassName:"iap-shared-view",synthesizedProperties:["viewControllerId"],archivedProperties:["viewControllerId"],collectionAccessor:"sharedViews"});iAP.SharedView.instances={};iAP.SharedView.prototype.init=function(a){this.archivedIdsByParentId={};this.previousParentId=null;this.callSuper(a);this.isViewControllerContainer=true};iAP.SharedView.prototype.handleEvent=function(a){this.callSuper(a);if(a.type==iAd.ViewController.VIEW_DID_LOAD&&a.ad.sender==this.containedViewController){this.contentView=this.containedViewController.contentView;if(this.contentView){this.contentView.layer.addClassName("iap-shared-content-view")}this.containedViewControllerIsLoaded=true}};iAP.SharedView.prototype.parentViewControllerViewDidLoad=function(){this.parentViewControllerIsLoaded=true;this.updateViewController()};iAP.SharedView.prototype.parentViewControllerViewWillAppear=function(b){var c=iAP.SharedView.instances[this.viewControllerId];var a=this.viewController.id;if(c.previousParentId!=a){c.layer.style.webkitAnimation="";c.id=c.archivedIdsByParentId[a];c.previousParentId=a}if(c.superview!=iAd.RootView.sharedRoot){iAd.EventTarget.createAndDispatchEvent.call(this.containedViewController,iAd.ViewController.VIEW_WILL_APPEAR_EVENT,[["animated",b]]);this.shouldDispatchViewDidAppearEvent=true}};iAP.SharedView.prototype.parentViewControllerViewDidAppear=function(b){if(this.shouldDispatchViewDidAppearEvent){var c=this.containedViewController;iAd.EventTarget.createAndDispatchEvent.call(c,iAd.ViewController.VIEW_DID_APPEAR_EVENT,[["animated",b]]);this.shouldDispatchViewDidAppearEvent=false;var a=c.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS];if(a){c.callMethodNameAfterDelay("startActionList",0,a)}}};iAP.SharedView.prototype.parentViewControllerViewWillDisappear=function(b,d){if(!d){return}var e=iAP.SharedView.instances[this.viewControllerId];var c=this.containedViewController;iAP.SharedView.clearWebkitAnimation(e.layer);iAd.EventTarget.createAndDispatchEvent.call(c,iAd.ViewController.VIEW_WILL_DISAPPEAR_EVENT,[["animated",b]]);this.shouldDispatchViewDidDisappearEvent=true;var a=c.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS];if(a){c.callMethodNameAfterDelay("startActionList",0,a)}};iAP.SharedView.clearWebkitAnimation=function(c){c.style.webkitAnimation="";var b=c.children;for(var a=0,d=b.length;a<d;a++){this.clearWebkitAnimation(b[a])}};iAP.SharedView.prototype.parentViewControllerViewDidDisappear=function(b){if(this.shouldDispatchViewDidDisappearEvent){iAd.EventTarget.createAndDispatchEvent.call(this.containedViewController,iAd.ViewController.VIEW_DID_DISAPPEAR_EVENT,[["animated",b]]);this.shouldDispatchViewDidDisappearEvent=false;var a=iAP.SharedView.instances[this.viewControllerId].layer;iAP.SharedView.clearWebkitAnimation(a)}};iAP.SharedView.prototype.setViewControllerId=function(a){if(this._viewControllerId==a){return}this._viewControllerId=a;this.updateViewController()};iAP.SharedView.prototype.updateViewController=function(){if(!this.declarativeLayerWasInitialized||!this.viewControllerId){return}if(this.parentViewControllerIsLoaded){this.processDeferredViewControllerLoad()}else{this.needsDeferredViewControllerUpdate=true}};iAP.SharedView.prototype.processDeferredViewControllerLoad=function(){var f=iAP.SharedView.instances[this.viewControllerId];var a=iAP.ViewController.instances[this.viewControllerId];var d=this.viewController.id;if(!f){f=this;iAP.SharedView.instances[this.viewControllerId]=this;f.archivedIdsByParentId[d]=this.id;a.addEventListener(iAd.ViewController.VIEW_DID_LOAD,this,false);var c=[iAd.ViewController.VIEW_WILL_APPEAR_EVENT,iAd.ViewController.VIEW_DID_APPEAR_EVENT,iAd.ViewController.VIEW_WILL_DISAPPEAR_EVENT,iAd.ViewController.VIEW_DID_DISAPPEAR_EVENT];a.createAndDispatchEvent=function(g,h){if(c.indexOf(g)==-1){iAd.EventTarget.createAndDispatchEvent.call(a,g,h)}};var e=this.layer;while(e.hasClassName("iap-wrapper")){e=e.firstElementChild}e.appendChild(a.view.layer)}else{if(this.viewController){this.viewController.outlets[this.outlet]=f}f.layer.style.webkitAnimation="";f.archivedIdsByParentId[d]=this.id;f.id=this.id;if(f.superview!=iAd.RootView.sharedRoot){var b=this.superview.subviews.indexOf(this);this.superview.insertSubviewAtIndex(f,b)}this.removeFromSuperview()}f.previousParentId=d;this.containedViewController=a;this.needsDeferredViewControllerUpdate=false};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.LoadingViewController",superclass:iAP.ViewController,synthesizedProperties:["minimumDisplayTime"],archivedProperties:["minimumDisplayTime"]});iAP.LoadingViewController.prototype.init=function(a){this._minimumDisplayTime=0;this.callSuper(a);iAP.LoadingViewController.sharedTransitionController.loadingViewController=this};iAP.LoadingViewController.prototype.setMinimumDisplayTime=function(a){if(a==this._minimumDisplayTime){return}this._minimumDisplayTime=a;iAP.LoadingViewController.sharedTransitionController.loadingViewControllerMinimumDisplayTime=a};iAP.LoadingViewController.prototype.viewWillAppear=function(b){var a=iAP.LoadingViewController.sharedTransitionController.previouslyVisibleViewController;if(a){this.view.size=a.view.size;this.orientation=a.orientation}this.callSuper(b)};iAP.LoadingViewController.prototype.viewDidLoad=function(){this.callSuper();var c=this.contentView.subviews;for(var a=0,b=c.length;a<b;a++){c[a].autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN}};Object.defineProperty(iAP.LoadingViewController,"sharedTransitionController",{get:function(){if(!iAP.LoadingViewController.hasOwnProperty("_sharedTransitionController")){iAP.LoadingViewController.sharedTransitionController=iAd.RootViewController.sharedRootViewController.navigationController.backingTransitionController}return iAP.LoadingViewController._sharedTransitionController},set:function(a){iAP.LoadingViewController._sharedTransitionController=a}});
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.TransitionToPageAction",superclass:iAd.ScriptAction,synthesizedProperties:["destinationPage"]});iAP.TransitionToPageAction.prototype.start=function(){if(this.viewController instanceof iAd.ViewController&&this.destinationPage){if(this.destinationPage===iAd.NavigationViewProcessor.PREVIOUS_ITEM_ID){var a=iAd.RootViewController.sharedRootViewController.navigationController;if(a){a.popViewControllerAnimated(true)}}else{this.viewController.transitionToViewControllerWithID(this.destinationPage)}}};iAP.TransitionToPageAction.prototype.summaryText=function(){if(!this.destinationPage){return"None"}else{if(this.destinationPage==iAd.NavigationViewProcessor.PREVIOUS_ITEM_ID){return"Previous Page"}else{return this.destinationPage}}};
/**
*
* Copyright © 2009-2013 Apple Inc.  All rights reserved.
*
**/

iAd.Analytics={_observedObjects:{},_messagesById:{},_uid:1};iAd.Analytics.logsToConsole=false;iAd.Analytics.NAME_TO_SYMBOL_MAP={analyticsObjectId:"as",analyticsName:"an",analyticsType:"at",analyticsSectionId:"k"};iAd.Analytics.log=function(d){if(d==null){iAd.Console.warn("iAd.Analytics.log requires a valid parameter.");return}var a={};var b;for(var c in d){if(c in this.NAME_TO_SYMBOL_MAP){a[this.NAME_TO_SYMBOL_MAP[c]]=d[c]}else{if(b==null){b={}}b[c]=d[c]}}if(b!=null){a.a=b}var e={v:iAd.VERSION};e[Date.now()]=a;this.composeMessage(e)};iAd.Analytics.setMessageForId=function(a,b){if(!b||!a){return}this._messagesById[b]=a};iAd.Analytics.updateMessageWithId=function(c,a){var b=this._messagesById[c];if(b&&a){iAd.Utils.copyPropertiesFromSourceToTarget(a,b)}};iAd.Analytics.logMessageWithId=function(e,b,c){var d=this._messagesById[e];if(d){var a={};iAd.Utils.copyPropertiesFromSourceToTarget(d,a);if(c&&c.analyticsDetails){iAd.Utils.copyPropertiesFromSourceToTarget(c.analyticsDetails,a)}if(b){iAd.Utils.copyPropertiesFromSourceToTarget(b,a)}for(key in a){value=a[key];a[key]=iAd.Utils.objectIsFunction(value)?value.call(c||this):value}this.log(a)}};iAd.Analytics.logEvent=function(d,c,b){var f=c.id||c._analyticsId;if(!f){return}var a=this._observedObjects[f];if(!a){return}var e=a[d];if(!e){return}e.forEach(function(g){this.logMessageWithId(g,b,c)},this)};iAd.Analytics.registerMessageForEvent=function(b,d,a){if(!a){return}var f;if(iAd.Utils.objectIsString(a)){f=a}else{if(a.id){f=a.id}else{if(a._analyticsId){f=a._analyticsId}else{f=a._analyticsId=this.uniqueId()}}}if(!d||!b){return}var c=this._observedObjects[f];if(!c){c=this._observedObjects[f]={}}var e=c[d];if(!e){e=c[d]=[]}if(e.indexOf(b)==-1){e.push(b)}};iAd.Analytics.unregisterMessageForEvent=function(b,d,a){if(!a){return}var f=iAd.Utils.objectIsString(a)?a:a.id||a._analyticsId;if(!f||!d||!b){return}var c=this._observedObjects[f];if(!c){return}var e=c[d];if(!e){return}iAd.Array.removeObjectFromArray(b,e)};iAd.Analytics.composeMessage=function(b){var a=JSON.stringify(b);if(window.hasOwnProperty("ad")){window.ad.reportClickEvent(a)}if(this.logsToConsole){iAd.Console.log("[ANALYTICS]: "+a)}};iAd.Analytics.processAnalyticsWithConfiguration=function(d){var c=d.messages;if(c){for(var b in c){this.setMessageForId(c[b],b)}}var a=d.messagesForEvents;if(a){a.forEach(function(e){this.registerMessageForEvent(e.messageId,e.eventType,e.objectId)},this)}};iAd.Analytics.uniqueId=function(){return"analytics-"+this._uid++};;